cscope 15 /home/kallol/MTP/Code/dev/igbvf               0000198519
	@defines.h

28 #i‚de‡
_E1000_DEFINES_H_


29 
	#_E1000_DEFINES_H_


	)

32 
	#REQ_TX_DESCRIPTOR_MULTIPLE
 8

	)

33 
	#REQ_RX_DESCRIPTOR_MULTIPLE
 8

	)

36 
	#E1000_IVAR_VALID
 0x80

	)

39 
	#E1000_RXD_STAT_DD
 0x01

	)

40 
	#E1000_RXD_STAT_EOP
 0x02

	)

41 
	#E1000_RXD_STAT_IXSM
 0x04

	)

42 
	#E1000_RXD_STAT_VP
 0x08

	)

43 
	#E1000_RXD_STAT_UDPCS
 0x10

	)

44 
	#E1000_RXD_STAT_TCPCS
 0x20

	)

45 
	#E1000_RXD_STAT_IPCS
 0x40

	)

46 
	#E1000_RXD_ERR_SE
 0x02

	)

47 
	#E1000_RXD_SPC_VLAN_MASK
 0x0FFF

	)

49 
	#E1000_RXDEXT_STATERR_CE
 0x01000000

	)

50 
	#E1000_RXDEXT_STATERR_SE
 0x02000000

	)

51 
	#E1000_RXDEXT_STATERR_SEQ
 0x04000000

	)

52 
	#E1000_RXDEXT_STATERR_CXE
 0x10000000

	)

53 
	#E1000_RXDEXT_STATERR_TCPE
 0x20000000

	)

54 
	#E1000_RXDEXT_STATERR_IPE
 0x40000000

	)

55 
	#E1000_RXDEXT_STATERR_RXE
 0x80000000

	)

59 
	#E1000_RXDEXT_ERR_FRAME_ERR_MASK
 ( \

60 
E1000_RXDEXT_STATERR_CE
 | \

61 
E1000_RXDEXT_STATERR_SE
 | \

62 
E1000_RXDEXT_STATERR_SEQ
 | \

63 
E1000_RXDEXT_STATERR_CXE
 | \

64 
E1000_RXDEXT_STATERR_RXE
)

	)

67 
	#E1000_CTRL_RST
 0x04000000

	)

70 
	#E1000_STATUS_FD
 0x00000001

	)

71 
	#E1000_STATUS_LU
 0x00000002

	)

72 
	#E1000_STATUS_TXOFF
 0x00000010

	)

73 
	#E1000_STATUS_SPEED_10
 0x00000000

	)

74 
	#E1000_STATUS_SPEED_100
 0x00000040

	)

75 
	#E1000_STATUS_SPEED_1000
 0x00000080

	)

77 
	#SPEED_10
 10

	)

78 
	#SPEED_100
 100

	)

79 
	#SPEED_1000
 1000

	)

80 
	#HALF_DUPLEX
 1

	)

81 
	#FULL_DUPLEX
 2

	)

84 
	#E1000_TXD_POPTS_IXSM
 0x01

	)

85 
	#E1000_TXD_POPTS_TXSM
 0x02

	)

86 
	#E1000_TXD_CMD_DEXT
 0x20000000

	)

87 
	#E1000_TXD_STAT_DD
 0x00000001

	)

89 
	#MAX_JUMBO_FRAME_SIZE
 0x3F00

	)

92 
	#VLAN_TAG_SIZE
 4

	)

95 
	#E1000_SUCCESS
 0

	)

96 
	#E1000_ERR_CONFIG
 3

	)

97 
	#E1000_ERR_MAC_INIT
 5

	)

98 
	#E1000_ERR_MBX
 15

	)

101 
	#E1000_SRRCTL_BSIZEPKT_SHIFT
 10

	)

102 
	#E1000_SRRCTL_BSIZEHDRSIZE_MASK
 0x00000F00

	)

103 
	#E1000_SRRCTL_BSIZEHDRSIZE_SHIFT
 2

	)

104 
	#E1000_SRRCTL_DESCTYPE_ADV_ONEBUF
 0x02000000

	)

105 
	#E1000_SRRCTL_DESCTYPE_HDR_SPLIT_ALWAYS
 0x0A000000

	)

106 
	#E1000_SRRCTL_DESCTYPE_MASK
 0x0E000000

	)

107 
	#E1000_SRRCTL_DROP_EN
 0x80000000

	)

109 
	#E1000_SRRCTL_BSIZEPKT_MASK
 0x0000007F

	)

110 
	#E1000_SRRCTL_BSIZEHDR_MASK
 0x00003F00

	)

113 
	#E1000_TXDCTL_QUEUE_ENABLE
 0x02000000

	)

114 
	#E1000_RXDCTL_QUEUE_ENABLE
 0x02000000

	)

117 
	#E1000_DCA_TXCTRL_TX_WB_RO_EN
 (1 << 11Ë

	)

119 
	#E1000_VF_INIT_TIMEOUT
 200

	)

	@ethtool.c

30 
	~<löux/√tdevi˚.h
>

31 
	~<löux/ëhtoﬁ.h
>

32 
	~<löux/pci.h
>

33 
	~<löux/vmÆloc.h
>

34 
	~<löux/dñay.h
>

36 
	~"igbvf.h
"

37 
	~<löux/if_vœn.h
>

40 
	sigbvf_°©s
 {

41 
	m°©_°rög
[
ETH_GSTRING_LEN
];

42 
	msizeof_°©
;

43 
	m°©_off£t
;

44 
	mba£_°©_off£t
;

47 
	#IGBVF_STAT
(
cuºít
, 
ba£
) \

48 (((
igbvf_ad≠ãr
 *)0)->
cuºít
), \

49 
	`off£tof
(
igbvf_ad≠ãr
, 
cuºít
), \

50 
	`off£tof
(
igbvf_ad≠ãr
, 
ba£
)

	)

52 c⁄° 
igbvf_°©s
 
	gigbvf_g°rögs_°©s
[] = {

53 { "rx_∑ckës", 
IGBVF_STAT
(
°©s
.
g¥c
, sèts.
ba£_g¥c
) },

54 { "tx_∑ckës", 
IGBVF_STAT
(
°©s
.
g±c
, sèts.
ba£_g±c
) },

55 { "rx_byãs", 
IGBVF_STAT
(
°©s
.
g‹c
, sèts.
ba£_g‹c
) },

56 { "tx_byãs", 
IGBVF_STAT
(
°©s
.
gŸc
, sèts.
ba£_gŸc
) },

57 { "mu…iˇ°", 
IGBVF_STAT
(
°©s
.
m¥c
, sèts.
ba£_m¥c
) },

58 { "lbrx_byãs", 
IGBVF_STAT
(
°©s
.
g‹lbc
, sèts.
ba£_g‹lbc
) },

59 { "lbrx_∑ckës", 
IGBVF_STAT
(
°©s
.
g¥lbc
, sèts.
ba£_g¥lbc
) },

60 { "tx_ª°¨t_queue", 
IGBVF_STAT
(
ª°¨t_queue
, 
zîo_ba£
) },

61 { "rx_l⁄g_byã_cou¡", 
IGBVF_STAT
(
°©s
.
g‹c
, sèts.
ba£_g‹c
) },

62 { "rx_csum_ofÊﬂd_good", 
IGBVF_STAT
(
hw_csum_good
, 
zîo_ba£
) },

63 { "rx_csum_ofÊﬂd_îr‹s", 
IGBVF_STAT
(
hw_csum_îr
, 
zîo_ba£
) },

64 { "rx_hódî_•lô", 
IGBVF_STAT
(
rx_hdr_•lô
, 
zîo_ba£
) },

65 { "Æloc_rx_buff_Áûed", 
IGBVF_STAT
(
Æloc_rx_buff_Áûed
, 
zîo_ba£
) },

68 
	#IGBVF_GLOBAL_STATS_LEN
 
	`ARRAY_SIZE
(
igbvf_g°rögs_°©s
)

	)

70 c⁄° 
	gigbvf_g°rögs_ã°
[][
ETH_GSTRING_LEN
] = {

74 
	#IGBVF_TEST_LEN
 
	`ARRAY_SIZE
(
igbvf_g°rögs_ã°
)

	)

76 
	$igbvf_gë_£âögs
(
√t_devi˚
 *
√tdev
,

77 
ëhtoﬁ_cmd
 *
ecmd
)

79 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

80 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

81 
u32
 
°©us
;

83 
ecmd
->
suµ‹ãd
 = 
SUPPORTED_1000ba£T_FuŒ
;

85 
ecmd
->
advîtisög
 = 
ADVERTISED_1000ba£T_FuŒ
;

87 
ecmd
->
p‹t
 = -1;

88 
ecmd
->
å™s˚ivî
 = 
XCVR_DUMMY1
;

90 
°©us
 = 
	`î32
(
STATUS
);

91 i‡(
°©us
 & 
E1000_STATUS_LU
) {

92 i‡(
°©us
 & 
E1000_STATUS_SPEED_1000
)

93 
	`ëhtoﬁ_cmd_•ìd_£t
(
ecmd
, 
SPEED_1000
);

94 i‡(
°©us
 & 
E1000_STATUS_SPEED_100
)

95 
	`ëhtoﬁ_cmd_•ìd_£t
(
ecmd
, 
SPEED_100
);

97 
	`ëhtoﬁ_cmd_•ìd_£t
(
ecmd
, 
SPEED_10
);

99 i‡(
°©us
 & 
E1000_STATUS_FD
)

100 
ecmd
->
du∂ex
 = 
DUPLEX_FULL
;

102 
ecmd
->
du∂ex
 = 
DUPLEX_HALF
;

104 
	`ëhtoﬁ_cmd_•ìd_£t
(
ecmd
, -1);

105 
ecmd
->
du∂ex
 = -1;

108 
ecmd
->
aut⁄eg
 = 
AUTONEG_DISABLE
;

111 
	}
}

113 
	$igbvf_£t_£âögs
(
√t_devi˚
 *
√tdev
,

114 
ëhtoﬁ_cmd
 *
ecmd
)

116  -
EOPNOTSUPP
;

117 
	}
}

119 
	$igbvf_gë_∑u£∑øm
(
√t_devi˚
 *
√tdev
,

120 
ëhtoﬁ_∑u£∑øm
 *
∑u£
)

123 
	}
}

125 
	$igbvf_£t_∑u£∑øm
(
√t_devi˚
 *
√tdev
,

126 
ëhtoﬁ_∑u£∑øm
 *
∑u£
)

128  -
EOPNOTSUPP
;

129 
	}
}

131 
u32
 
	$igbvf_gë_msgÀvñ
(
√t_devi˚
 *
√tdev
)

133 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

134  
ad≠ãr
->
msg_íabÀ
;

135 
	}
}

137 
	$igbvf_£t_msgÀvñ
(
√t_devi˚
 *
√tdev
, 
u32
 
d©a
)

139 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

140 
ad≠ãr
->
msg_íabÀ
 = 
d©a
;

141 
	}
}

143 
	$igbvf_gë_ªgs_Àn
(
√t_devi˚
 *
√tdev
)

145 
	#IGBVF_REGS_LEN
 8

	)

146  
IGBVF_REGS_LEN
 * (
u32
);

147 
	}
}

149 
	$igbvf_gë_ªgs
(
√t_devi˚
 *
√tdev
,

150 
ëhtoﬁ_ªgs
 *
ªgs
, *
p
)

152 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

153 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

154 
u32
 *
ªgs_buff
 = 
p
;

156 
	`mem£t
(
p
, 0, 
IGBVF_REGS_LEN
 * (
u32
));

158 
ªgs
->
vîsi⁄
 = (1 << 24Ë| (
ad≠ãr
->
pdev
->
ªvisi⁄
 << 16) |

159 
ad≠ãr
->
pdev
->
devi˚
;

161 
ªgs_buff
[0] = 
	`î32
(
CTRL
);

162 
ªgs_buff
[1] = 
	`î32
(
STATUS
);

164 
ªgs_buff
[2] = 
	`î32
(
	`RDLEN
(0));

165 
ªgs_buff
[3] = 
	`î32
(
	`RDH
(0));

166 
ªgs_buff
[4] = 
	`î32
(
	`RDT
(0));

168 
ªgs_buff
[5] = 
	`î32
(
	`TDLEN
(0));

169 
ªgs_buff
[6] = 
	`î32
(
	`TDH
(0));

170 
ªgs_buff
[7] = 
	`î32
(
	`TDT
(0));

171 
	}
}

173 
	$igbvf_gë_ì¥om_Àn
(
√t_devi˚
 *
√tdev
)

176 
	}
}

178 
	$igbvf_gë_ì¥om
(
√t_devi˚
 *
√tdev
,

179 
ëhtoﬁ_ì¥om
 *
ì¥om
, 
u8
 *
byãs
)

181  -
EOPNOTSUPP
;

182 
	}
}

184 
	$igbvf_£t_ì¥om
(
√t_devi˚
 *
√tdev
,

185 
ëhtoﬁ_ì¥om
 *
ì¥om
, 
u8
 *
byãs
)

187  -
EOPNOTSUPP
;

188 
	}
}

190 
	$igbvf_gë_drvöfo
(
√t_devi˚
 *
√tdev
,

191 
ëhtoﬁ_drvöfo
 *
drvöfo
)

193 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

195 
	`°æ˝y
(
drvöfo
->
drivî
, 
igbvf_drivî_«me
, (drvinfo->driver));

196 
	`°æ˝y
(
drvöfo
->
vîsi⁄
, 
igbvf_drivî_vîsi⁄
,

197 (
drvöfo
->
vîsi⁄
));

198 
	`°æ˝y
(
drvöfo
->
bus_öfo
, 
	`pci_«me
(
ad≠ãr
->
pdev
),

199 (
drvöfo
->
bus_öfo
));

200 
drvöfo
->
ªgdump_Àn
 = 
	`igbvf_gë_ªgs_Àn
(
√tdev
);

201 
drvöfo
->
ìdump_Àn
 = 
	`igbvf_gë_ì¥om_Àn
(
√tdev
);

202 
	}
}

204 
	$igbvf_gë_rög∑øm
(
√t_devi˚
 *
√tdev
,

205 
ëhtoﬁ_rög∑øm
 *
rög
)

207 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

208 
igbvf_rög
 *
tx_rög
 = 
ad≠ãr
->tx_ring;

209 
igbvf_rög
 *
rx_rög
 = 
ad≠ãr
->rx_ring;

211 
rög
->
rx_max_≥ndög
 = 
IGBVF_MAX_RXD
;

212 
rög
->
tx_max_≥ndög
 = 
IGBVF_MAX_TXD
;

213 
rög
->
rx_≥ndög
 = 
rx_rög
->
cou¡
;

214 
rög
->
tx_≥ndög
 = 
tx_rög
->
cou¡
;

215 
	}
}

217 
	$igbvf_£t_rög∑øm
(
√t_devi˚
 *
√tdev
,

218 
ëhtoﬁ_rög∑øm
 *
rög
)

220 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

221 
igbvf_rög
 *
ãmp_rög
;

222 
îr
 = 0;

223 
u32
 
√w_rx_cou¡
, 
√w_tx_cou¡
;

225 i‡((
rög
->
rx_möi_≥ndög
Ë|| (rög->
rx_jumbo_≥ndög
))

226  -
EINVAL
;

228 
√w_rx_cou¡
 = 
	`max
(
rög
->
rx_≥ndög
, (
u32
)
IGBVF_MIN_RXD
);

229 
√w_rx_cou¡
 = 
	`mö
“ew_rx_cou¡, (
u32
)
IGBVF_MAX_RXD
);

230 
√w_rx_cou¡
 = 
	`ALIGN
“ew_rx_cou¡, 
REQ_RX_DESCRIPTOR_MULTIPLE
);

232 
√w_tx_cou¡
 = 
	`max
(
rög
->
tx_≥ndög
, (
u32
)
IGBVF_MIN_TXD
);

233 
√w_tx_cou¡
 = 
	`mö
“ew_tx_cou¡, (
u32
)
IGBVF_MAX_TXD
);

234 
√w_tx_cou¡
 = 
	`ALIGN
“ew_tx_cou¡, 
REQ_TX_DESCRIPTOR_MULTIPLE
);

236 i‡((
√w_tx_cou¡
 =
ad≠ãr
->
tx_rög
->
cou¡
) &&

237 (
√w_rx_cou¡
 =
ad≠ãr
->
rx_rög
->
cou¡
)) {

242 
	`ã°_™d_£t_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
))

243 
	`m¶ìp
(1);

245 i‡(!
	`√tif_ru¬ög
(
ad≠ãr
->
√tdev
)) {

246 
ad≠ãr
->
tx_rög
->
cou¡
 = 
√w_tx_cou¡
;

247 
ad≠ãr
->
rx_rög
->
cou¡
 = 
√w_rx_cou¡
;

248 
˛ór_ª£t
;

251 
ãmp_rög
 = 
	`vmÆloc
((
igbvf_rög
));

252 i‡(!
ãmp_rög
) {

253 
îr
 = -
ENOMEM
;

254 
˛ór_ª£t
;

257 
	`igbvf_down
(
ad≠ãr
);

264 i‡(
√w_tx_cou¡
 !
ad≠ãr
->
tx_rög
->
cou¡
) {

265 
	`mem˝y
(
ãmp_rög
, 
ad≠ãr
->
tx_rög
, (
igbvf_rög
));

267 
ãmp_rög
->
cou¡
 = 
√w_tx_cou¡
;

268 
îr
 = 
	`igbvf_£tup_tx_ªsour˚s
(
ad≠ãr
, 
ãmp_rög
);

269 i‡(
îr
)

270 
îr_£tup
;

272 
	`igbvf_‰ì_tx_ªsour˚s
(
ad≠ãr
->
tx_rög
);

274 
	`mem˝y
(
ad≠ãr
->
tx_rög
, 
ãmp_rög
, (
igbvf_rög
));

277 i‡(
√w_rx_cou¡
 !
ad≠ãr
->
rx_rög
->
cou¡
) {

278 
	`mem˝y
(
ãmp_rög
, 
ad≠ãr
->
rx_rög
, (
igbvf_rög
));

280 
ãmp_rög
->
cou¡
 = 
√w_rx_cou¡
;

281 
îr
 = 
	`igbvf_£tup_rx_ªsour˚s
(
ad≠ãr
, 
ãmp_rög
);

282 i‡(
îr
)

283 
îr_£tup
;

285 
	`igbvf_‰ì_rx_ªsour˚s
(
ad≠ãr
->
rx_rög
);

287 
	`mem˝y
(
ad≠ãr
->
rx_rög
, 
ãmp_rög
,(
igbvf_rög
));

289 
îr_£tup
:

290 
	`igbvf_up
(
ad≠ãr
);

291 
	`v‰ì
(
ãmp_rög
);

292 
˛ór_ª£t
:

293 
	`˛ór_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
);

294  
îr
;

295 
	}
}

297 
	$igbvf_lök_ã°
(
igbvf_ad≠ãr
 *
ad≠ãr
, 
u64
 *
d©a
)

299 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

300 *
d©a
 = 0;

302 
hw
->
mac
.
›s
.
	`check_f‹_lök
(hw);

304 i‡(!(
	`î32
(
STATUS
Ë& 
E1000_STATUS_LU
))

305 *
d©a
 = 1;

307  *
d©a
;

308 
	}
}

310 
	$igbvf_düg_ã°
(
√t_devi˚
 *
√tdev
,

311 
ëhtoﬁ_ã°
 *
ëh_ã°
, 
u64
 *
d©a
)

313 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

315 
	`£t_bô
(
__IGBVF_TESTING
, &
ad≠ãr
->
°©e
);

321 i‡(
	`igbvf_lök_ã°
(
ad≠ãr
, &
d©a
[0]))

322 
ëh_ã°
->
Êags
 |
ETH_TEST_FL_FAILED
;

324 
	`˛ór_bô
(
__IGBVF_TESTING
, &
ad≠ãr
->
°©e
);

325 
	`m¶ìp_öãºu±ibÀ
(4 * 1000);

326 
	}
}

328 
	$igbvf_gë_wﬁ
(
√t_devi˚
 *
√tdev
,

329 
ëhtoﬁ_wﬁöfo
 *
wﬁ
)

331 
wﬁ
->
suµ‹ãd
 = 0;

332 
wﬁ
->
wﬁ›ts
 = 0;

333 
	}
}

335 
	$igbvf_£t_wﬁ
(
√t_devi˚
 *
√tdev
,

336 
ëhtoﬁ_wﬁöfo
 *
wﬁ
)

338  -
EOPNOTSUPP
;

339 
	}
}

341 
	$igbvf_gë_cﬂÀs˚
(
√t_devi˚
 *
√tdev
,

342 
ëhtoﬁ_cﬂÀs˚
 *
ec
)

344 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

346 i‡(
ad≠ãr
->
ªque°ed_ôr
 <= 3)

347 
ec
->
rx_cﬂÀs˚_u£cs
 = 
ad≠ãr
->
ªque°ed_ôr
;

349 
ec
->
rx_cﬂÀs˚_u£cs
 = 
ad≠ãr
->
cuºít_ôr
 >> 2;

352 
	}
}

354 
	$igbvf_£t_cﬂÀs˚
(
√t_devi˚
 *
√tdev
,

355 
ëhtoﬁ_cﬂÀs˚
 *
ec
)

357 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

358 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

360 i‡((
ec
->
rx_cﬂÀs˚_u£cs
 >
IGBVF_MIN_ITR_USECS
) &&

361 (
ec
->
rx_cﬂÀs˚_u£cs
 <
IGBVF_MAX_ITR_USECS
)) {

362 
ad≠ãr
->
cuºít_ôr
 = 
ec
->
rx_cﬂÀs˚_u£cs
 << 2;

363 
ad≠ãr
->
ªque°ed_ôr
 = 1000000000 /

364 (
ad≠ãr
->
cuºít_ôr
 * 256);

365 } i‡((
ec
->
rx_cﬂÀs˚_u£cs
 == 3) ||

366 (
ec
->
rx_cﬂÀs˚_u£cs
 == 2)) {

367 
ad≠ãr
->
cuºít_ôr
 = 
IGBVF_START_ITR
;

368 
ad≠ãr
->
ªque°ed_ôr
 = 
ec
->
rx_cﬂÀs˚_u£cs
;

369 } i‡(
ec
->
rx_cﬂÀs˚_u£cs
 == 0) {

377 
ad≠ãr
->
cuºít_ôr
 = 4;

378 
ad≠ãr
->
ªque°ed_ôr
 = 1000000000 /

379 (
ad≠ãr
->
cuºít_ôr
 * 256);

381  -
EINVAL
;

383 
	`wrôñ
(
ad≠ãr
->
cuºít_ôr
,

384 
hw
->
hw_addr
 + 
ad≠ãr
->
rx_rög
->
ôr_ªgi°î
);

387 
	}
}

389 
	$igbvf_nway_ª£t
(
√t_devi˚
 *
√tdev
)

391 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

392 i‡(
	`√tif_ru¬ög
(
√tdev
))

393 
	`igbvf_ªöô_locked
(
ad≠ãr
);

395 
	}
}

398 
	$igbvf_gë_ëhtoﬁ_°©s
(
√t_devi˚
 *
√tdev
,

399 
ëhtoﬁ_°©s
 *
°©s
,

400 
u64
 *
d©a
)

402 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

403 
i
;

405 
	`igbvf_upd©e_°©s
(
ad≠ãr
);

406 
i
 = 0; i < 
IGBVF_GLOBAL_STATS_LEN
; i++) {

407 *
p
 = (*)
ad≠ãr
 +

408 
igbvf_g°rögs_°©s
[
i
].
°©_off£t
;

409 *
b
 = (*)
ad≠ãr
 +

410 
igbvf_g°rögs_°©s
[
i
].
ba£_°©_off£t
;

411 
d©a
[
i
] = ((
igbvf_g°rögs_°©s
[i].
sizeof_°©
 ==

412 (
u64
)Ë? (*(u64 *)
p
 - *(u64 *)
b
) :

413 (*(
u32
 *)
p
 - *(u32 *)
b
));

416 
	}
}

418 
	$igbvf_gë_s£t_cou¡
(
√t_devi˚
 *
dev
, 
°rög£t
)

420 
°rög£t
) {

421 
ETH_SS_TEST
:

422  
IGBVF_TEST_LEN
;

423 
ETH_SS_STATS
:

424  
IGBVF_GLOBAL_STATS_LEN
;

426  -
EINVAL
;

428 
	}
}

430 
	$igbvf_gë_°rögs
(
√t_devi˚
 *
√tdev
, 
u32
 
°rög£t
,

431 
u8
 *
d©a
)

433 
u8
 *
p
 = 
d©a
;

434 
i
;

436 
°rög£t
) {

437 
ETH_SS_TEST
:

438 
	`mem˝y
(
d©a
, *
igbvf_g°rögs_ã°
, (igbvf_gstrings_test));

440 
ETH_SS_STATS
:

441 
i
 = 0; i < 
IGBVF_GLOBAL_STATS_LEN
; i++) {

442 
	`mem˝y
(
p
, 
igbvf_g°rögs_°©s
[
i
].
°©_°rög
,

443 
ETH_GSTRING_LEN
);

444 
p
 +
ETH_GSTRING_LEN
;

448 
	}
}

450 c⁄° 
ëhtoﬁ_›s
 
	gigbvf_ëhtoﬁ_›s
 = {

451 .
gë_£âögs
 = 
igbvf_gë_£âögs
,

452 .
	g£t_£âögs
 = 
igbvf_£t_£âögs
,

453 .
	ggë_drvöfo
 = 
igbvf_gë_drvöfo
,

454 .
	ggë_ªgs_Àn
 = 
igbvf_gë_ªgs_Àn
,

455 .
	ggë_ªgs
 = 
igbvf_gë_ªgs
,

456 .
	ggë_wﬁ
 = 
igbvf_gë_wﬁ
,

457 .
	g£t_wﬁ
 = 
igbvf_£t_wﬁ
,

458 .
	ggë_msgÀvñ
 = 
igbvf_gë_msgÀvñ
,

459 .
	g£t_msgÀvñ
 = 
igbvf_£t_msgÀvñ
,

460 .
	gnway_ª£t
 = 
igbvf_nway_ª£t
,

461 .
	ggë_lök
 = 
ëhtoﬁ_›_gë_lök
,

462 .
	ggë_ì¥om_Àn
 = 
igbvf_gë_ì¥om_Àn
,

463 .
	ggë_ì¥om
 = 
igbvf_gë_ì¥om
,

464 .
	g£t_ì¥om
 = 
igbvf_£t_ì¥om
,

465 .
	ggë_rög∑øm
 = 
igbvf_gë_rög∑øm
,

466 .
	g£t_rög∑øm
 = 
igbvf_£t_rög∑øm
,

467 .
	ggë_∑u£∑øm
 = 
igbvf_gë_∑u£∑øm
,

468 .
	g£t_∑u£∑øm
 = 
igbvf_£t_∑u£∑øm
,

469 .
	g£lf_ã°
 = 
igbvf_düg_ã°
,

470 .
	ggë_s£t_cou¡
 = 
igbvf_gë_s£t_cou¡
,

471 .
	ggë_°rögs
 = 
igbvf_gë_°rögs
,

472 .
	ggë_ëhtoﬁ_°©s
 = 
igbvf_gë_ëhtoﬁ_°©s
,

473 .
	ggë_cﬂÀs˚
 = 
igbvf_gë_cﬂÀs˚
,

474 .
	g£t_cﬂÀs˚
 = 
igbvf_£t_cﬂÀs˚
,

477 
	$igbvf_£t_ëhtoﬁ_›s
(
√t_devi˚
 *
√tdev
)

479 
	`SET_ETHTOOL_OPS
(
√tdev
, &
igbvf_ëhtoﬁ_›s
);

480 
	}
}

	@igbvf.h

30 #i‚de‡
_IGBVF_H_


31 
	#_IGBVF_H_


	)

33 
	~<löux/ty≥s.h
>

34 
	~<löux/timî.h
>

35 
	~<löux/io.h
>

36 
	~<löux/√tdevi˚.h
>

37 
	~<löux/if_vœn.h
>

39 
	~"vf.h
"

42 
	gigbvf_öfo
;

43 
	gigbvf_ad≠ãr
;

46 
	#IGBVF_START_ITR
 488

	)

47 
	#IGBVF_4K_ITR
 980

	)

48 
	#IGBVF_20K_ITR
 196

	)

49 
	#IGBVF_70K_ITR
 56

	)

51 
	eœãncy_ønge
 {

52 
	mlowe°_œãncy
 = 0,

53 
	mlow_œãncy
 = 1,

54 
	mbulk_œãncy
 = 2,

55 
	mœãncy_övÆid
 = 255

60 
	#IGBVF_INT_MODE_LEGACY
 0

	)

61 
	#IGBVF_INT_MODE_MSI
 1

	)

62 
	#IGBVF_INT_MODE_MSIX
 2

	)

65 
	#IGBVF_DEFAULT_TXD
 256

	)

66 
	#IGBVF_MAX_TXD
 4096

	)

67 
	#IGBVF_MIN_TXD
 80

	)

69 
	#IGBVF_DEFAULT_RXD
 256

	)

70 
	#IGBVF_MAX_RXD
 4096

	)

71 
	#IGBVF_MIN_RXD
 80

	)

73 
	#IGBVF_MIN_ITR_USECS
 10

	)

74 
	#IGBVF_MAX_ITR_USECS
 10000

	)

87 
	#IGBVF_RX_PTHRESH
 16

	)

88 
	#IGBVF_RX_HTHRESH
 8

	)

89 
	#IGBVF_RX_WTHRESH
 1

	)

92 
	#MAXIMUM_ETHERNET_VLAN_SIZE
 1522

	)

94 
	#IGBVF_FC_PAUSE_TIME
 0x0680

	)

97 
	#IGBVF_TX_QUEUE_WAKE
 32

	)

99 
	#IGBVF_RX_BUFFER_WRITE
 16

	)

101 
	#AUTO_ALL_MODES
 0

	)

102 
	#IGBVF_EEPROM_APME
 0x0400

	)

104 
	#IGBVF_MNG_VLAN_NONE
 (-1)

	)

107 
	#PS_PAGE_BUFFERS
 (
MAX_PS_BUFFERS
 - 1)

	)

109 
	eigbvf_bﬂrds
 {

110 
	mbﬂrd_vf
,

111 
	mbﬂrd_i350_vf
,

114 
	sigbvf_queue_°©s
 {

115 
u64
 
	m∑ckës
;

116 
u64
 
	mbyãs
;

123 
	sigbvf_buf„r
 {

124 
dma_addr_t
 
	mdma
;

125 
sk_buff
 *
	mskb
;

129 
	mtime_°amp
;

130 
u16
 
	mÀngth
;

131 
u16
 
	m√xt_to_w©ch
;

132 
u16
 
	mm≠≥d_as_∑ge
;

136 
∑ge
 *
	m∑ge
;

137 
u64
 
	m∑ge_dma
;

138 
	m∑ge_off£t
;

143 
	uigbvf_desc
 {

144 
e1000_adv_rx_desc
 
	mrx_desc
;

145 
e1000_adv_tx_desc
 
	mtx_desc
;

146 
e1000_adv_tx_c⁄ãxt_desc
 
	mtx_c⁄ãxt_desc
;

149 
	sigbvf_rög
 {

150 
igbvf_ad≠ãr
 *
	mad≠ãr
;

151 
igbvf_desc
 *
	mdesc
;

152 
dma_addr_t
 
	mdma
;

153 
	msize
;

154 
	mcou¡
;

156 
u16
 
	m√xt_to_u£
;

157 
u16
 
	m√xt_to_˛ón
;

159 
u16
 
	mhód
;

160 
u16
 
	mèû
;

163 
igbvf_buf„r
 *
	mbuf„r_öfo
;

164 
«pi_°ru˘
 
	m«pi
;

166 
	m«me
[
IFNAMSIZ
 + 5];

167 
u32
 
	meims_vÆue
;

168 
u32
 
	môr_vÆ
;

169 
œãncy_ønge
 
	môr_ønge
;

170 
u16
 
	môr_ªgi°î
;

171 
	m£t_ôr
;

173 
sk_buff
 *
	mrx_skb_t›
;

175 
igbvf_queue_°©s
 
	m°©s
;

179 
	sigbvf_ad≠ãr
 {

180 
timî_li°
 
	mw©chdog_timî
;

181 
timî_li°
 
	mblök_timî
;

183 
w‹k_°ru˘
 
	mª£t_èsk
;

184 
w‹k_°ru˘
 
	mw©chdog_èsk
;

186 c⁄° 
igbvf_öfo
 *
	mei
;

188 
	ma˘ive_vœns
[
BITS_TO_LONGS
(
VLAN_N_VID
)];

189 
u32
 
	mbd_numbî
;

190 
u32
 
	mrx_buf„r_Àn
;

191 
u32
 
	mpﬁlög_öãrvÆ
;

192 
u16
 
	mmng_vœn_id
;

193 
u16
 
	mlök_•ìd
;

194 
u16
 
	mlök_du∂ex
;

196 
•ölock_t
 
	mtx_queue_lock
;

199 
	m°©e
;

202 
u32
 
	mªque°ed_ôr
;

203 
u32
 
	mcuºít_ôr
;

208 
igbvf_rög
 *
tx_rög


209 
	m____ˇchñöe_Æig√d_ö_smp
;

211 
	mª°¨t_queue
;

212 
u32
 
	mtxd_cmd
;

214 
u32
 
	mtx_öt_dñay
;

215 
u32
 
	mtx_abs_öt_dñay
;

217 
	mtŸÆ_tx_byãs
;

218 
	mtŸÆ_tx_∑ckës
;

219 
	mtŸÆ_rx_byãs
;

220 
	mtŸÆ_rx_∑ckës
;

223 
u32
 
	mtx_timeout_cou¡
;

224 
u32
 
	mtx_fifo_hód
;

225 
u32
 
	mtx_hód_addr
;

226 
u32
 
	mtx_fifo_size
;

227 
u32
 
	mtx_dma_Áûed
;

232 
igbvf_rög
 *
	mrx_rög
;

234 
u32
 
	mrx_öt_dñay
;

235 
u32
 
	mrx_abs_öt_dñay
;

238 
u64
 
	mhw_csum_îr
;

239 
u64
 
	mhw_csum_good
;

240 
u64
 
	mrx_hdr_•lô
;

241 
u32
 
	mÆloc_rx_buff_Áûed
;

242 
u32
 
	mrx_dma_Áûed
;

244 
	mrx_ps_hdr_size
;

245 
u32
 
	mmax_‰ame_size
;

246 
u32
 
	mmö_‰ame_size
;

249 
√t_devi˚
 *
	m√tdev
;

250 
pci_dev
 *
	mpdev
;

251 
√t_devi˚_°©s
 
	m√t_°©s
;

252 
•ölock_t
 
	m°©s_lock
;

255 
e1000_hw
 
	mhw
;

261 
e1000_vf_°©s
 
	m°©s
;

262 
u64
 
	mzîo_ba£
;

264 
igbvf_rög
 
	mã°_tx_rög
;

265 
igbvf_rög
 
	mã°_rx_rög
;

266 
u32
 
	mã°_i¸
;

268 
u32
 
	mmsg_íabÀ
;

269 
msix_íåy
 *
	mmsix_íåõs
;

270 
	möt_mode
;

271 
u32
 
	meims_íabÀ_mask
;

272 
u32
 
	meims_Ÿhî
;

273 
u32
 
	möt_cou¡î0
;

274 
u32
 
	möt_cou¡î1
;

276 
u32
 
	mì¥om_wﬁ
;

277 
u32
 
	mwﬁ
;

278 
u32
 
	mpba
;

280 
boﬁ
 
	mfc_aut⁄eg
;

282 
	mÀd_°©us
;

284 
	mÊags
;

285 
	mœ°_ª£t
;

288 
	sigbvf_öfo
 {

289 
e1000_mac_ty≥
 
	mmac
;

290 
	mÊags
;

291 
u32
 
	mpba
;

292 (*
	möô_›s
)(
	me1000_hw
 *);

293 
s32
 (*
gë_v¨ü¡s
)(
	migbvf_ad≠ãr
 *);

297 
	#IGBVF_FLAG_RX_CSUM_DISABLED
 (1 << 0)

	)

299 
	#IGBVF_RX_DESC_ADV
(
R
, 
i
) \

300 (&((((
R
).
desc
))[
i
].
rx_desc
))

	)

301 
	#IGBVF_TX_DESC_ADV
(
R
, 
i
) \

302 (&((((
R
).
desc
))[
i
].
tx_desc
))

	)

303 
	#IGBVF_TX_CTXTDESC_ADV
(
R
, 
i
) \

304 (&((((
R
).
desc
))[
i
].
tx_c⁄ãxt_desc
))

	)

306 
	eigbvf_°©e_t
 {

307 
	m__IGBVF_TESTING
,

308 
	m__IGBVF_RESETTING
,

309 
	m__IGBVF_DOWN


312 
igbvf_drivî_«me
[];

313 c⁄° 
igbvf_drivî_vîsi⁄
[];

315 
igbvf_check_›ti⁄s
(
igbvf_ad≠ãr
 *);

316 
igbvf_£t_ëhtoﬁ_›s
(
√t_devi˚
 *);

318 
igbvf_up
(
igbvf_ad≠ãr
 *);

319 
igbvf_down
(
igbvf_ad≠ãr
 *);

320 
igbvf_ªöô_locked
(
igbvf_ad≠ãr
 *);

321 
igbvf_£tup_rx_ªsour˚s
(
igbvf_ad≠ãr
 *, 
igbvf_rög
 *);

322 
igbvf_£tup_tx_ªsour˚s
(
igbvf_ad≠ãr
 *, 
igbvf_rög
 *);

323 
igbvf_‰ì_rx_ªsour˚s
(
igbvf_rög
 *);

324 
igbvf_‰ì_tx_ªsour˚s
(
igbvf_rög
 *);

325 
igbvf_upd©e_°©s
(
igbvf_ad≠ãr
 *);

327 
c›ybªak
;

	@igbvf.mod.c

1 
	~<löux/moduÀ.h
>

2 
	~<löux/vîmagic.h
>

3 
	~<löux/compûî.h
>

5 
MODULE_INFO
(
vîmagic
, 
VERMAGIC_STRING
);

7 
moduÀ
 
__this_moduÀ


8 
__©åibuã__
((
£˘i⁄
(".gnu.linkonce.this_module"))) = {

9 .
«me
 = 
KBUILD_MODNAME
,

10 .
	göô
 = 
öô_moduÀ
,

11 #ifde‡
CONFIG_MODULE_UNLOAD


12 .
	gexô
 = 
˛ónup_moduÀ
,

14 .
	g¨ch
 = 
MODULE_ARCH_INIT
,

17 c⁄° 
modvîsi⁄_öfo
 
	g____vîsi⁄s
[]

18 
__u£d


19 
__©åibuã__
((
£˘i⁄
("__versions"))) = {

108 c⁄° 
	g__moduÀ_dïíds
[]

109 
__u£d


110 
__©åibuã__
((
£˘i⁄
(".modinfo"))) =

113 
MODULE_ALIAS
("pci:v00008086d000010CAsv*sd*bc*sc*i*");

114 
MODULE_ALIAS
("pci:v00008086d00001520sv*sd*bc*sc*i*");

116 
MODULE_INFO
(
§cvîsi⁄
, "A11BC3F28EA1EA9D0E4E790");

	@mbx.c

28 
	~"mbx.h
"

36 
s32
 
	$e1000_pﬁl_f‹_msg
(
e1000_hw
 *
hw
)

38 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

39 
cou¡down
 = 
mbx
->
timeout
;

41 i‡(!
mbx
->
›s
.
check_f‹_msg
)

42 
out
;

44 
cou¡down
 && 
mbx
->
›s
.
	`check_f‹_msg
(
hw
)) {

45 
cou¡down
--;

46 
	`udñay
(
mbx
->
u£c_dñay
);

50 i‡(!
cou¡down
)

51 
mbx
->
timeout
 = 0;

52 
out
:

53  
cou¡down
 ? 
E1000_SUCCESS
 : -
E1000_ERR_MBX
;

54 
	}
}

62 
s32
 
	$e1000_pﬁl_f‹_ack
(
e1000_hw
 *
hw
)

64 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

65 
cou¡down
 = 
mbx
->
timeout
;

67 i‡(!
mbx
->
›s
.
check_f‹_ack
)

68 
out
;

70 
cou¡down
 && 
mbx
->
›s
.
	`check_f‹_ack
(
hw
)) {

71 
cou¡down
--;

72 
	`udñay
(
mbx
->
u£c_dñay
);

76 i‡(!
cou¡down
)

77 
mbx
->
timeout
 = 0;

78 
out
:

79  
cou¡down
 ? 
E1000_SUCCESS
 : -
E1000_ERR_MBX
;

80 
	}
}

91 
s32
 
	$e1000_ªad_po°ed_mbx
(
e1000_hw
 *
hw
, 
u32
 *
msg
, 
u16
 
size
)

93 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

94 
s32
 
ªt_vÆ
 = -
E1000_ERR_MBX
;

96 i‡(!
mbx
->
›s
.
ªad
)

97 
out
;

99 
ªt_vÆ
 = 
	`e1000_pﬁl_f‹_msg
(
hw
);

102 i‡(!
ªt_vÆ
)

103 
ªt_vÆ
 = 
mbx
->
›s
.
	`ªad
(
hw
, 
msg
, 
size
);

104 
out
:

105  
ªt_vÆ
;

106 
	}
}

117 
s32
 
	$e1000_wrôe_po°ed_mbx
(
e1000_hw
 *
hw
, 
u32
 *
msg
, 
u16
 
size
)

119 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

120 
s32
 
ªt_vÆ
 = -
E1000_ERR_MBX
;

123 i‡(!
mbx
->
›s
.
wrôe
 || !mbx->
timeout
)

124 
out
;

127 
ªt_vÆ
 = 
mbx
->
›s
.
	`wrôe
(
hw
, 
msg
, 
size
);

130 i‡(!
ªt_vÆ
)

131 
ªt_vÆ
 = 
	`e1000_pﬁl_f‹_ack
(
hw
);

132 
out
:

133  
ªt_vÆ
;

134 
	}
}

143 
u32
 
	$e1000_ªad_v2p_maûbox
(
e1000_hw
 *
hw
)

145 
u32
 
v2p_maûbox
 = 
	`î32
(
	`V2PMAILBOX
(0));

147 
v2p_maûbox
 |
hw
->
dev_•ec
.
vf
.v2p_mailbox;

148 
hw
->
dev_•ec
.
vf
.
v2p_maûbox
 |v2p_maûbox & 
E1000_V2PMAILBOX_R2C_BITS
;

150  
v2p_maûbox
;

151 
	}
}

161 
s32
 
	$e1000_check_f‹_bô_vf
(
e1000_hw
 *
hw
, 
u32
 
mask
)

163 
u32
 
v2p_maûbox
 = 
	`e1000_ªad_v2p_maûbox
(
hw
);

164 
s32
 
ªt_vÆ
 = -
E1000_ERR_MBX
;

166 i‡(
v2p_maûbox
 & 
mask
)

167 
ªt_vÆ
 = 
E1000_SUCCESS
;

169 
hw
->
dev_•ec
.
vf
.
v2p_maûbox
 &~
mask
;

171  
ªt_vÆ
;

172 
	}
}

180 
s32
 
	$e1000_check_f‹_msg_vf
(
e1000_hw
 *
hw
)

182 
s32
 
ªt_vÆ
 = -
E1000_ERR_MBX
;

184 i‡(!
	`e1000_check_f‹_bô_vf
(
hw
, 
E1000_V2PMAILBOX_PFSTS
)) {

185 
ªt_vÆ
 = 
E1000_SUCCESS
;

186 
hw
->
mbx
.
°©s
.
ªqs
++;

189  
ªt_vÆ
;

190 
	}
}

198 
s32
 
	$e1000_check_f‹_ack_vf
(
e1000_hw
 *
hw
)

200 
s32
 
ªt_vÆ
 = -
E1000_ERR_MBX
;

202 i‡(!
	`e1000_check_f‹_bô_vf
(
hw
, 
E1000_V2PMAILBOX_PFACK
)) {

203 
ªt_vÆ
 = 
E1000_SUCCESS
;

204 
hw
->
mbx
.
°©s
.
acks
++;

207  
ªt_vÆ
;

208 
	}
}

216 
s32
 
	$e1000_check_f‹_r°_vf
(
e1000_hw
 *
hw
)

218 
s32
 
ªt_vÆ
 = -
E1000_ERR_MBX
;

220 i‡(!
	`e1000_check_f‹_bô_vf
(
hw
, (
E1000_V2PMAILBOX_RSTD
 |

221 
E1000_V2PMAILBOX_RSTI
))) {

222 
ªt_vÆ
 = 
E1000_SUCCESS
;

223 
hw
->
mbx
.
°©s
.
r°s
++;

226  
ªt_vÆ
;

227 
	}
}

235 
s32
 
	$e1000_obèö_mbx_lock_vf
(
e1000_hw
 *
hw
)

237 
s32
 
ªt_vÆ
 = -
E1000_ERR_MBX
;

240 
	`ew32
(
	`V2PMAILBOX
(0), 
E1000_V2PMAILBOX_VFU
);

243 i‡(
	`e1000_ªad_v2p_maûbox
(
hw
Ë& 
E1000_V2PMAILBOX_VFU
)

244 
ªt_vÆ
 = 
E1000_SUCCESS
;

246  
ªt_vÆ
;

247 
	}
}

257 
s32
 
	$e1000_wrôe_mbx_vf
(
e1000_hw
 *
hw
, 
u32
 *
msg
, 
u16
 
size
)

259 
s32
 
îr
;

260 
u16
 
i
;

263 
îr
 = 
	`e1000_obèö_mbx_lock_vf
(
hw
);

264 i‡(
îr
)

265 
out_no_wrôe
;

268 
	`e1000_check_f‹_ack_vf
(
hw
);

269 
	`e1000_check_f‹_msg_vf
(
hw
);

272 
i
 = 0; i < 
size
; i++)

273 
	`¨øy_ew32
(
	`VMBMEM
(0), 
i
, 
msg
[i]);

276 
hw
->
mbx
.
°©s
.
msgs_tx
++;

279 
	`ew32
(
	`V2PMAILBOX
(0), 
E1000_V2PMAILBOX_REQ
);

281 
out_no_wrôe
:

282  
îr
;

283 
	}
}

293 
s32
 
	$e1000_ªad_mbx_vf
(
e1000_hw
 *
hw
, 
u32
 *
msg
, 
u16
 
size
)

295 
s32
 
îr
;

296 
u16
 
i
;

299 
îr
 = 
	`e1000_obèö_mbx_lock_vf
(
hw
);

300 i‡(
îr
)

301 
out_no_ªad
;

304 
i
 = 0; i < 
size
; i++)

305 
msg
[
i
] = 
	`¨øy_î32
(
	`VMBMEM
(0), i);

308 
	`ew32
(
	`V2PMAILBOX
(0), 
E1000_V2PMAILBOX_ACK
);

311 
hw
->
mbx
.
°©s
.
msgs_rx
++;

313 
out_no_ªad
:

314  
îr
;

315 
	}
}

323 
s32
 
	$e1000_öô_mbx_∑øms_vf
(
e1000_hw
 *
hw
)

325 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

329 
mbx
->
timeout
 = 0;

330 
mbx
->
u£c_dñay
 = 
E1000_VF_MBX_INIT_DELAY
;

332 
mbx
->
size
 = 
E1000_VFMAILBOX_SIZE
;

334 
mbx
->
›s
.
ªad
 = 
e1000_ªad_mbx_vf
;

335 
mbx
->
›s
.
wrôe
 = 
e1000_wrôe_mbx_vf
;

336 
mbx
->
›s
.
ªad_po°ed
 = 
e1000_ªad_po°ed_mbx
;

337 
mbx
->
›s
.
wrôe_po°ed
 = 
e1000_wrôe_po°ed_mbx
;

338 
mbx
->
›s
.
check_f‹_msg
 = 
e1000_check_f‹_msg_vf
;

339 
mbx
->
›s
.
check_f‹_ack
 = 
e1000_check_f‹_ack_vf
;

340 
mbx
->
›s
.
check_f‹_r°
 = 
e1000_check_f‹_r°_vf
;

342 
mbx
->
°©s
.
msgs_tx
 = 0;

343 
mbx
->
°©s
.
msgs_rx
 = 0;

344 
mbx
->
°©s
.
ªqs
 = 0;

345 
mbx
->
°©s
.
acks
 = 0;

346 
mbx
->
°©s
.
r°s
 = 0;

348  
E1000_SUCCESS
;

349 
	}
}

	@mbx.h

28 #i‚de‡
_E1000_MBX_H_


29 
	#_E1000_MBX_H_


	)

31 
	~"vf.h
"

33 
	#E1000_V2PMAILBOX_REQ
 0x00000001

	)

34 
	#E1000_V2PMAILBOX_ACK
 0x00000002

	)

35 
	#E1000_V2PMAILBOX_VFU
 0x00000004

	)

36 
	#E1000_V2PMAILBOX_PFU
 0x00000008

	)

37 
	#E1000_V2PMAILBOX_PFSTS
 0x00000010

	)

38 
	#E1000_V2PMAILBOX_PFACK
 0x00000020

	)

39 
	#E1000_V2PMAILBOX_RSTI
 0x00000040

	)

40 
	#E1000_V2PMAILBOX_RSTD
 0x00000080

	)

41 
	#E1000_V2PMAILBOX_R2C_BITS
 0x000000B0

	)

43 
	#E1000_VFMAILBOX_SIZE
 16

	)

49 
	#E1000_VT_MSGTYPE_ACK
 0x80000000

	)

51 
	#E1000_VT_MSGTYPE_NACK
 0x40000000

	)

53 
	#E1000_VT_MSGTYPE_CTS
 0x20000000

	)

57 
	#E1000_VF_MBX_INIT_TIMEOUT
 2000

	)

58 
	#E1000_VF_MBX_INIT_DELAY
 500

	)

60 
	#E1000_VT_MSGINFO_SHIFT
 16

	)

62 
	#E1000_VT_MSGINFO_MASK
 (0xFF << 
E1000_VT_MSGINFO_SHIFT
)

	)

64 
	#E1000_VF_RESET
 0x01

	)

65 
	#E1000_VF_SET_MAC_ADDR
 0x02

	)

66 
	#E1000_VF_SET_MULTICAST
 0x03

	)

67 
	#E1000_VF_SET_VLAN
 0x04

	)

68 
	#E1000_VF_SET_LPE
 0x05

	)

70 
	#E1000_PF_CONTROL_MSG
 0x0100

	)

72 
e1000_öô_mbx_›s_gíîic
(
e1000_hw
 *
hw
);

73 
s32
 
e1000_öô_mbx_∑øms_vf
(
e1000_hw
 *);

	@netdev.c

28 
	#¥_fmt
(
fmt
Ë
KBUILD_MODNAME
 ": " 
	)
fmt

30 
	~<löux/moduÀ.h
>

31 
	~<löux/ty≥s.h
>

32 
	~<löux/öô.h
>

33 
	~<löux/pci.h
>

34 
	~<löux/vmÆloc.h
>

35 
	~<löux/∑gem≠.h
>

36 
	~<löux/dñay.h
>

37 
	~<löux/√tdevi˚.h
>

38 
	~<löux/t˝.h
>

39 
	~<löux/ùv6.h
>

40 
	~<löux/¶ab.h
>

41 
	~<√t/checksum.h
>

42 
	~<√t/ù6_checksum.h
>

43 
	~<löux/mii.h
>

44 
	~<löux/ëhtoﬁ.h
>

45 
	~<löux/if_vœn.h
>

46 
	~<löux/¥e„tch.h
>

48 
	~"igbvf.h
"

50 
	#DRV_VERSION
 "2.0.1-k"

	)

51 
	gigbvf_drivî_«me
[] = "igbvf";

52 c⁄° 
	gigbvf_drivî_vîsi⁄
[] = 
DRV_VERSION
;

53 c⁄° 
	gigbvf_drivî_°rög
[] =

55 c⁄° 
	gigbvf_c›yright
[] =

58 
	#DEFAULT_MSG_ENABLE
 (
NETIF_MSG_DRV
|
NETIF_MSG_PROBE
|
NETIF_MSG_LINK
)

	)

59 
	gdebug
 = -1;

60 
moduÀ_∑øm
(
debug
, , 0);

61 
MODULE_PARM_DESC
(
debug
, "DebugÜevel (0=none,...,16=all)");

63 
igbvf_pﬁl
(
«pi_°ru˘
 *
«pi
, 
budgë
);

64 
igbvf_ª£t
(
igbvf_ad≠ãr
 *);

65 
igbvf_£t_öãºu±_ˇ∑bûôy
(
igbvf_ad≠ãr
 *);

66 
igbvf_ª£t_öãºu±_ˇ∑bûôy
(
igbvf_ad≠ãr
 *);

68 
igbvf_öfo
 
	gigbvf_vf_öfo
 = {

69 .
mac
 = 
e1000_vÁd≠t
,

70 .
	gÊags
 = 0,

71 .
	gpba
 = 10,

72 .
	göô_›s
 = 
e1000_öô_fun˘i⁄_poöãrs_vf
,

75 
igbvf_öfo
 
	gigbvf_i350_vf_öfo
 = {

76 .
mac
 = 
e1000_vÁd≠t_i350
,

77 .
	gÊags
 = 0,

78 .
	gpba
 = 10,

79 .
	göô_›s
 = 
e1000_öô_fun˘i⁄_poöãrs_vf
,

82 c⁄° 
igbvf_öfo
 *
	gigbvf_öfo_tbl
[] = {

83 [
bﬂrd_vf
] = &
igbvf_vf_öfo
,

84 [
bﬂrd_i350_vf
] = &
igbvf_i350_vf_öfo
,

90 
	$igbvf_desc_unu£d
(
igbvf_rög
 *
rög
)

92 i‡(
rög
->
√xt_to_˛ón
 >Ñög->
√xt_to_u£
)

93  
rög
->
√xt_to_˛ón
 -Ñög->
√xt_to_u£
 - 1;

95  
rög
->
cou¡
 +Ñög->
√xt_to_˛ón
 -Ñög->
√xt_to_u£
 - 1;

96 
	}
}

105 
	$igbvf_ª˚ive_skb
(
igbvf_ad≠ãr
 *
ad≠ãr
,

106 
√t_devi˚
 *
√tdev
,

107 
sk_buff
 *
skb
,

108 
u32
 
°©us
, 
u16
 
vœn
)

110 i‡(
°©us
 & 
E1000_RXD_STAT_VP
) {

111 
u16
 
vid
 = 
	`À16_to_˝u
(
vœn
Ë& 
E1000_RXD_SPC_VLAN_MASK
;

112 i‡(
	`ã°_bô
(
vid
, 
ad≠ãr
->
a˘ive_vœns
))

113 
	`__vœn_hwac˚l_put_èg
(
skb
, 
vid
);

115 
	`√tif_ª˚ive_skb
(
skb
);

116 
	}
}

118 
ölöe
 
	$igbvf_rx_checksum_adv
(
igbvf_ad≠ãr
 *
ad≠ãr
,

119 
u32
 
°©us_îr
, 
sk_buff
 *
skb
)

121 
	`skb_checksum_n⁄e_as£π
(
skb
);

124 i‡((
°©us_îr
 & 
E1000_RXD_STAT_IXSM
) ||

125 (
ad≠ãr
->
Êags
 & 
IGBVF_FLAG_RX_CSUM_DISABLED
))

129 i‡(
°©us_îr
 &

130 (
E1000_RXDEXT_STATERR_TCPE
 | 
E1000_RXDEXT_STATERR_IPE
)) {

132 
ad≠ãr
->
hw_csum_îr
++;

137 i‡(
°©us_îr
 & (
E1000_RXD_STAT_TCPCS
 | 
E1000_RXD_STAT_UDPCS
))

138 
skb
->
ù_summed
 = 
CHECKSUM_UNNECESSARY
;

140 
ad≠ãr
->
hw_csum_good
++;

141 
	}
}

148 
	$igbvf_Æloc_rx_buf„rs
(
igbvf_rög
 *
rx_rög
,

149 
˛ó√d_cou¡
)

151 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
rx_rög
->adapter;

152 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

153 
pci_dev
 *
pdev
 = 
ad≠ãr
->pdev;

154 
e1000_adv_rx_desc
 *
rx_desc
;

155 
igbvf_buf„r
 *
buf„r_öfo
;

156 
sk_buff
 *
skb
;

157 
i
;

158 
bufsz
;

160 
i
 = 
rx_rög
->
√xt_to_u£
;

161 
buf„r_öfo
 = &
rx_rög
->buf„r_öfo[
i
];

163 i‡(
ad≠ãr
->
rx_ps_hdr_size
)

164 
bufsz
 = 
ad≠ãr
->
rx_ps_hdr_size
;

166 
bufsz
 = 
ad≠ãr
->
rx_buf„r_Àn
;

168 
˛ó√d_cou¡
--) {

169 
rx_desc
 = 
	`IGBVF_RX_DESC_ADV
(*
rx_rög
, 
i
);

171 i‡(
ad≠ãr
->
rx_ps_hdr_size
 && !
buf„r_öfo
->
∑ge_dma
) {

172 i‡(!
buf„r_öfo
->
∑ge
) {

173 
buf„r_öfo
->
∑ge
 = 
	`Æloc_∑ge
(
GFP_ATOMIC
);

174 i‡(!
buf„r_öfo
->
∑ge
) {

175 
ad≠ãr
->
Æloc_rx_buff_Áûed
++;

176 
no_buf„rs
;

178 
buf„r_öfo
->
∑ge_off£t
 = 0;

180 
buf„r_öfo
->
∑ge_off£t
 ^
PAGE_SIZE
 / 2;

182 
buf„r_öfo
->
∑ge_dma
 =

183 
	`dma_m≠_∑ge
(&
pdev
->
dev
, 
buf„r_öfo
->
∑ge
,

184 
buf„r_öfo
->
∑ge_off£t
,

185 
PAGE_SIZE
 / 2,

186 
DMA_FROM_DEVICE
);

189 i‡(!
buf„r_öfo
->
skb
) {

190 
skb
 = 
	`√tdev_Æloc_skb_ù_Æign
(
√tdev
, 
bufsz
);

191 i‡(!
skb
) {

192 
ad≠ãr
->
Æloc_rx_buff_Áûed
++;

193 
no_buf„rs
;

196 
buf„r_öfo
->
skb
 = skb;

197 
buf„r_öfo
->
dma
 = 
	`dma_m≠_sögÀ
(&
pdev
->
dev
, 
skb
->
d©a
,

198 
bufsz
,

199 
DMA_FROM_DEVICE
);

203 i‡(
ad≠ãr
->
rx_ps_hdr_size
) {

204 
rx_desc
->
ªad
.
pkt_addr
 =

205 
	`˝u_to_À64
(
buf„r_öfo
->
∑ge_dma
);

206 
rx_desc
->
ªad
.
hdr_addr
 = 
	`˝u_to_À64
(
buf„r_öfo
->
dma
);

208 
rx_desc
->
ªad
.
pkt_addr
 =

209 
	`˝u_to_À64
(
buf„r_öfo
->
dma
);

210 
rx_desc
->
ªad
.
hdr_addr
 = 0;

213 
i
++;

214 i‡(
i
 =
rx_rög
->
cou¡
)

215 
i
 = 0;

216 
buf„r_öfo
 = &
rx_rög
->buf„r_öfo[
i
];

219 
no_buf„rs
:

220 i‡(
rx_rög
->
√xt_to_u£
 !
i
) {

221 
rx_rög
->
√xt_to_u£
 = 
i
;

222 i‡(
i
 == 0)

223 
i
 = (
rx_rög
->
cou¡
 - 1);

225 
i
--;

231 
	`wmb
();

232 
	`wrôñ
(
i
, 
ad≠ãr
->
hw
.
hw_addr
 + 
rx_rög
->
èû
);

234 
	}
}

243 
boﬁ
 
	$igbvf_˛ón_rx_úq
(
igbvf_ad≠ãr
 *
ad≠ãr
,

244 *
w‹k_d⁄e
, 
w‹k_to_do
)

246 
igbvf_rög
 *
rx_rög
 = 
ad≠ãr
->rx_ring;

247 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

248 
pci_dev
 *
pdev
 = 
ad≠ãr
->pdev;

249 
e1000_adv_rx_desc
 *
rx_desc
, *
√xt_rxd
;

250 
igbvf_buf„r
 *
buf„r_öfo
, *
√xt_buf„r
;

251 
sk_buff
 *
skb
;

252 
boﬁ
 
˛ó√d
 = 
Ál£
;

253 
˛ó√d_cou¡
 = 0;

254 
tŸÆ_byãs
 = 0, 
tŸÆ_∑ckës
 = 0;

255 
i
;

256 
u32
 
Àngth
, 
hÀn
, 
°©îr
;

258 
i
 = 
rx_rög
->
√xt_to_˛ón
;

259 
rx_desc
 = 
	`IGBVF_RX_DESC_ADV
(*
rx_rög
, 
i
);

260 
°©îr
 = 
	`À32_to_˝u
(
rx_desc
->
wb
.
uµî
.
°©us_îr‹
);

262 
°©îr
 & 
E1000_RXD_STAT_DD
) {

263 i‡(*
w‹k_d⁄e
 >
w‹k_to_do
)

265 (*
w‹k_d⁄e
)++;

266 
	`rmb
();

268 
buf„r_öfo
 = &
rx_rög
->buf„r_öfo[
i
];

275 
hÀn
 = (
	`À16_to_˝u
(
rx_desc
->
wb
.
lowî
.
lo_dw‹d
.
hs_rss
.
hdr_öfo
) &

276 
E1000_RXDADV_HDRBUFLEN_MASK
Ë>> 
E1000_RXDADV_HDRBUFLEN_SHIFT
;

277 i‡(
hÀn
 > 
ad≠ãr
->
rx_ps_hdr_size
)

278 
hÀn
 = 
ad≠ãr
->
rx_ps_hdr_size
;

280 
Àngth
 = 
	`À16_to_˝u
(
rx_desc
->
wb
.
uµî
.length);

281 
˛ó√d
 = 
åue
;

282 
˛ó√d_cou¡
++;

284 
skb
 = 
buf„r_öfo
->skb;

285 
	`¥e„tch
(
skb
->
d©a
 - 
NET_IP_ALIGN
);

286 
buf„r_öfo
->
skb
 = 
NULL
;

287 i‡(!
ad≠ãr
->
rx_ps_hdr_size
) {

288 
	`dma_unm≠_sögÀ
(&
pdev
->
dev
, 
buf„r_öfo
->
dma
,

289 
ad≠ãr
->
rx_buf„r_Àn
,

290 
DMA_FROM_DEVICE
);

291 
buf„r_öfo
->
dma
 = 0;

292 
	`skb_put
(
skb
, 
Àngth
);

293 
£nd_up
;

296 i‡(!
	`skb_shöfo
(
skb
)->
ƒ_‰ags
) {

297 
	`dma_unm≠_sögÀ
(&
pdev
->
dev
, 
buf„r_öfo
->
dma
,

298 
ad≠ãr
->
rx_ps_hdr_size
,

299 
DMA_FROM_DEVICE
);

300 
	`skb_put
(
skb
, 
hÀn
);

303 i‡(
Àngth
) {

304 
	`dma_unm≠_∑ge
(&
pdev
->
dev
, 
buf„r_öfo
->
∑ge_dma
,

305 
PAGE_SIZE
 / 2,

306 
DMA_FROM_DEVICE
);

307 
buf„r_öfo
->
∑ge_dma
 = 0;

309 
	`skb_fûl_∑ge_desc
(
skb
, 
	`skb_shöfo
(skb)->
ƒ_‰ags
,

310 
buf„r_öfo
->
∑ge
,

311 
buf„r_öfo
->
∑ge_off£t
,

312 
Àngth
);

314 i‡((
ad≠ãr
->
rx_buf„r_Àn
 > (
PAGE_SIZE
 / 2)) ||

315 (
	`∑ge_cou¡
(
buf„r_öfo
->
∑ge
) != 1))

316 
buf„r_öfo
->
∑ge
 = 
NULL
;

318 
	`gë_∑ge
(
buf„r_öfo
->
∑ge
);

320 
skb
->
Àn
 +
Àngth
;

321 
skb
->
d©a_Àn
 +
Àngth
;

322 
skb
->
åuesize
 +
PAGE_SIZE
 / 2;

324 
£nd_up
:

325 
i
++;

326 i‡(
i
 =
rx_rög
->
cou¡
)

327 
i
 = 0;

328 
√xt_rxd
 = 
	`IGBVF_RX_DESC_ADV
(*
rx_rög
, 
i
);

329 
	`¥e„tch
(
√xt_rxd
);

330 
√xt_buf„r
 = &
rx_rög
->
buf„r_öfo
[
i
];

332 i‡(!(
°©îr
 & 
E1000_RXD_STAT_EOP
)) {

333 
buf„r_öfo
->
skb
 = 
√xt_buf„r
->skb;

334 
buf„r_öfo
->
dma
 = 
√xt_buf„r
->dma;

335 
√xt_buf„r
->
skb
 = skb;

336 
√xt_buf„r
->
dma
 = 0;

337 
√xt_desc
;

340 i‡(
°©îr
 & 
E1000_RXDEXT_ERR_FRAME_ERR_MASK
) {

341 
	`dev_k‰ì_skb_úq
(
skb
);

342 
√xt_desc
;

345 
tŸÆ_byãs
 +
skb
->
Àn
;

346 
tŸÆ_∑ckës
++;

348 
	`igbvf_rx_checksum_adv
(
ad≠ãr
, 
°©îr
, 
skb
);

350 
skb
->
¥Ÿocﬁ
 = 
	`ëh_ty≥_å™s
(skb, 
√tdev
);

352 
	`igbvf_ª˚ive_skb
(
ad≠ãr
, 
√tdev
, 
skb
, 
°©îr
,

353 
rx_desc
->
wb
.
uµî
.
vœn
);

355 
√xt_desc
:

356 
rx_desc
->
wb
.
uµî
.
°©us_îr‹
 = 0;

359 i‡(
˛ó√d_cou¡
 >
IGBVF_RX_BUFFER_WRITE
) {

360 
	`igbvf_Æloc_rx_buf„rs
(
rx_rög
, 
˛ó√d_cou¡
);

361 
˛ó√d_cou¡
 = 0;

365 
rx_desc
 = 
√xt_rxd
;

366 
buf„r_öfo
 = 
√xt_buf„r
;

368 
°©îr
 = 
	`À32_to_˝u
(
rx_desc
->
wb
.
uµî
.
°©us_îr‹
);

371 
rx_rög
->
√xt_to_˛ón
 = 
i
;

372 
˛ó√d_cou¡
 = 
	`igbvf_desc_unu£d
(
rx_rög
);

374 i‡(
˛ó√d_cou¡
)

375 
	`igbvf_Æloc_rx_buf„rs
(
rx_rög
, 
˛ó√d_cou¡
);

377 
ad≠ãr
->
tŸÆ_rx_∑ckës
 +
tŸÆ_∑ckës
;

378 
ad≠ãr
->
tŸÆ_rx_byãs
 +
tŸÆ_byãs
;

379 
ad≠ãr
->
√t_°©s
.
rx_byãs
 +
tŸÆ_byãs
;

380 
ad≠ãr
->
√t_°©s
.
rx_∑ckës
 +
tŸÆ_∑ckës
;

381  
˛ó√d
;

382 
	}
}

384 
	$igbvf_put_txbuf
(
igbvf_ad≠ãr
 *
ad≠ãr
,

385 
igbvf_buf„r
 *
buf„r_öfo
)

387 i‡(
buf„r_öfo
->
dma
) {

388 i‡(
buf„r_öfo
->
m≠≥d_as_∑ge
)

389 
	`dma_unm≠_∑ge
(&
ad≠ãr
->
pdev
->
dev
,

390 
buf„r_öfo
->
dma
,

391 
buf„r_öfo
->
Àngth
,

392 
DMA_TO_DEVICE
);

394 
	`dma_unm≠_sögÀ
(&
ad≠ãr
->
pdev
->
dev
,

395 
buf„r_öfo
->
dma
,

396 
buf„r_öfo
->
Àngth
,

397 
DMA_TO_DEVICE
);

398 
buf„r_öfo
->
dma
 = 0;

400 i‡(
buf„r_öfo
->
skb
) {

401 
	`dev_k‰ì_skb_™y
(
buf„r_öfo
->
skb
);

402 
buf„r_öfo
->
skb
 = 
NULL
;

404 
buf„r_öfo
->
time_°amp
 = 0;

405 
	}
}

413 
	$igbvf_£tup_tx_ªsour˚s
(
igbvf_ad≠ãr
 *
ad≠ãr
,

414 
igbvf_rög
 *
tx_rög
)

416 
pci_dev
 *
pdev
 = 
ad≠ãr
->pdev;

417 
size
;

419 
size
 = (
igbvf_buf„r
Ë* 
tx_rög
->
cou¡
;

420 
tx_rög
->
buf„r_öfo
 = 
	`vzÆloc
(
size
);

421 i‡(!
tx_rög
->
buf„r_öfo
)

422 
îr
;

425 
tx_rög
->
size
 =Åx_rög->
cou¡
 * (
e1000_adv_tx_desc
);

426 
tx_rög
->
size
 = 
	`ALIGN
(tx_ring->size, 4096);

428 
tx_rög
->
desc
 = 
	`dma_Æloc_cohîít
(&
pdev
->
dev
,Åx_rög->
size
,

429 &
tx_rög
->
dma
, 
GFP_KERNEL
);

431 i‡(!
tx_rög
->
desc
)

432 
îr
;

434 
tx_rög
->
ad≠ãr
 =ádapter;

435 
tx_rög
->
√xt_to_u£
 = 0;

436 
tx_rög
->
√xt_to_˛ón
 = 0;

439 
îr
:

440 
	`v‰ì
(
tx_rög
->
buf„r_öfo
);

441 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
,

443  -
ENOMEM
;

444 
	}
}

452 
	$igbvf_£tup_rx_ªsour˚s
(
igbvf_ad≠ãr
 *
ad≠ãr
,

453 
igbvf_rög
 *
rx_rög
)

455 
pci_dev
 *
pdev
 = 
ad≠ãr
->pdev;

456 
size
, 
desc_Àn
;

458 
size
 = (
igbvf_buf„r
Ë* 
rx_rög
->
cou¡
;

459 
rx_rög
->
buf„r_öfo
 = 
	`vzÆloc
(
size
);

460 i‡(!
rx_rög
->
buf„r_öfo
)

461 
îr
;

463 
desc_Àn
 = (
e1000_adv_rx_desc
);

466 
rx_rög
->
size
 =Ñx_rög->
cou¡
 * 
desc_Àn
;

467 
rx_rög
->
size
 = 
	`ALIGN
(rx_ring->size, 4096);

469 
rx_rög
->
desc
 = 
	`dma_Æloc_cohîít
(&
pdev
->
dev
,Ñx_rög->
size
,

470 &
rx_rög
->
dma
, 
GFP_KERNEL
);

472 i‡(!
rx_rög
->
desc
)

473 
îr
;

475 
rx_rög
->
√xt_to_˛ón
 = 0;

476 
rx_rög
->
√xt_to_u£
 = 0;

478 
rx_rög
->
ad≠ãr
 =ádapter;

482 
îr
:

483 
	`v‰ì
(
rx_rög
->
buf„r_öfo
);

484 
rx_rög
->
buf„r_öfo
 = 
NULL
;

485 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
,

487  -
ENOMEM
;

488 
	}
}

494 
	$igbvf_˛ón_tx_rög
(
igbvf_rög
 *
tx_rög
)

496 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
tx_rög
->adapter;

497 
igbvf_buf„r
 *
buf„r_öfo
;

498 
size
;

499 
i
;

501 i‡(!
tx_rög
->
buf„r_öfo
)

505 
i
 = 0; i < 
tx_rög
->
cou¡
; i++) {

506 
buf„r_öfo
 = &
tx_rög
->buf„r_öfo[
i
];

507 
	`igbvf_put_txbuf
(
ad≠ãr
, 
buf„r_öfo
);

510 
size
 = (
igbvf_buf„r
Ë* 
tx_rög
->
cou¡
;

511 
	`mem£t
(
tx_rög
->
buf„r_öfo
, 0, 
size
);

514 
	`mem£t
(
tx_rög
->
desc
, 0,Åx_rög->
size
);

516 
tx_rög
->
√xt_to_u£
 = 0;

517 
tx_rög
->
√xt_to_˛ón
 = 0;

519 
	`wrôñ
(0, 
ad≠ãr
->
hw
.
hw_addr
 + 
tx_rög
->
hód
);

520 
	`wrôñ
(0, 
ad≠ãr
->
hw
.
hw_addr
 + 
tx_rög
->
èû
);

521 
	}
}

529 
	$igbvf_‰ì_tx_ªsour˚s
(
igbvf_rög
 *
tx_rög
)

531 
pci_dev
 *
pdev
 = 
tx_rög
->
ad≠ãr
->pdev;

533 
	`igbvf_˛ón_tx_rög
(
tx_rög
);

535 
	`v‰ì
(
tx_rög
->
buf„r_öfo
);

536 
tx_rög
->
buf„r_öfo
 = 
NULL
;

538 
	`dma_‰ì_cohîít
(&
pdev
->
dev
, 
tx_rög
->
size
,Åx_rög->
desc
,

539 
tx_rög
->
dma
);

541 
tx_rög
->
desc
 = 
NULL
;

542 
	}
}

548 
	$igbvf_˛ón_rx_rög
(
igbvf_rög
 *
rx_rög
)

550 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
rx_rög
->adapter;

551 
igbvf_buf„r
 *
buf„r_öfo
;

552 
pci_dev
 *
pdev
 = 
ad≠ãr
->pdev;

553 
size
;

554 
i
;

556 i‡(!
rx_rög
->
buf„r_öfo
)

560 
i
 = 0; i < 
rx_rög
->
cou¡
; i++) {

561 
buf„r_öfo
 = &
rx_rög
->buf„r_öfo[
i
];

562 i‡(
buf„r_öfo
->
dma
) {

563 i‡(
ad≠ãr
->
rx_ps_hdr_size
){

564 
	`dma_unm≠_sögÀ
(&
pdev
->
dev
, 
buf„r_öfo
->
dma
,

565 
ad≠ãr
->
rx_ps_hdr_size
,

566 
DMA_FROM_DEVICE
);

568 
	`dma_unm≠_sögÀ
(&
pdev
->
dev
, 
buf„r_öfo
->
dma
,

569 
ad≠ãr
->
rx_buf„r_Àn
,

570 
DMA_FROM_DEVICE
);

572 
buf„r_öfo
->
dma
 = 0;

575 i‡(
buf„r_öfo
->
skb
) {

576 
	`dev_k‰ì_skb
(
buf„r_öfo
->
skb
);

577 
buf„r_öfo
->
skb
 = 
NULL
;

580 i‡(
buf„r_öfo
->
∑ge
) {

581 i‡(
buf„r_öfo
->
∑ge_dma
)

582 
	`dma_unm≠_∑ge
(&
pdev
->
dev
,

583 
buf„r_öfo
->
∑ge_dma
,

584 
PAGE_SIZE
 / 2,

585 
DMA_FROM_DEVICE
);

586 
	`put_∑ge
(
buf„r_öfo
->
∑ge
);

587 
buf„r_öfo
->
∑ge
 = 
NULL
;

588 
buf„r_öfo
->
∑ge_dma
 = 0;

589 
buf„r_öfo
->
∑ge_off£t
 = 0;

593 
size
 = (
igbvf_buf„r
Ë* 
rx_rög
->
cou¡
;

594 
	`mem£t
(
rx_rög
->
buf„r_öfo
, 0, 
size
);

597 
	`mem£t
(
rx_rög
->
desc
, 0,Ñx_rög->
size
);

599 
rx_rög
->
√xt_to_˛ón
 = 0;

600 
rx_rög
->
√xt_to_u£
 = 0;

602 
	`wrôñ
(0, 
ad≠ãr
->
hw
.
hw_addr
 + 
rx_rög
->
hód
);

603 
	`wrôñ
(0, 
ad≠ãr
->
hw
.
hw_addr
 + 
rx_rög
->
èû
);

604 
	}
}

613 
	$igbvf_‰ì_rx_ªsour˚s
(
igbvf_rög
 *
rx_rög
)

615 
pci_dev
 *
pdev
 = 
rx_rög
->
ad≠ãr
->pdev;

617 
	`igbvf_˛ón_rx_rög
(
rx_rög
);

619 
	`v‰ì
(
rx_rög
->
buf„r_öfo
);

620 
rx_rög
->
buf„r_öfo
 = 
NULL
;

622 
	`dma_‰ì_cohîít
(&
pdev
->
dev
, 
rx_rög
->
size
,Ñx_rög->
desc
,

623 
rx_rög
->
dma
);

624 
rx_rög
->
desc
 = 
NULL
;

625 
	}
}

642 
œãncy_ønge
 
	$igbvf_upd©e_ôr
(
igbvf_ad≠ãr
 *
ad≠ãr
,

643 
œãncy_ønge
 
ôr_£âög
,

644 
∑ckës
, 
byãs
)

646 
œãncy_ønge
 
ªtvÆ
 = 
ôr_£âög
;

648 i‡(
∑ckës
 == 0)

649 
upd©e_ôr_d⁄e
;

651 
ôr_£âög
) {

652 
lowe°_œãncy
:

654 i‡(
byãs
/
∑ckës
 > 8000)

655 
ªtvÆ
 = 
bulk_œãncy
;

656 i‡((
∑ckës
 < 5Ë&& (
byãs
 > 512))

657 
ªtvÆ
 = 
low_œãncy
;

659 
low_œãncy
:

660 i‡(
byãs
 > 10000) {

662 i‡(
byãs
/
∑ckës
 > 8000)

663 
ªtvÆ
 = 
bulk_œãncy
;

664 i‡((
∑ckës
 < 10Ë|| ((
byãs
/packets) > 1200))

665 
ªtvÆ
 = 
bulk_œãncy
;

666 i‡((
∑ckës
 > 35))

667 
ªtvÆ
 = 
lowe°_œãncy
;

668 } i‡(
byãs
/
∑ckës
 > 2000) {

669 
ªtvÆ
 = 
bulk_œãncy
;

670 } i‡(
∑ckës
 <2 && 
byãs
 < 512) {

671 
ªtvÆ
 = 
lowe°_œãncy
;

674 
bulk_œãncy
:

675 i‡(
byãs
 > 25000) {

676 i‡(
∑ckës
 > 35)

677 
ªtvÆ
 = 
low_œãncy
;

678 } i‡(
byãs
 < 6000) {

679 
ªtvÆ
 = 
low_œãncy
;

686 
upd©e_ôr_d⁄e
:

687  
ªtvÆ
;

688 
	}
}

690 
	$igbvf_ønge_to_ôr
(
œãncy_ønge
 
cuºít_ønge
)

692 
√w_ôr
;

694 
cuºít_ønge
) {

696 
lowe°_œãncy
:

697 
√w_ôr
 = 
IGBVF_70K_ITR
;

699 
low_œãncy
:

700 
√w_ôr
 = 
IGBVF_20K_ITR
;

702 
bulk_œãncy
:

703 
√w_ôr
 = 
IGBVF_4K_ITR
;

706 
√w_ôr
 = 
IGBVF_START_ITR
;

709  
√w_ôr
;

710 
	}
}

712 
	$igbvf_£t_ôr
(
igbvf_ad≠ãr
 *
ad≠ãr
)

714 
u32
 
√w_ôr
;

716 
ad≠ãr
->
tx_rög
->
ôr_ønge
 =

717 
	`igbvf_upd©e_ôr
(
ad≠ãr
,

718 
ad≠ãr
->
tx_rög
->
ôr_vÆ
,

719 
ad≠ãr
->
tŸÆ_tx_∑ckës
,

720 
ad≠ãr
->
tŸÆ_tx_byãs
);

723 i‡(
ad≠ãr
->
ªque°ed_ôr
 == 3 &&

724 
ad≠ãr
->
tx_rög
->
ôr_ønge
 =
lowe°_œãncy
)

725 
ad≠ãr
->
tx_rög
->
ôr_ønge
 = 
low_œãncy
;

727 
√w_ôr
 = 
	`igbvf_ønge_to_ôr
(
ad≠ãr
->
tx_rög
->
ôr_ønge
);

730 i‡(
√w_ôr
 !
ad≠ãr
->
tx_rög
->
ôr_vÆ
) {

731 
u32
 
cuºít_ôr
 = 
ad≠ãr
->
tx_rög
->
ôr_vÆ
;

737 
√w_ôr
 =Çew_ô∏> 
cuºít_ôr
 ?

738 
	`mö
(
cuºít_ôr
 + (
√w_ôr
 >> 2),Çew_itr) :

739 
√w_ôr
;

740 
ad≠ãr
->
tx_rög
->
ôr_vÆ
 = 
√w_ôr
;

742 
ad≠ãr
->
tx_rög
->
£t_ôr
 = 1;

745 
ad≠ãr
->
rx_rög
->
ôr_ønge
 =

746 
	`igbvf_upd©e_ôr
(
ad≠ãr
,ád≠ãr->
rx_rög
->
ôr_vÆ
,

747 
ad≠ãr
->
tŸÆ_rx_∑ckës
,

748 
ad≠ãr
->
tŸÆ_rx_byãs
);

749 i‡(
ad≠ãr
->
ªque°ed_ôr
 == 3 &&

750 
ad≠ãr
->
rx_rög
->
ôr_ønge
 =
lowe°_œãncy
)

751 
ad≠ãr
->
rx_rög
->
ôr_ønge
 = 
low_œãncy
;

753 
√w_ôr
 = 
	`igbvf_ønge_to_ôr
(
ad≠ãr
->
rx_rög
->
ôr_ønge
);

755 i‡(
√w_ôr
 !
ad≠ãr
->
rx_rög
->
ôr_vÆ
) {

756 
u32
 
cuºít_ôr
 = 
ad≠ãr
->
rx_rög
->
ôr_vÆ
;

757 
√w_ôr
 =Çew_ô∏> 
cuºít_ôr
 ?

758 
	`mö
(
cuºít_ôr
 + (
√w_ôr
 >> 2),Çew_itr) :

759 
√w_ôr
;

760 
ad≠ãr
->
rx_rög
->
ôr_vÆ
 = 
√w_ôr
;

762 
ad≠ãr
->
rx_rög
->
£t_ôr
 = 1;

764 
	}
}

771 
boﬁ
 
	$igbvf_˛ón_tx_úq
(
igbvf_rög
 *
tx_rög
)

773 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
tx_rög
->adapter;

774 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

775 
igbvf_buf„r
 *
buf„r_öfo
;

776 
sk_buff
 *
skb
;

777 
e1000_adv_tx_desc
 *
tx_desc
, *
e›_desc
;

778 
tŸÆ_byãs
 = 0, 
tŸÆ_∑ckës
 = 0;

779 
i
, 
e›
, 
cou¡
 = 0;

780 
boﬁ
 
˛ó√d
 = 
Ál£
;

782 
i
 = 
tx_rög
->
√xt_to_˛ón
;

783 
e›
 = 
tx_rög
->
buf„r_öfo
[
i
].
√xt_to_w©ch
;

784 
e›_desc
 = 
	`IGBVF_TX_DESC_ADV
(*
tx_rög
, 
e›
);

786 (
e›_desc
->
wb
.
°©us
 & 
	`˝u_to_À32
(
E1000_TXD_STAT_DD
)) &&

787 (
cou¡
 < 
tx_rög
->count)) {

788 
	`rmb
();

789 
˛ó√d
 = 
Ál£
; !˛ó√d; 
cou¡
++) {

790 
tx_desc
 = 
	`IGBVF_TX_DESC_ADV
(*
tx_rög
, 
i
);

791 
buf„r_öfo
 = &
tx_rög
->buf„r_öfo[
i
];

792 
˛ó√d
 = (
i
 =
e›
);

793 
skb
 = 
buf„r_öfo
->skb;

795 i‡(
skb
) {

796 
£gs
, 
byãcou¡
;

799 
£gs
 = 
	`skb_shöfo
(
skb
)->
gso_£gs
 ?: 1;

801 
byãcou¡
 = ((
£gs
 - 1Ë* 
	`skb_hódÀn
(
skb
)) +

802 
skb
->
Àn
;

803 
tŸÆ_∑ckës
 +
£gs
;

804 
tŸÆ_byãs
 +
byãcou¡
;

807 
	`igbvf_put_txbuf
(
ad≠ãr
, 
buf„r_öfo
);

808 
tx_desc
->
wb
.
°©us
 = 0;

810 
i
++;

811 i‡(
i
 =
tx_rög
->
cou¡
)

812 
i
 = 0;

814 
e›
 = 
tx_rög
->
buf„r_öfo
[
i
].
√xt_to_w©ch
;

815 
e›_desc
 = 
	`IGBVF_TX_DESC_ADV
(*
tx_rög
, 
e›
);

818 
tx_rög
->
√xt_to_˛ón
 = 
i
;

820 i‡(
	`u∆ikñy
(
cou¡
 &&

821 
	`√tif_ˇºõr_ok
(
√tdev
) &&

822 
	`igbvf_desc_unu£d
(
tx_rög
Ë>
IGBVF_TX_QUEUE_WAKE
)) {

826 
	`smp_mb
();

827 i‡(
	`√tif_queue_°›≥d
(
√tdev
) &&

828 !(
	`ã°_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
))) {

829 
	`√tif_wake_queue
(
√tdev
);

830 ++
ad≠ãr
->
ª°¨t_queue
;

834 
ad≠ãr
->
√t_°©s
.
tx_byãs
 +
tŸÆ_byãs
;

835 
ad≠ãr
->
√t_°©s
.
tx_∑ckës
 +
tŸÆ_∑ckës
;

836  
cou¡
 < 
tx_rög
->count;

837 
	}
}

839 
úqªtu∫_t
 
	$igbvf_msix_Ÿhî
(
úq
, *
d©a
)

841 
√t_devi˚
 *
√tdev
 = 
d©a
;

842 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

843 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

845 
ad≠ãr
->
öt_cou¡î1
++;

847 
	`√tif_ˇºõr_off
(
√tdev
);

848 
hw
->
mac
.
gë_lök_°©us
 = 1;

849 i‡(!
	`ã°_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
))

850 
	`mod_timî
(&
ad≠ãr
->
w©chdog_timî
, 
jiffõs
 + 1);

852 
	`ew32
(
EIMS
, 
ad≠ãr
->
eims_Ÿhî
);

854  
IRQ_HANDLED
;

855 
	}
}

857 
úqªtu∫_t
 
	$igbvf_öå_msix_tx
(
úq
, *
d©a
)

859 
√t_devi˚
 *
√tdev
 = 
d©a
;

860 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

861 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

862 
igbvf_rög
 *
tx_rög
 = 
ad≠ãr
->tx_ring;

864 i‡(
tx_rög
->
£t_ôr
) {

865 
	`wrôñ
(
tx_rög
->
ôr_vÆ
,

866 
ad≠ãr
->
hw
.
hw_addr
 + 
tx_rög
->
ôr_ªgi°î
);

867 
ad≠ãr
->
tx_rög
->
£t_ôr
 = 0;

870 
ad≠ãr
->
tŸÆ_tx_byãs
 = 0;

871 
ad≠ãr
->
tŸÆ_tx_∑ckës
 = 0;

875 i‡(!
	`igbvf_˛ón_tx_úq
(
tx_rög
))

877 
	`ew32
(
EICS
, 
tx_rög
->
eims_vÆue
);

879 
	`ew32
(
EIMS
, 
tx_rög
->
eims_vÆue
);

881  
IRQ_HANDLED
;

882 
	}
}

884 
úqªtu∫_t
 
	$igbvf_öå_msix_rx
(
úq
, *
d©a
)

886 
√t_devi˚
 *
√tdev
 = 
d©a
;

887 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

889 
ad≠ãr
->
öt_cou¡î0
++;

894 i‡(
ad≠ãr
->
rx_rög
->
£t_ôr
) {

895 
	`wrôñ
(
ad≠ãr
->
rx_rög
->
ôr_vÆ
,

896 
ad≠ãr
->
hw
.
hw_addr
 +ád≠ãr->
rx_rög
->
ôr_ªgi°î
);

897 
ad≠ãr
->
rx_rög
->
£t_ôr
 = 0;

900 i‡(
	`«pi_scheduÀ_¥ï
(&
ad≠ãr
->
rx_rög
->
«pi
)) {

901 
ad≠ãr
->
tŸÆ_rx_byãs
 = 0;

902 
ad≠ãr
->
tŸÆ_rx_∑ckës
 = 0;

903 
	`__«pi_scheduÀ
(&
ad≠ãr
->
rx_rög
->
«pi
);

906  
IRQ_HANDLED
;

907 
	}
}

909 
	#IGBVF_NO_QUEUE
 -1

	)

911 
	$igbvf_assign_ve˘‹
(
igbvf_ad≠ãr
 *
ad≠ãr
, 
rx_queue
,

912 
tx_queue
, 
msix_ve˘‹
)

914 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

915 
u32
 
iv¨
, 
ödex
;

921 i‡(
rx_queue
 > 
IGBVF_NO_QUEUE
) {

922 
ödex
 = (
rx_queue
 >> 1);

923 
iv¨
 = 
	`¨øy_î32
(
IVAR0
, 
ödex
);

924 i‡(
rx_queue
 & 0x1) {

926 
iv¨
 = ivar & 0xFF00FFFF;

927 
iv¨
 |(
msix_ve˘‹
 | 
E1000_IVAR_VALID
) << 16;

930 
iv¨
 = ivar & 0xFFFFFF00;

931 
iv¨
 |
msix_ve˘‹
 | 
E1000_IVAR_VALID
;

933 
ad≠ãr
->
rx_rög
[
rx_queue
].
eims_vÆue
 = 1 << 
msix_ve˘‹
;

934 
	`¨øy_ew32
(
IVAR0
, 
ödex
, 
iv¨
);

936 i‡(
tx_queue
 > 
IGBVF_NO_QUEUE
) {

937 
ödex
 = (
tx_queue
 >> 1);

938 
iv¨
 = 
	`¨øy_î32
(
IVAR0
, 
ödex
);

939 i‡(
tx_queue
 & 0x1) {

941 
iv¨
 = ivar & 0x00FFFFFF;

942 
iv¨
 |(
msix_ve˘‹
 | 
E1000_IVAR_VALID
) << 24;

945 
iv¨
 = ivar & 0xFFFF00FF;

946 
iv¨
 |(
msix_ve˘‹
 | 
E1000_IVAR_VALID
) << 8;

948 
ad≠ãr
->
tx_rög
[
tx_queue
].
eims_vÆue
 = 1 << 
msix_ve˘‹
;

949 
	`¨øy_ew32
(
IVAR0
, 
ödex
, 
iv¨
);

951 
	}
}

959 
	$igbvf_c⁄figuª_msix
(
igbvf_ad≠ãr
 *
ad≠ãr
)

961 
u32
 
tmp
;

962 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

963 
igbvf_rög
 *
tx_rög
 = 
ad≠ãr
->tx_ring;

964 
igbvf_rög
 *
rx_rög
 = 
ad≠ãr
->rx_ring;

965 
ve˘‹
 = 0;

967 
ad≠ãr
->
eims_íabÀ_mask
 = 0;

969 
	`igbvf_assign_ve˘‹
(
ad≠ãr
, 
IGBVF_NO_QUEUE
, 0, 
ve˘‹
++);

970 
ad≠ãr
->
eims_íabÀ_mask
 |
tx_rög
->
eims_vÆue
;

971 
	`wrôñ
(
tx_rög
->
ôr_vÆ
, 
hw
->
hw_addr
 +Åx_rög->
ôr_ªgi°î
);

972 
	`igbvf_assign_ve˘‹
(
ad≠ãr
, 0, 
IGBVF_NO_QUEUE
, 
ve˘‹
++);

973 
ad≠ãr
->
eims_íabÀ_mask
 |
rx_rög
->
eims_vÆue
;

974 
	`wrôñ
(
rx_rög
->
ôr_vÆ
, 
hw
->
hw_addr
 +Ñx_rög->
ôr_ªgi°î
);

978 
tmp
 = (
ve˘‹
++ | 
E1000_IVAR_VALID
);

980 
	`ew32
(
IVAR_MISC
, 
tmp
);

982 
ad≠ãr
->
eims_íabÀ_mask
 = (1 << (
ve˘‹
)) - 1;

983 
ad≠ãr
->
eims_Ÿhî
 = 1 << (
ve˘‹
 - 1);

984 
	`e1e_Êush
();

985 
	}
}

987 
	$igbvf_ª£t_öãºu±_ˇ∑bûôy
(
igbvf_ad≠ãr
 *
ad≠ãr
)

989 i‡(
ad≠ãr
->
msix_íåõs
) {

990 
	`pci_dißbÀ_msix
(
ad≠ãr
->
pdev
);

991 
	`k‰ì
(
ad≠ãr
->
msix_íåõs
);

992 
ad≠ãr
->
msix_íåõs
 = 
NULL
;

994 
	}
}

1002 
	$igbvf_£t_öãºu±_ˇ∑bûôy
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1004 
îr
 = -
ENOMEM
;

1005 
i
;

1008 
ad≠ãr
->
msix_íåõs
 = 
	`kˇŒoc
(3, (
msix_íåy
),

1009 
GFP_KERNEL
);

1010 i‡(
ad≠ãr
->
msix_íåõs
) {

1011 
i
 = 0; i < 3; i++)

1012 
ad≠ãr
->
msix_íåõs
[
i
].
íåy
 = i;

1014 
îr
 = 
	`pci_íabÀ_msix
(
ad≠ãr
->
pdev
,

1015 
ad≠ãr
->
msix_íåõs
, 3);

1018 i‡(
îr
) {

1020 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
,

1022 
	`igbvf_ª£t_öãºu±_ˇ∑bûôy
(
ad≠ãr
);

1024 
	}
}

1032 
	$igbvf_ªque°_msix
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1034 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

1035 
îr
 = 0, 
ve˘‹
 = 0;

1037 i‡(
	`°æí
(
√tdev
->
«me
Ë< (
IFNAMSIZ
 - 5)) {

1038 
	`•rötf
(
ad≠ãr
->
tx_rög
->
«me
, "%s-tx-0", 
√tdev
->name);

1039 
	`•rötf
(
ad≠ãr
->
rx_rög
->
«me
, "%s-rx-0", 
√tdev
->name);

1041 
	`mem˝y
(
ad≠ãr
->
tx_rög
->
«me
, 
√tdev
->«me, 
IFNAMSIZ
);

1042 
	`mem˝y
(
ad≠ãr
->
rx_rög
->
«me
, 
√tdev
->«me, 
IFNAMSIZ
);

1045 
îr
 = 
	`ªque°_úq
(
ad≠ãr
->
msix_íåõs
[
ve˘‹
].vector,

1046 
igbvf_öå_msix_tx
, 0, 
ad≠ãr
->
tx_rög
->
«me
,

1047 
√tdev
);

1048 i‡(
îr
)

1049 
out
;

1051 
ad≠ãr
->
tx_rög
->
ôr_ªgi°î
 = 
	`E1000_EITR
(
ve˘‹
);

1052 
ad≠ãr
->
tx_rög
->
ôr_vÆ
 =ád≠ãr->
cuºít_ôr
;

1053 
ve˘‹
++;

1055 
îr
 = 
	`ªque°_úq
(
ad≠ãr
->
msix_íåõs
[
ve˘‹
].vector,

1056 
igbvf_öå_msix_rx
, 0, 
ad≠ãr
->
rx_rög
->
«me
,

1057 
√tdev
);

1058 i‡(
îr
)

1059 
out
;

1061 
ad≠ãr
->
rx_rög
->
ôr_ªgi°î
 = 
	`E1000_EITR
(
ve˘‹
);

1062 
ad≠ãr
->
rx_rög
->
ôr_vÆ
 =ád≠ãr->
cuºít_ôr
;

1063 
ve˘‹
++;

1065 
îr
 = 
	`ªque°_úq
(
ad≠ãr
->
msix_íåõs
[
ve˘‹
].vector,

1066 
igbvf_msix_Ÿhî
, 0, 
√tdev
->
«me
,Çetdev);

1067 i‡(
îr
)

1068 
out
;

1070 
	`igbvf_c⁄figuª_msix
(
ad≠ãr
);

1072 
out
:

1073  
îr
;

1074 
	}
}

1080 
__devöô
 
	$igbvf_Æloc_queues
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1082 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

1084 
ad≠ãr
->
tx_rög
 = 
	`kzÆloc
((
igbvf_rög
), 
GFP_KERNEL
);

1085 i‡(!
ad≠ãr
->
tx_rög
)

1086  -
ENOMEM
;

1088 
ad≠ãr
->
rx_rög
 = 
	`kzÆloc
((
igbvf_rög
), 
GFP_KERNEL
);

1089 i‡(!
ad≠ãr
->
rx_rög
) {

1090 
	`k‰ì
(
ad≠ãr
->
tx_rög
);

1091  -
ENOMEM
;

1094 
	`√tif_«pi_add
(
√tdev
, &
ad≠ãr
->
rx_rög
->
«pi
, 
igbvf_pﬁl
, 64);

1097 
	}
}

1105 
	$igbvf_ªque°_úq
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1107 
îr
 = -1;

1110 i‡(
ad≠ãr
->
msix_íåõs
)

1111 
îr
 = 
	`igbvf_ªque°_msix
(
ad≠ãr
);

1113 i‡(!
îr
)

1114  
îr
;

1116 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
,

1117 "U«bÀÅÿÆloˇã i¡îru±, Eº‹: %d\n", 
îr
);

1119  
îr
;

1120 
	}
}

1122 
	$igbvf_‰ì_úq
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1124 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

1125 
ve˘‹
;

1127 i‡(
ad≠ãr
->
msix_íåõs
) {

1128 
ve˘‹
 = 0; vector < 3; vector++)

1129 
	`‰ì_úq
(
ad≠ãr
->
msix_íåõs
[
ve˘‹
].ve˘‹, 
√tdev
);

1131 
	}
}

1136 
	$igbvf_úq_dißbÀ
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1138 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1140 
	`ew32
(
EIMC
, ~0);

1142 i‡(
ad≠ãr
->
msix_íåõs
)

1143 
	`ew32
(
EIAC
, 0);

1144 
	}
}

1149 
	$igbvf_úq_íabÀ
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1151 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1153 
	`ew32
(
EIAC
, 
ad≠ãr
->
eims_íabÀ_mask
);

1154 
	`ew32
(
EIAM
, 
ad≠ãr
->
eims_íabÀ_mask
);

1155 
	`ew32
(
EIMS
, 
ad≠ãr
->
eims_íabÀ_mask
);

1156 
	}
}

1163 
	$igbvf_pﬁl
(
«pi_°ru˘
 *
«pi
, 
budgë
)

1165 
igbvf_rög
 *
rx_rög
 = 
	`c⁄èöî_of
(
«pi
, igbvf_ring,Çapi);

1166 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
rx_rög
->adapter;

1167 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1168 
w‹k_d⁄e
 = 0;

1170 
	`igbvf_˛ón_rx_úq
(
ad≠ãr
, &
w‹k_d⁄e
, 
budgë
);

1173 i‡(
w‹k_d⁄e
 < 
budgë
) {

1174 
	`«pi_com∂ëe
(
«pi
);

1176 i‡(
ad≠ãr
->
ªque°ed_ôr
 & 3)

1177 
	`igbvf_£t_ôr
(
ad≠ãr
);

1179 i‡(!
	`ã°_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
))

1180 
	`ew32
(
EIMS
, 
ad≠ãr
->
rx_rög
->
eims_vÆue
);

1183  
w‹k_d⁄e
;

1184 
	}
}

1192 
	$igbvf_£t_æpml
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1194 
max_‰ame_size
;

1195 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1197 
max_‰ame_size
 = 
ad≠ãr
->max_‰ame_sizê+ 
VLAN_TAG_SIZE
;

1198 
	`e1000_æpml_£t_vf
(
hw
, 
max_‰ame_size
);

1199 
	}
}

1201 
	$igbvf_vœn_rx_add_vid
(
√t_devi˚
 *
√tdev
, 
u16
 
vid
)

1203 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

1204 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1206 i‡(
hw
->
mac
.
›s
.
	`£t_v·a
(hw, 
vid
, 
åue
)) {

1207 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
, "FaûedÅÿadd vœ¿id %d\n", 
vid
);

1208  -
EINVAL
;

1210 
	`£t_bô
(
vid
, 
ad≠ãr
->
a˘ive_vœns
);

1212 
	}
}

1214 
	$igbvf_vœn_rx_kûl_vid
(
√t_devi˚
 *
√tdev
, 
u16
 
vid
)

1216 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

1217 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1219 i‡(
hw
->
mac
.
›s
.
	`£t_v·a
(hw, 
vid
, 
Ál£
)) {

1220 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
,

1221 "FaûedÅÿªmovêvœ¿id %d\n", 
vid
);

1222  -
EINVAL
;

1224 
	`˛ór_bô
(
vid
, 
ad≠ãr
->
a˘ive_vœns
);

1226 
	}
}

1228 
	$igbvf_ª°‹e_vœn
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1230 
u16
 
vid
;

1232 
	`f‹_óch_£t_bô
(
vid
, 
ad≠ãr
->
a˘ive_vœns
, 
VLAN_N_VID
)

1233 
	`igbvf_vœn_rx_add_vid
(
ad≠ãr
->
√tdev
, 
vid
);

1234 
	}
}

1242 
	$igbvf_c⁄figuª_tx
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1244 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1245 
igbvf_rög
 *
tx_rög
 = 
ad≠ãr
->tx_ring;

1246 
u64
 
tdba
;

1247 
u32
 
txd˘l
, 
dˇ_tx˘æ
;

1250 
txd˘l
 = 
	`î32
(
	`TXDCTL
(0));

1251 
	`ew32
(
	`TXDCTL
(0), 
txd˘l
 & ~
E1000_TXDCTL_QUEUE_ENABLE
);

1252 
	`e1e_Êush
();

1253 
	`m¶ìp
(10);

1256 
	`ew32
(
	`TDLEN
(0), 
tx_rög
->
cou¡
 * (
e1000_adv_tx_desc
));

1257 
tdba
 = 
tx_rög
->
dma
;

1258 
	`ew32
(
	`TDBAL
(0), (
tdba
 & 
	`DMA_BIT_MASK
(32)));

1259 
	`ew32
(
	`TDBAH
(0), (
tdba
 >> 32));

1260 
	`ew32
(
	`TDH
(0), 0);

1261 
	`ew32
(
	`TDT
(0), 0);

1262 
tx_rög
->
hód
 = 
	`E1000_TDH
(0);

1263 
tx_rög
->
èû
 = 
	`E1000_TDT
(0);

1269 
dˇ_tx˘æ
 = 
	`î32
(
	`DCA_TXCTRL
(0));

1270 
dˇ_tx˘æ
 &~
E1000_DCA_TXCTRL_TX_WB_RO_EN
;

1271 
	`ew32
(
	`DCA_TXCTRL
(0), 
dˇ_tx˘æ
);

1274 
txd˘l
 |
E1000_TXDCTL_QUEUE_ENABLE
;

1275 
	`ew32
(
	`TXDCTL
(0), 
txd˘l
);

1278 
ad≠ãr
->
txd_cmd
 = 
E1000_ADVTXD_DCMD_EOP
 | 
E1000_ADVTXD_DCMD_IFCS
;

1281 
ad≠ãr
->
txd_cmd
 |
E1000_ADVTXD_DCMD_RS
;

1282 
	}
}

1288 
	$igbvf_£tup_§r˘l
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1290 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1291 
u32
 
§r˘l
 = 0;

1293 
§r˘l
 &~(
E1000_SRRCTL_DESCTYPE_MASK
 |

1294 
E1000_SRRCTL_BSIZEHDR_MASK
 |

1295 
E1000_SRRCTL_BSIZEPKT_MASK
);

1298 
§r˘l
 |
E1000_SRRCTL_DROP_EN
;

1301 
§r˘l
 |
	`ALIGN
(
ad≠ãr
->
rx_buf„r_Àn
, 1024) >>

1302 
E1000_SRRCTL_BSIZEPKT_SHIFT
;

1304 i‡(
ad≠ãr
->
rx_buf„r_Àn
 < 2048) {

1305 
ad≠ãr
->
rx_ps_hdr_size
 = 0;

1306 
§r˘l
 |
E1000_SRRCTL_DESCTYPE_ADV_ONEBUF
;

1308 
ad≠ãr
->
rx_ps_hdr_size
 = 128;

1309 
§r˘l
 |
ad≠ãr
->
rx_ps_hdr_size
 <<

1310 
E1000_SRRCTL_BSIZEHDRSIZE_SHIFT
;

1311 
§r˘l
 |
E1000_SRRCTL_DESCTYPE_HDR_SPLIT_ALWAYS
;

1314 
	`ew32
(
	`SRRCTL
(0), 
§r˘l
);

1315 
	}
}

1323 
	$igbvf_c⁄figuª_rx
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1325 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1326 
igbvf_rög
 *
rx_rög
 = 
ad≠ãr
->rx_ring;

1327 
u64
 
rdba
;

1328 
u32
 
rdÀn
, 
rxd˘l
;

1331 
rxd˘l
 = 
	`î32
(
	`RXDCTL
(0));

1332 
	`ew32
(
	`RXDCTL
(0), 
rxd˘l
 & ~
E1000_RXDCTL_QUEUE_ENABLE
);

1333 
	`e1e_Êush
();

1334 
	`m¶ìp
(10);

1336 
rdÀn
 = 
rx_rög
->
cou¡
 * (
e1000_adv_rx_desc
);

1342 
rdba
 = 
rx_rög
->
dma
;

1343 
	`ew32
(
	`RDBAL
(0), (
rdba
 & 
	`DMA_BIT_MASK
(32)));

1344 
	`ew32
(
	`RDBAH
(0), (
rdba
 >> 32));

1345 
	`ew32
(
	`RDLEN
(0), 
rx_rög
->
cou¡
 * (
e1000_adv_rx_desc
));

1346 
rx_rög
->
hód
 = 
	`E1000_RDH
(0);

1347 
rx_rög
->
èû
 = 
	`E1000_RDT
(0);

1348 
	`ew32
(
	`RDH
(0), 0);

1349 
	`ew32
(
	`RDT
(0), 0);

1351 
rxd˘l
 |
E1000_RXDCTL_QUEUE_ENABLE
;

1352 
rxd˘l
 &= 0xFFF00000;

1353 
rxd˘l
 |
IGBVF_RX_PTHRESH
;

1354 
rxd˘l
 |
IGBVF_RX_HTHRESH
 << 8;

1355 
rxd˘l
 |
IGBVF_RX_WTHRESH
 << 16;

1357 
	`igbvf_£t_æpml
(
ad≠ãr
);

1360 
	`ew32
(
	`RXDCTL
(0), 
rxd˘l
);

1361 
	}
}

1372 
	$igbvf_£t_mu…i
(
√t_devi˚
 *
√tdev
)

1374 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

1375 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1376 
√tdev_hw_addr
 *
ha
;

1377 
u8
 *
mè_li°
 = 
NULL
;

1378 
i
;

1380 i‡(!
	`√tdev_mc_em±y
(
√tdev
)) {

1381 
mè_li°
 = 
	`kmÆloc
(
	`√tdev_mc_cou¡
(
√tdev
Ë* 6, 
GFP_ATOMIC
);

1382 i‡(!
mè_li°
) {

1383 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
,

1390 
i
 = 0;

1391 
	`√tdev_f‹_óch_mc_addr
(
ha
, 
√tdev
)

1392 
	`mem˝y
(
mè_li°
 + (
i
++ * 
ETH_ALEN
), 
ha
->
addr
, ETH_ALEN);

1394 
hw
->
mac
.
›s
.
	`upd©e_mc_addr_li°
(hw, 
mè_li°
, 
i
, 0, 0);

1395 
	`k‰ì
(
mè_li°
);

1396 
	}
}

1402 
	$igbvf_c⁄figuª
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1404 
	`igbvf_£t_mu…i
(
ad≠ãr
->
√tdev
);

1406 
	`igbvf_ª°‹e_vœn
(
ad≠ãr
);

1408 
	`igbvf_c⁄figuª_tx
(
ad≠ãr
);

1409 
	`igbvf_£tup_§r˘l
(
ad≠ãr
);

1410 
	`igbvf_c⁄figuª_rx
(
ad≠ãr
);

1411 
	`igbvf_Æloc_rx_buf„rs
(
ad≠ãr
->
rx_rög
,

1412 
	`igbvf_desc_unu£d
(
ad≠ãr
->
rx_rög
));

1413 
	}
}

1422 
	$igbvf_ª£t
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1424 
e1000_mac_öfo
 *
mac
 = &
ad≠ãr
->
hw
.mac;

1425 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

1426 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1429 i‡(
mac
->
›s
.
	`ª£t_hw
(
hw
))

1430 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
, "PF stillÑesetting\n");

1432 
mac
->
›s
.
	`öô_hw
(
hw
);

1434 i‡(
	`is_vÆid_ëhî_addr
(
ad≠ãr
->
hw
.
mac
.
addr
)) {

1435 
	`mem˝y
(
√tdev
->
dev_addr
, 
ad≠ãr
->
hw
.
mac
.
addr
,

1436 
√tdev
->
addr_Àn
);

1437 
	`mem˝y
(
√tdev
->
≥rm_addr
, 
ad≠ãr
->
hw
.
mac
.
addr
,

1438 
√tdev
->
addr_Àn
);

1441 
ad≠ãr
->
œ°_ª£t
 = 
jiffõs
;

1442 
	}
}

1444 
	$igbvf_up
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1446 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1449 
	`igbvf_c⁄figuª
(
ad≠ãr
);

1451 
	`˛ór_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
);

1453 
	`«pi_íabÀ
(&
ad≠ãr
->
rx_rög
->
«pi
);

1454 i‡(
ad≠ãr
->
msix_íåõs
)

1455 
	`igbvf_c⁄figuª_msix
(
ad≠ãr
);

1458 
	`î32
(
EICR
);

1459 
	`igbvf_úq_íabÀ
(
ad≠ãr
);

1462 
hw
->
mac
.
gë_lök_°©us
 = 1;

1463 
	`mod_timî
(&
ad≠ãr
->
w©chdog_timî
, 
jiffõs
 + 1);

1467 
	}
}

1469 
	$igbvf_down
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1471 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

1472 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1473 
u32
 
rxd˘l
, 
txd˘l
;

1479 
	`£t_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
);

1482 
rxd˘l
 = 
	`î32
(
	`RXDCTL
(0));

1483 
	`ew32
(
	`RXDCTL
(0), 
rxd˘l
 & ~
E1000_RXDCTL_QUEUE_ENABLE
);

1485 
	`√tif_°›_queue
(
√tdev
);

1488 
txd˘l
 = 
	`î32
(
	`TXDCTL
(0));

1489 
	`ew32
(
	`TXDCTL
(0), 
txd˘l
 & ~
E1000_TXDCTL_QUEUE_ENABLE
);

1492 
	`e1e_Êush
();

1493 
	`m¶ìp
(10);

1495 
	`«pi_dißbÀ
(&
ad≠ãr
->
rx_rög
->
«pi
);

1497 
	`igbvf_úq_dißbÀ
(
ad≠ãr
);

1499 
	`dñ_timî_sync
(&
ad≠ãr
->
w©chdog_timî
);

1501 
	`√tif_ˇºõr_off
(
√tdev
);

1504 
	`igbvf_upd©e_°©s
(
ad≠ãr
);

1506 
ad≠ãr
->
lök_•ìd
 = 0;

1507 
ad≠ãr
->
lök_du∂ex
 = 0;

1509 
	`igbvf_ª£t
(
ad≠ãr
);

1510 
	`igbvf_˛ón_tx_rög
(
ad≠ãr
->
tx_rög
);

1511 
	`igbvf_˛ón_rx_rög
(
ad≠ãr
->
rx_rög
);

1512 
	}
}

1514 
	$igbvf_ªöô_locked
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1516 
	`might_¶ìp
();

1517 
	`ã°_™d_£t_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
))

1518 
	`m¶ìp
(1);

1519 
	`igbvf_down
(
ad≠ãr
);

1520 
	`igbvf_up
(
ad≠ãr
);

1521 
	`˛ór_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
);

1522 
	}
}

1532 
__devöô
 
	$igbvf_sw_öô
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1534 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

1535 
s32
 
rc
;

1537 
ad≠ãr
->
rx_buf„r_Àn
 = 
ETH_FRAME_LEN
 + 
VLAN_HLEN
 + 
ETH_FCS_LEN
;

1538 
ad≠ãr
->
rx_ps_hdr_size
 = 0;

1539 
ad≠ãr
->
max_‰ame_size
 = 
√tdev
->
mtu
 + 
ETH_HLEN
 + 
ETH_FCS_LEN
;

1540 
ad≠ãr
->
mö_‰ame_size
 = 
ETH_ZLEN
 + 
ETH_FCS_LEN
;

1542 
ad≠ãr
->
tx_öt_dñay
 = 8;

1543 
ad≠ãr
->
tx_abs_öt_dñay
 = 32;

1544 
ad≠ãr
->
rx_öt_dñay
 = 0;

1545 
ad≠ãr
->
rx_abs_öt_dñay
 = 8;

1546 
ad≠ãr
->
ªque°ed_ôr
 = 3;

1547 
ad≠ãr
->
cuºít_ôr
 = 
IGBVF_START_ITR
;

1550 
ad≠ãr
->
ei
->
	`öô_›s
(&ad≠ãr->
hw
);

1552 
rc
 = 
ad≠ãr
->
hw
.
mac
.
›s
.
	`öô_∑øms
(&adapter->hw);

1553 i‡(
rc
)

1554  
rc
;

1556 
rc
 = 
ad≠ãr
->
hw
.
mbx
.
›s
.
	`öô_∑øms
(&adapter->hw);

1557 i‡(
rc
)

1558  
rc
;

1560 
	`igbvf_£t_öãºu±_ˇ∑bûôy
(
ad≠ãr
);

1562 i‡(
	`igbvf_Æloc_queues
(
ad≠ãr
))

1563  -
ENOMEM
;

1565 
	`•ö_lock_öô
(&
ad≠ãr
->
tx_queue_lock
);

1568 
	`igbvf_úq_dißbÀ
(
ad≠ãr
);

1570 
	`•ö_lock_öô
(&
ad≠ãr
->
°©s_lock
);

1572 
	`£t_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
);

1574 
	}
}

1576 
	$igbvf_öôülize_œ°_cou¡î_°©s
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1578 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1580 
ad≠ãr
->
°©s
.
œ°_g¥c
 = 
	`î32
(
VFGPRC
);

1581 
ad≠ãr
->
°©s
.
œ°_g‹c
 = 
	`î32
(
VFGORC
);

1582 
ad≠ãr
->
°©s
.
œ°_g±c
 = 
	`î32
(
VFGPTC
);

1583 
ad≠ãr
->
°©s
.
œ°_gŸc
 = 
	`î32
(
VFGOTC
);

1584 
ad≠ãr
->
°©s
.
œ°_m¥c
 = 
	`î32
(
VFMPRC
);

1585 
ad≠ãr
->
°©s
.
œ°_gŸlbc
 = 
	`î32
(
VFGOTLBC
);

1586 
ad≠ãr
->
°©s
.
œ°_g±lbc
 = 
	`î32
(
VFGPTLBC
);

1587 
ad≠ãr
->
°©s
.
œ°_g‹lbc
 = 
	`î32
(
VFGORLBC
);

1588 
ad≠ãr
->
°©s
.
œ°_g¥lbc
 = 
	`î32
(
VFGPRLBC
);

1590 
ad≠ãr
->
°©s
.
ba£_g¥c
 = 
	`î32
(
VFGPRC
);

1591 
ad≠ãr
->
°©s
.
ba£_g‹c
 = 
	`î32
(
VFGORC
);

1592 
ad≠ãr
->
°©s
.
ba£_g±c
 = 
	`î32
(
VFGPTC
);

1593 
ad≠ãr
->
°©s
.
ba£_gŸc
 = 
	`î32
(
VFGOTC
);

1594 
ad≠ãr
->
°©s
.
ba£_m¥c
 = 
	`î32
(
VFMPRC
);

1595 
ad≠ãr
->
°©s
.
ba£_gŸlbc
 = 
	`î32
(
VFGOTLBC
);

1596 
ad≠ãr
->
°©s
.
ba£_g±lbc
 = 
	`î32
(
VFGPTLBC
);

1597 
ad≠ãr
->
°©s
.
ba£_g‹lbc
 = 
	`î32
(
VFGORLBC
);

1598 
ad≠ãr
->
°©s
.
ba£_g¥lbc
 = 
	`î32
(
VFGPRLBC
);

1599 
	}
}

1613 
	$igbvf_›í
(
√t_devi˚
 *
√tdev
)

1615 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

1616 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1617 
îr
;

1620 i‡(
	`ã°_bô
(
__IGBVF_TESTING
, &
ad≠ãr
->
°©e
))

1621  -
EBUSY
;

1624 
îr
 = 
	`igbvf_£tup_tx_ªsour˚s
(
ad≠ãr
,ád≠ãr->
tx_rög
);

1625 i‡(
îr
)

1626 
îr_£tup_tx
;

1629 
îr
 = 
	`igbvf_£tup_rx_ªsour˚s
(
ad≠ãr
,ád≠ãr->
rx_rög
);

1630 i‡(
îr
)

1631 
îr_£tup_rx
;

1639 
	`igbvf_c⁄figuª
(
ad≠ãr
);

1641 
îr
 = 
	`igbvf_ªque°_úq
(
ad≠ãr
);

1642 i‡(
îr
)

1643 
îr_ªq_úq
;

1646 
	`˛ór_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
);

1648 
	`«pi_íabÀ
(&
ad≠ãr
->
rx_rög
->
«pi
);

1651 
	`î32
(
EICR
);

1653 
	`igbvf_úq_íabÀ
(
ad≠ãr
);

1656 
hw
->
mac
.
gë_lök_°©us
 = 1;

1657 
	`mod_timî
(&
ad≠ãr
->
w©chdog_timî
, 
jiffõs
 + 1);

1661 
îr_ªq_úq
:

1662 
	`igbvf_‰ì_rx_ªsour˚s
(
ad≠ãr
->
rx_rög
);

1663 
îr_£tup_rx
:

1664 
	`igbvf_‰ì_tx_ªsour˚s
(
ad≠ãr
->
tx_rög
);

1665 
îr_£tup_tx
:

1666 
	`igbvf_ª£t
(
ad≠ãr
);

1668  
îr
;

1669 
	}
}

1682 
	$igbvf_˛o£
(
√t_devi˚
 *
√tdev
)

1684 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

1686 
	`WARN_ON
(
	`ã°_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
));

1687 
	`igbvf_down
(
ad≠ãr
);

1689 
	`igbvf_‰ì_úq
(
ad≠ãr
);

1691 
	`igbvf_‰ì_tx_ªsour˚s
(
ad≠ãr
->
tx_rög
);

1692 
	`igbvf_‰ì_rx_ªsour˚s
(
ad≠ãr
->
rx_rög
);

1695 
	}
}

1703 
	$igbvf_£t_mac
(
√t_devi˚
 *
√tdev
, *
p
)

1705 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

1706 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1707 
sockaddr
 *
addr
 = 
p
;

1709 i‡(!
	`is_vÆid_ëhî_addr
(
addr
->
ß_d©a
))

1710  -
EADDRNOTAVAIL
;

1712 
	`mem˝y
(
hw
->
mac
.
addr
,áddr->
ß_d©a
, 
√tdev
->
addr_Àn
);

1714 
hw
->
mac
.
›s
.
	`ør_£t
(hw, hw->mac.
addr
, 0);

1716 i‡(
	`memcmp
(
addr
->
ß_d©a
, 
hw
->
mac
.addr, 6))

1717  -
EADDRNOTAVAIL
;

1719 
	`mem˝y
(
√tdev
->
dev_addr
, 
addr
->
ß_d©a
,Çëdev->
addr_Àn
);

1720 
√tdev
->
addr_assign_ty≥
 &~
NET_ADDR_RANDOM
;

1723 
	}
}

1725 
	#UPDATE_VF_COUNTER
(
ªg
, 
«me
) \

1727 
u32
 
cuºít_cou¡î
 = 
	`î32
(
ªg
); \

1728 i‡(
cuºít_cou¡î
 < 
ad≠ãr
->
°©s
.
œ°_
##
«me
) \

1729 
ad≠ãr
->
°©s
.
«me
 += 0x100000000LL; \

1730 
ad≠ãr
->
°©s
.
œ°_
##
«me
 = 
cuºít_cou¡î
; \

1731 
ad≠ãr
->
°©s
.
«me
 &= 0xFFFFFFFF00000000LL; \

1732 
ad≠ãr
->
°©s
.
«me
 |
cuºít_cou¡î
; \

1733 }

	)

1739 
	$igbvf_upd©e_°©s
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1741 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1742 
pci_dev
 *
pdev
 = 
ad≠ãr
->pdev;

1748 i‡(
ad≠ãr
->
lök_•ìd
 == 0)

1751 i‡(
	`ã°_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
))

1754 i‡(
	`pci_ch™√l_ofÊöe
(
pdev
))

1757 
	`UPDATE_VF_COUNTER
(
VFGPRC
, 
g¥c
);

1758 
	`UPDATE_VF_COUNTER
(
VFGORC
, 
g‹c
);

1759 
	`UPDATE_VF_COUNTER
(
VFGPTC
, 
g±c
);

1760 
	`UPDATE_VF_COUNTER
(
VFGOTC
, 
gŸc
);

1761 
	`UPDATE_VF_COUNTER
(
VFMPRC
, 
m¥c
);

1762 
	`UPDATE_VF_COUNTER
(
VFGOTLBC
, 
gŸlbc
);

1763 
	`UPDATE_VF_COUNTER
(
VFGPTLBC
, 
g±lbc
);

1764 
	`UPDATE_VF_COUNTER
(
VFGORLBC
, 
g‹lbc
);

1765 
	`UPDATE_VF_COUNTER
(
VFGPRLBC
, 
g¥lbc
);

1768 
ad≠ãr
->
√t_°©s
.
mu…iˇ°
 =ád≠ãr->
°©s
.
m¥c
;

1769 
	}
}

1771 
	$igbvf_¥öt_lök_öfo
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1773 
	`dev_öfo
(&
ad≠ãr
->
pdev
->
dev
, "Link is Up %d Mbps %s Duplex\n",

1774 
ad≠ãr
->
lök_•ìd
,

1775 
ad≠ãr
->
lök_du∂ex
 =
FULL_DUPLEX
 ? "Full" : "Half");

1776 
	}
}

1778 
boﬁ
 
	$igbvf_has_lök
(
igbvf_ad≠ãr
 *
ad≠ãr
)

1780 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1781 
s32
 
ªt_vÆ
 = 
E1000_SUCCESS
;

1782 
boﬁ
 
lök_a˘ive
;

1785 i‡(
	`ã°_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
))

1786  
Ál£
;

1788 
ªt_vÆ
 = 
hw
->
mac
.
›s
.
	`check_f‹_lök
(hw);

1789 
lök_a˘ive
 = !
hw
->
mac
.
gë_lök_°©us
;

1792 i‡(
ªt_vÆ
 && 
	`time_a·î
(
jiffõs
, 
ad≠ãr
->
œ°_ª£t
 + (10 * 
HZ
)))

1793 
	`scheduÀ_w‹k
(&
ad≠ãr
->
ª£t_èsk
);

1795  
lök_a˘ive
;

1796 
	}
}

1802 
	$igbvf_w©chdog
(
d©a
)

1804 
igbvf_ad≠ãr
 *
ad≠ãr
 = (igbvf_ad≠ã∏*Ë
d©a
;

1807 
	`scheduÀ_w‹k
(&
ad≠ãr
->
w©chdog_èsk
);

1808 
	}
}

1810 
	$igbvf_w©chdog_èsk
(
w‹k_°ru˘
 *
w‹k
)

1812 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`c⁄èöî_of
(
w‹k
,

1813 
igbvf_ad≠ãr
,

1814 
w©chdog_èsk
);

1815 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

1816 
e1000_mac_öfo
 *
mac
 = &
ad≠ãr
->
hw
.mac;

1817 
igbvf_rög
 *
tx_rög
 = 
ad≠ãr
->tx_ring;

1818 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

1819 
u32
 
lök
;

1820 
tx_≥ndög
 = 0;

1822 
lök
 = 
	`igbvf_has_lök
(
ad≠ãr
);

1824 i‡(
lök
) {

1825 i‡(!
	`√tif_ˇºõr_ok
(
√tdev
)) {

1826 
mac
->
›s
.
	`gë_lök_up_öfo
(&
ad≠ãr
->
hw
,

1827 &
ad≠ãr
->
lök_•ìd
,

1828 &
ad≠ãr
->
lök_du∂ex
);

1829 
	`igbvf_¥öt_lök_öfo
(
ad≠ãr
);

1831 
	`√tif_ˇºõr_⁄
(
√tdev
);

1832 
	`√tif_wake_queue
(
√tdev
);

1835 i‡(
	`√tif_ˇºõr_ok
(
√tdev
)) {

1836 
ad≠ãr
->
lök_•ìd
 = 0;

1837 
ad≠ãr
->
lök_du∂ex
 = 0;

1838 
	`dev_öfo
(&
ad≠ãr
->
pdev
->
dev
, "Link is Down\n");

1839 
	`√tif_ˇºõr_off
(
√tdev
);

1840 
	`√tif_°›_queue
(
√tdev
);

1844 i‡(
	`√tif_ˇºõr_ok
(
√tdev
)) {

1845 
	`igbvf_upd©e_°©s
(
ad≠ãr
);

1847 
tx_≥ndög
 = (
	`igbvf_desc_unu£d
(
tx_rög
) + 1 <

1848 
tx_rög
->
cou¡
);

1849 i‡(
tx_≥ndög
) {

1856 
ad≠ãr
->
tx_timeout_cou¡
++;

1857 
	`scheduÀ_w‹k
(&
ad≠ãr
->
ª£t_èsk
);

1862 
	`ew32
(
EICS
, 
ad≠ãr
->
rx_rög
->
eims_vÆue
);

1865 i‡(!
	`ã°_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
))

1866 
	`mod_timî
(&
ad≠ãr
->
w©chdog_timî
,

1867 
	`round_jiffõs
(
jiffõs
 + (2 * 
HZ
)));

1868 
	}
}

1870 
	#IGBVF_TX_FLAGS_CSUM
 0x00000001

	)

1871 
	#IGBVF_TX_FLAGS_VLAN
 0x00000002

	)

1872 
	#IGBVF_TX_FLAGS_TSO
 0x00000004

	)

1873 
	#IGBVF_TX_FLAGS_IPV4
 0x00000008

	)

1874 
	#IGBVF_TX_FLAGS_VLAN_MASK
 0xffff0000

	)

1875 
	#IGBVF_TX_FLAGS_VLAN_SHIFT
 16

	)

1877 
	$igbvf_tso
(
igbvf_ad≠ãr
 *
ad≠ãr
,

1878 
igbvf_rög
 *
tx_rög
,

1879 
sk_buff
 *
skb
, 
u32
 
tx_Êags
, 
u8
 *
hdr_Àn
)

1881 
e1000_adv_tx_c⁄ãxt_desc
 *
c⁄ãxt_desc
;

1882 
i
;

1883 
îr
;

1884 
igbvf_buf„r
 *
buf„r_öfo
;

1885 
u32
 
öfo
 = 0, 
tu_cmd
 = 0;

1886 
u32
 
mss_l4Àn_idx
, 
l4Àn
;

1887 *
hdr_Àn
 = 0;

1889 i‡(
	`skb_hódî_˛⁄ed
(
skb
)) {

1890 
îr
 = 
	`pskb_ex∑nd_hód
(
skb
, 0, 0, 
GFP_ATOMIC
);

1891 i‡(
îr
) {

1892 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
,

1894  
îr
;

1898 
l4Àn
 = 
	`t˝_hdæí
(
skb
);

1899 *
hdr_Àn
 +
l4Àn
;

1901 i‡(
skb
->
¥Ÿocﬁ
 =
	`ht⁄s
(
ETH_P_IP
)) {

1902 
ùhdr
 *
ùh
 = 
	`ù_hdr
(
skb
);

1903 
ùh
->
tŸ_Àn
 = 0;

1904 
ùh
->
check
 = 0;

1905 
	`t˝_hdr
(
skb
)->
check
 = ~
	`csum_t˝udp_magic
(
ùh
->
ßddr
,

1906 
ùh
->
daddr
, 0,

1907 
IPPROTO_TCP
,

1909 } i‡(
	`skb_is_gso_v6
(
skb
)) {

1910 
	`ùv6_hdr
(
skb
)->
∑ylﬂd_Àn
 = 0;

1911 
	`t˝_hdr
(
skb
)->
check
 = ~
	`csum_ùv6_magic
(&
	`ùv6_hdr
(skb)->
ßddr
,

1912 &
	`ùv6_hdr
(
skb
)->
daddr
,

1913 0, 
IPPROTO_TCP
, 0);

1916 
i
 = 
tx_rög
->
√xt_to_u£
;

1918 
buf„r_öfo
 = &
tx_rög
->buf„r_öfo[
i
];

1919 
c⁄ãxt_desc
 = 
	`IGBVF_TX_CTXTDESC_ADV
(*
tx_rög
, 
i
);

1921 i‡(
tx_Êags
 & 
IGBVF_TX_FLAGS_VLAN
)

1922 
öfo
 |(
tx_Êags
 & 
IGBVF_TX_FLAGS_VLAN_MASK
);

1923 
öfo
 |(
	`skb_√tw‹k_off£t
(
skb
Ë<< 
E1000_ADVTXD_MACLEN_SHIFT
);

1924 *
hdr_Àn
 +
	`skb_√tw‹k_off£t
(
skb
);

1925 
öfo
 |(
	`skb_å™•‹t_hódî
(
skb
Ë- 
	`skb_√tw‹k_hódî
(skb));

1926 *
hdr_Àn
 +(
	`skb_å™•‹t_hódî
(
skb
Ë- 
	`skb_√tw‹k_hódî
(skb));

1927 
c⁄ãxt_desc
->
vœn_macù_Àns
 = 
	`˝u_to_À32
(
öfo
);

1930 
tu_cmd
 |(
E1000_TXD_CMD_DEXT
 | 
E1000_ADVTXD_DTYP_CTXT
);

1932 i‡(
skb
->
¥Ÿocﬁ
 =
	`ht⁄s
(
ETH_P_IP
))

1933 
tu_cmd
 |
E1000_ADVTXD_TUCMD_IPV4
;

1934 
tu_cmd
 |
E1000_ADVTXD_TUCMD_L4T_TCP
;

1936 
c⁄ãxt_desc
->
ty≥_tucmd_mlhl
 = 
	`˝u_to_À32
(
tu_cmd
);

1939 
mss_l4Àn_idx
 = (
	`skb_shöfo
(
skb
)->
gso_size
 << 
E1000_ADVTXD_MSS_SHIFT
);

1940 
mss_l4Àn_idx
 |(
l4Àn
 << 
E1000_ADVTXD_L4LEN_SHIFT
);

1942 
c⁄ãxt_desc
->
mss_l4Àn_idx
 = 
	`˝u_to_À32
(mss_l4len_idx);

1943 
c⁄ãxt_desc
->
£qnum_£ed
 = 0;

1945 
buf„r_öfo
->
time_°amp
 = 
jiffõs
;

1946 
buf„r_öfo
->
√xt_to_w©ch
 = 
i
;

1947 
buf„r_öfo
->
dma
 = 0;

1948 
i
++;

1949 i‡(
i
 =
tx_rög
->
cou¡
)

1950 
i
 = 0;

1952 
tx_rög
->
√xt_to_u£
 = 
i
;

1954  
åue
;

1955 
	}
}

1957 
ölöe
 
boﬁ
 
	$igbvf_tx_csum
(
igbvf_ad≠ãr
 *
ad≠ãr
,

1958 
igbvf_rög
 *
tx_rög
,

1959 
sk_buff
 *
skb
, 
u32
 
tx_Êags
)

1961 
e1000_adv_tx_c⁄ãxt_desc
 *
c⁄ãxt_desc
;

1962 
i
;

1963 
igbvf_buf„r
 *
buf„r_öfo
;

1964 
u32
 
öfo
 = 0, 
tu_cmd
 = 0;

1966 i‡((
skb
->
ù_summed
 =
CHECKSUM_PARTIAL
) ||

1967 (
tx_Êags
 & 
IGBVF_TX_FLAGS_VLAN
)) {

1968 
i
 = 
tx_rög
->
√xt_to_u£
;

1969 
buf„r_öfo
 = &
tx_rög
->buf„r_öfo[
i
];

1970 
c⁄ãxt_desc
 = 
	`IGBVF_TX_CTXTDESC_ADV
(*
tx_rög
, 
i
);

1972 i‡(
tx_Êags
 & 
IGBVF_TX_FLAGS_VLAN
)

1973 
öfo
 |(
tx_Êags
 & 
IGBVF_TX_FLAGS_VLAN_MASK
);

1975 
öfo
 |(
	`skb_√tw‹k_off£t
(
skb
Ë<< 
E1000_ADVTXD_MACLEN_SHIFT
);

1976 i‡(
skb
->
ù_summed
 =
CHECKSUM_PARTIAL
)

1977 
öfo
 |(
	`skb_å™•‹t_hódî
(
skb
) -

1978 
	`skb_√tw‹k_hódî
(
skb
));

1981 
c⁄ãxt_desc
->
vœn_macù_Àns
 = 
	`˝u_to_À32
(
öfo
);

1983 
tu_cmd
 |(
E1000_TXD_CMD_DEXT
 | 
E1000_ADVTXD_DTYP_CTXT
);

1985 i‡(
skb
->
ù_summed
 =
CHECKSUM_PARTIAL
) {

1986 
skb
->
¥Ÿocﬁ
) {

1987 
	`__c⁄°™t_ht⁄s
(
ETH_P_IP
):

1988 
tu_cmd
 |
E1000_ADVTXD_TUCMD_IPV4
;

1989 i‡(
	`ù_hdr
(
skb
)->
¥Ÿocﬁ
 =
IPPROTO_TCP
)

1990 
tu_cmd
 |
E1000_ADVTXD_TUCMD_L4T_TCP
;

1992 
	`__c⁄°™t_ht⁄s
(
ETH_P_IPV6
):

1993 i‡(
	`ùv6_hdr
(
skb
)->
√xthdr
 =
IPPROTO_TCP
)

1994 
tu_cmd
 |
E1000_ADVTXD_TUCMD_L4T_TCP
;

2001 
c⁄ãxt_desc
->
ty≥_tucmd_mlhl
 = 
	`˝u_to_À32
(
tu_cmd
);

2002 
c⁄ãxt_desc
->
£qnum_£ed
 = 0;

2003 
c⁄ãxt_desc
->
mss_l4Àn_idx
 = 0;

2005 
buf„r_öfo
->
time_°amp
 = 
jiffõs
;

2006 
buf„r_öfo
->
√xt_to_w©ch
 = 
i
;

2007 
buf„r_öfo
->
dma
 = 0;

2008 
i
++;

2009 i‡(
i
 =
tx_rög
->
cou¡
)

2010 
i
 = 0;

2011 
tx_rög
->
√xt_to_u£
 = 
i
;

2013  
åue
;

2016  
Ál£
;

2017 
	}
}

2019 
	$igbvf_maybe_°›_tx
(
√t_devi˚
 *
√tdev
, 
size
)

2021 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2024 i‡(
	`igbvf_desc_unu£d
(
ad≠ãr
->
tx_rög
Ë>
size
)

2027 
	`√tif_°›_queue
(
√tdev
);

2029 
	`smp_mb
();

2032 i‡(
	`igbvf_desc_unu£d
(
ad≠ãr
->
tx_rög
Ë< 
size
)

2033  -
EBUSY
;

2035 
	`√tif_wake_queue
(
√tdev
);

2037 ++
ad≠ãr
->
ª°¨t_queue
;

2039 
	}
}

2041 
	#IGBVF_MAX_TXD_PWR
 16

	)

2042 
	#IGBVF_MAX_DATA_PER_TXD
 (1 << 
IGBVF_MAX_TXD_PWR
)

	)

2044 
ölöe
 
	$igbvf_tx_m≠_adv
(
igbvf_ad≠ãr
 *
ad≠ãr
,

2045 
igbvf_rög
 *
tx_rög
,

2046 
sk_buff
 *
skb
,

2047 
fú°
)

2049 
igbvf_buf„r
 *
buf„r_öfo
;

2050 
pci_dev
 *
pdev
 = 
ad≠ãr
->pdev;

2051 
Àn
 = 
	`skb_hódÀn
(
skb
);

2052 
cou¡
 = 0, 
i
;

2053 
f
;

2055 
i
 = 
tx_rög
->
√xt_to_u£
;

2057 
buf„r_öfo
 = &
tx_rög
->buf„r_öfo[
i
];

2058 
	`BUG_ON
(
Àn
 >
IGBVF_MAX_DATA_PER_TXD
);

2059 
buf„r_öfo
->
Àngth
 = 
Àn
;

2061 
buf„r_öfo
->
time_°amp
 = 
jiffõs
;

2062 
buf„r_öfo
->
√xt_to_w©ch
 = 
i
;

2063 
buf„r_öfo
->
m≠≥d_as_∑ge
 = 
Ál£
;

2064 
buf„r_öfo
->
dma
 = 
	`dma_m≠_sögÀ
(&
pdev
->
dev
, 
skb
->
d©a
, 
Àn
,

2065 
DMA_TO_DEVICE
);

2066 i‡(
	`dma_m≠pög_îr‹
(&
pdev
->
dev
, 
buf„r_öfo
->
dma
))

2067 
dma_îr‹
;

2070 
f
 = 0; f < 
	`skb_shöfo
(
skb
)->
ƒ_‰ags
; f++) {

2071 c⁄° 
skb_‰ag_°ru˘
 *
‰ag
;

2073 
cou¡
++;

2074 
i
++;

2075 i‡(
i
 =
tx_rög
->
cou¡
)

2076 
i
 = 0;

2078 
‰ag
 = &
	`skb_shöfo
(
skb
)->
‰ags
[
f
];

2079 
Àn
 = 
	`skb_‰ag_size
(
‰ag
);

2081 
buf„r_öfo
 = &
tx_rög
->buf„r_öfo[
i
];

2082 
	`BUG_ON
(
Àn
 >
IGBVF_MAX_DATA_PER_TXD
);

2083 
buf„r_öfo
->
Àngth
 = 
Àn
;

2084 
buf„r_öfo
->
time_°amp
 = 
jiffõs
;

2085 
buf„r_öfo
->
√xt_to_w©ch
 = 
i
;

2086 
buf„r_öfo
->
m≠≥d_as_∑ge
 = 
åue
;

2087 
buf„r_öfo
->
dma
 = 
	`skb_‰ag_dma_m≠
(&
pdev
->
dev
, 
‰ag
, 0, 
Àn
,

2088 
DMA_TO_DEVICE
);

2089 i‡(
	`dma_m≠pög_îr‹
(&
pdev
->
dev
, 
buf„r_öfo
->
dma
))

2090 
dma_îr‹
;

2093 
tx_rög
->
buf„r_öfo
[
i
].
skb
 = skb;

2094 
tx_rög
->
buf„r_öfo
[
fú°
].
√xt_to_w©ch
 = 
i
;

2096  ++
cou¡
;

2098 
dma_îr‹
:

2099 
	`dev_îr
(&
pdev
->
dev
, "TX DMA map failed\n");

2102 
buf„r_öfo
->
dma
 = 0;

2103 
buf„r_öfo
->
time_°amp
 = 0;

2104 
buf„r_öfo
->
Àngth
 = 0;

2105 
buf„r_öfo
->
√xt_to_w©ch
 = 0;

2106 
buf„r_öfo
->
m≠≥d_as_∑ge
 = 
Ál£
;

2107 i‡(
cou¡
)

2108 
cou¡
--;

2111 
cou¡
--) {

2112 i‡(
i
==0)

2113 
i
 +
tx_rög
->
cou¡
;

2114 
i
--;

2115 
buf„r_öfo
 = &
tx_rög
->buf„r_öfo[
i
];

2116 
	`igbvf_put_txbuf
(
ad≠ãr
, 
buf„r_öfo
);

2120 
	}
}

2122 
ölöe
 
	$igbvf_tx_queue_adv
(
igbvf_ad≠ãr
 *
ad≠ãr
,

2123 
igbvf_rög
 *
tx_rög
,

2124 
tx_Êags
, 
cou¡
, 
u32
 
∑yÀn
,

2125 
u8
 
hdr_Àn
)

2127 
e1000_adv_tx_desc
 *
tx_desc
 = 
NULL
;

2128 
igbvf_buf„r
 *
buf„r_öfo
;

2129 
u32
 
ﬁöfo_°©us
 = 0, 
cmd_ty≥_Àn
;

2130 
i
;

2132 
cmd_ty≥_Àn
 = (
E1000_ADVTXD_DTYP_DATA
 | 
E1000_ADVTXD_DCMD_IFCS
 |

2133 
E1000_ADVTXD_DCMD_DEXT
);

2135 i‡(
tx_Êags
 & 
IGBVF_TX_FLAGS_VLAN
)

2136 
cmd_ty≥_Àn
 |
E1000_ADVTXD_DCMD_VLE
;

2138 i‡(
tx_Êags
 & 
IGBVF_TX_FLAGS_TSO
) {

2139 
cmd_ty≥_Àn
 |
E1000_ADVTXD_DCMD_TSE
;

2142 
ﬁöfo_°©us
 |
E1000_TXD_POPTS_TXSM
 << 8;

2145 i‡(
tx_Êags
 & 
IGBVF_TX_FLAGS_IPV4
)

2146 
ﬁöfo_°©us
 |
E1000_TXD_POPTS_IXSM
 << 8;

2148 } i‡(
tx_Êags
 & 
IGBVF_TX_FLAGS_CSUM
) {

2149 
ﬁöfo_°©us
 |
E1000_TXD_POPTS_TXSM
 << 8;

2152 
ﬁöfo_°©us
 |((
∑yÀn
 - 
hdr_Àn
Ë<< 
E1000_ADVTXD_PAYLEN_SHIFT
);

2154 
i
 = 
tx_rög
->
√xt_to_u£
;

2155 
cou¡
--) {

2156 
buf„r_öfo
 = &
tx_rög
->buf„r_öfo[
i
];

2157 
tx_desc
 = 
	`IGBVF_TX_DESC_ADV
(*
tx_rög
, 
i
);

2158 
tx_desc
->
ªad
.
buf„r_addr
 = 
	`˝u_to_À64
(
buf„r_öfo
->
dma
);

2159 
tx_desc
->
ªad
.
cmd_ty≥_Àn
 =

2160 
	`˝u_to_À32
(
cmd_ty≥_Àn
 | 
buf„r_öfo
->
Àngth
);

2161 
tx_desc
->
ªad
.
ﬁöfo_°©us
 = 
	`˝u_to_À32
(olinfo_status);

2162 
i
++;

2163 i‡(
i
 =
tx_rög
->
cou¡
)

2164 
i
 = 0;

2167 
tx_desc
->
ªad
.
cmd_ty≥_Àn
 |
	`˝u_to_À32
(
ad≠ãr
->
txd_cmd
);

2172 
	`wmb
();

2174 
tx_rög
->
√xt_to_u£
 = 
i
;

2175 
	`wrôñ
(
i
, 
ad≠ãr
->
hw
.
hw_addr
 + 
tx_rög
->
èû
);

2178 
	`mmiowb
();

2179 
	}
}

2181 
√tdev_tx_t
 
	$igbvf_xmô_‰ame_rög_adv
(
sk_buff
 *
skb
,

2182 
√t_devi˚
 *
√tdev
,

2183 
igbvf_rög
 *
tx_rög
)

2185 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2186 
fú°
, 
tx_Êags
 = 0;

2187 
u8
 
hdr_Àn
 = 0;

2188 
cou¡
 = 0;

2189 
tso
 = 0;

2191 i‡(
	`ã°_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
)) {

2192 
	`dev_k‰ì_skb_™y
(
skb
);

2193  
NETDEV_TX_OK
;

2196 i‡(
skb
->
Àn
 <= 0) {

2197 
	`dev_k‰ì_skb_™y
(
skb
);

2198  
NETDEV_TX_OK
;

2208 i‡(
	`igbvf_maybe_°›_tx
(
√tdev
, 
	`skb_shöfo
(
skb
)->
ƒ_‰ags
 + 4)) {

2210  
NETDEV_TX_BUSY
;

2213 i‡(
	`vœn_tx_èg_¥e£¡
(
skb
)) {

2214 
tx_Êags
 |
IGBVF_TX_FLAGS_VLAN
;

2215 
tx_Êags
 |(
	`vœn_tx_èg_gë
(
skb
Ë<< 
IGBVF_TX_FLAGS_VLAN_SHIFT
);

2218 i‡(
skb
->
¥Ÿocﬁ
 =
	`ht⁄s
(
ETH_P_IP
))

2219 
tx_Êags
 |
IGBVF_TX_FLAGS_IPV4
;

2221 
fú°
 = 
tx_rög
->
√xt_to_u£
;

2223 
tso
 = 
	`skb_is_gso
(
skb
) ?

2224 
	`igbvf_tso
(
ad≠ãr
, 
tx_rög
, 
skb
, 
tx_Êags
, &
hdr_Àn
) : 0;

2225 i‡(
	`u∆ikñy
(
tso
 < 0)) {

2226 
	`dev_k‰ì_skb_™y
(
skb
);

2227  
NETDEV_TX_OK
;

2230 i‡(
tso
)

2231 
tx_Êags
 |
IGBVF_TX_FLAGS_TSO
;

2232 i‡(
	`igbvf_tx_csum
(
ad≠ãr
, 
tx_rög
, 
skb
, 
tx_Êags
) &&

2233 (
skb
->
ù_summed
 =
CHECKSUM_PARTIAL
))

2234 
tx_Êags
 |
IGBVF_TX_FLAGS_CSUM
;

2240 
cou¡
 = 
	`igbvf_tx_m≠_adv
(
ad≠ãr
, 
tx_rög
, 
skb
, 
fú°
);

2242 i‡(
cou¡
) {

2243 
	`igbvf_tx_queue_adv
(
ad≠ãr
, 
tx_rög
, 
tx_Êags
, 
cou¡
,

2244 
skb
->
Àn
, 
hdr_Àn
);

2246 
	`igbvf_maybe_°›_tx
(
√tdev
, 
MAX_SKB_FRAGS
 + 4);

2248 
	`dev_k‰ì_skb_™y
(
skb
);

2249 
tx_rög
->
buf„r_öfo
[
fú°
].
time_°amp
 = 0;

2250 
tx_rög
->
√xt_to_u£
 = 
fú°
;

2253  
NETDEV_TX_OK
;

2254 
	}
}

2256 
√tdev_tx_t
 
	$igbvf_xmô_‰ame
(
sk_buff
 *
skb
,

2257 
√t_devi˚
 *
√tdev
)

2259 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2260 
igbvf_rög
 *
tx_rög
;

2262 i‡(
	`ã°_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
)) {

2263 
	`dev_k‰ì_skb_™y
(
skb
);

2264  
NETDEV_TX_OK
;

2267 
tx_rög
 = &
ad≠ãr
->tx_ring[0];

2269  
	`igbvf_xmô_‰ame_rög_adv
(
skb
, 
√tdev
, 
tx_rög
);

2270 
	}
}

2276 
	$igbvf_tx_timeout
(
√t_devi˚
 *
√tdev
)

2278 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2281 
ad≠ãr
->
tx_timeout_cou¡
++;

2282 
	`scheduÀ_w‹k
(&
ad≠ãr
->
ª£t_èsk
);

2283 
	}
}

2285 
	$igbvf_ª£t_èsk
(
w‹k_°ru˘
 *
w‹k
)

2287 
igbvf_ad≠ãr
 *
ad≠ãr
;

2288 
ad≠ãr
 = 
	`c⁄èöî_of
(
w‹k
, 
igbvf_ad≠ãr
, 
ª£t_èsk
);

2290 
	`igbvf_ªöô_locked
(
ad≠ãr
);

2291 
	}
}

2300 
√t_devi˚_°©s
 *
	$igbvf_gë_°©s
(
√t_devi˚
 *
√tdev
)

2302 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2305  &
ad≠ãr
->
√t_°©s
;

2306 
	}
}

2315 
	$igbvf_ch™ge_mtu
(
√t_devi˚
 *
√tdev
, 
√w_mtu
)

2317 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2318 
max_‰ame
 = 
√w_mtu
 + 
ETH_HLEN
 + 
ETH_FCS_LEN
;

2320 i‡((
√w_mtu
 < 68Ë|| (
max_‰ame
 > 
MAX_JUMBO_FRAME_SIZE
)) {

2321 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
, "Invalid MTU setting\n");

2322  -
EINVAL
;

2325 
	#MAX_STD_JUMBO_FRAME_SIZE
 9234

	)

2326 i‡(
max_‰ame
 > 
MAX_STD_JUMBO_FRAME_SIZE
) {

2327 
	`dev_îr
(&
ad≠ãr
->
pdev
->
dev
, "MTU > 9216Çot supported.\n");

2328  -
EINVAL
;

2331 
	`ã°_™d_£t_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
))

2332 
	`m¶ìp
(1);

2334 
ad≠ãr
->
max_‰ame_size
 = 
max_‰ame
;

2335 i‡(
	`√tif_ru¬ög
(
√tdev
))

2336 
	`igbvf_down
(
ad≠ãr
);

2347 i‡(
max_‰ame
 <= 1024)

2348 
ad≠ãr
->
rx_buf„r_Àn
 = 1024;

2349 i‡(
max_‰ame
 <= 2048)

2350 
ad≠ãr
->
rx_buf„r_Àn
 = 2048;

2352 #i‡(
PAGE_SIZE
 / 2) > 16384

2353 
ad≠ãr
->
rx_buf„r_Àn
 = 16384;

2355 
ad≠ãr
->
rx_buf„r_Àn
 = 
PAGE_SIZE
 / 2;

2360 i‡((
max_‰ame
 =
ETH_FRAME_LEN
 + 
ETH_FCS_LEN
) ||

2361 (
max_‰ame
 =
ETH_FRAME_LEN
 + 
VLAN_HLEN
 + 
ETH_FCS_LEN
))

2362 
ad≠ãr
->
rx_buf„r_Àn
 = 
ETH_FRAME_LEN
 + 
VLAN_HLEN
 +

2363 
ETH_FCS_LEN
;

2365 
	`dev_öfo
(&
ad≠ãr
->
pdev
->
dev
, "changing MTU from %dÅo %d\n",

2366 
√tdev
->
mtu
, 
√w_mtu
);

2367 
√tdev
->
mtu
 = 
√w_mtu
;

2369 i‡(
	`√tif_ru¬ög
(
√tdev
))

2370 
	`igbvf_up
(
ad≠ãr
);

2372 
	`igbvf_ª£t
(
ad≠ãr
);

2374 
	`˛ór_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
);

2377 
	}
}

2379 
	$igbvf_io˘l
(
√t_devi˚
 *
√tdev
, 
i‰eq
 *
i‰
, 
cmd
)

2381 
cmd
) {

2383  -
EOPNOTSUPP
;

2385 
	}
}

2387 
	$igbvf_su•íd
(
pci_dev
 *
pdev
, 
pm_mesßge_t
 
°©e
)

2389 
√t_devi˚
 *
√tdev
 = 
	`pci_gë_drvd©a
(
pdev
);

2390 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2391 #ifde‡
CONFIG_PM


2392 
ªtvÆ
 = 0;

2395 
	`√tif_devi˚_dëach
(
√tdev
);

2397 i‡(
	`√tif_ru¬ög
(
√tdev
)) {

2398 
	`WARN_ON
(
	`ã°_bô
(
__IGBVF_RESETTING
, &
ad≠ãr
->
°©e
));

2399 
	`igbvf_down
(
ad≠ãr
);

2400 
	`igbvf_‰ì_úq
(
ad≠ãr
);

2403 #ifde‡
CONFIG_PM


2404 
ªtvÆ
 = 
	`pci_ßve_°©e
(
pdev
);

2405 i‡(
ªtvÆ
)

2406  
ªtvÆ
;

2409 
	`pci_dißbÀ_devi˚
(
pdev
);

2412 
	}
}

2414 #ifde‡
CONFIG_PM


2415 
	$igbvf_ªsume
(
pci_dev
 *
pdev
)

2417 
√t_devi˚
 *
√tdev
 = 
	`pci_gë_drvd©a
(
pdev
);

2418 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2419 
u32
 
îr
;

2421 
	`pci_ª°‹e_°©e
(
pdev
);

2422 
îr
 = 
	`pci_íabÀ_devi˚_mem
(
pdev
);

2423 i‡(
îr
) {

2424 
	`dev_îr
(&
pdev
->
dev
, "CannotÉnable PCI device from suspend\n");

2425  
îr
;

2428 
	`pci_£t_ma°î
(
pdev
);

2430 i‡(
	`√tif_ru¬ög
(
√tdev
)) {

2431 
îr
 = 
	`igbvf_ªque°_úq
(
ad≠ãr
);

2432 i‡(
îr
)

2433  
îr
;

2436 
	`igbvf_ª£t
(
ad≠ãr
);

2438 i‡(
	`√tif_ru¬ög
(
√tdev
))

2439 
	`igbvf_up
(
ad≠ãr
);

2441 
	`√tif_devi˚_©èch
(
√tdev
);

2444 
	}
}

2447 
	$igbvf_shutdown
(
pci_dev
 *
pdev
)

2449 
	`igbvf_su•íd
(
pdev
, 
PMSG_SUSPEND
);

2450 
	}
}

2452 #ifde‡
CONFIG_NET_POLL_CONTROLLER


2458 
	$igbvf_√çﬁl
(
√t_devi˚
 *
√tdev
)

2460 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2462 
	`dißbÀ_úq
(
ad≠ãr
->
pdev
->
úq
);

2464 
	`igbvf_˛ón_tx_úq
(
ad≠ãr
->
tx_rög
);

2466 
	`íabÀ_úq
(
ad≠ãr
->
pdev
->
úq
);

2467 
	}
}

2478 
pci_îs_ªsu…_t
 
	$igbvf_io_îr‹_dëe˘ed
(
pci_dev
 *
pdev
,

2479 
pci_ch™√l_°©e_t
 
°©e
)

2481 
√t_devi˚
 *
√tdev
 = 
	`pci_gë_drvd©a
(
pdev
);

2482 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2484 
	`√tif_devi˚_dëach
(
√tdev
);

2486 i‡(
°©e
 =
pci_ch™√l_io_≥rm_Áûuª
)

2487  
PCI_ERS_RESULT_DISCONNECT
;

2489 i‡(
	`√tif_ru¬ög
(
√tdev
))

2490 
	`igbvf_down
(
ad≠ãr
);

2491 
	`pci_dißbÀ_devi˚
(
pdev
);

2494  
PCI_ERS_RESULT_NEED_RESET
;

2495 
	}
}

2504 
pci_îs_ªsu…_t
 
	$igbvf_io_¶Ÿ_ª£t
(
pci_dev
 *
pdev
)

2506 
√t_devi˚
 *
√tdev
 = 
	`pci_gë_drvd©a
(
pdev
);

2507 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2509 i‡(
	`pci_íabÀ_devi˚_mem
(
pdev
)) {

2510 
	`dev_îr
(&
pdev
->
dev
,

2512  
PCI_ERS_RESULT_DISCONNECT
;

2514 
	`pci_£t_ma°î
(
pdev
);

2516 
	`igbvf_ª£t
(
ad≠ãr
);

2518  
PCI_ERS_RESULT_RECOVERED
;

2519 
	}
}

2529 
	$igbvf_io_ªsume
(
pci_dev
 *
pdev
)

2531 
√t_devi˚
 *
√tdev
 = 
	`pci_gë_drvd©a
(
pdev
);

2532 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2534 i‡(
	`√tif_ru¬ög
(
√tdev
)) {

2535 i‡(
	`igbvf_up
(
ad≠ãr
)) {

2536 
	`dev_îr
(&
pdev
->
dev
,

2542 
	`√tif_devi˚_©èch
(
√tdev
);

2543 
	}
}

2545 
	$igbvf_¥öt_devi˚_öfo
(
igbvf_ad≠ãr
 *
ad≠ãr
)

2547 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

2548 
√t_devi˚
 *
√tdev
 = 
ad≠ãr
->netdev;

2549 
pci_dev
 *
pdev
 = 
ad≠ãr
->pdev;

2551 i‡(
hw
->
mac
.
ty≥
 =
e1000_vÁd≠t_i350
)

2552 
	`dev_öfo
(&
pdev
->
dev
, "Intel(R) I350 Virtual Function\n");

2554 
	`dev_öfo
(&
pdev
->
dev
, "Intel(R) 82576 Virtual Function\n");

2555 
	`dev_öfo
(&
pdev
->
dev
, "Addªss: %pM\n", 
√tdev
->
dev_addr
);

2556 
	}
}

2558 
	$igbvf_£t_„©uªs
(
√t_devi˚
 *
√tdev
,

2559 
√tdev_„©uªs_t
 
„©uªs
)

2561 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2563 i‡(
„©uªs
 & 
NETIF_F_RXCSUM
)

2564 
ad≠ãr
->
Êags
 &~
IGBVF_FLAG_RX_CSUM_DISABLED
;

2566 
ad≠ãr
->
Êags
 |
IGBVF_FLAG_RX_CSUM_DISABLED
;

2569 
	}
}

2571 c⁄° 
√t_devi˚_›s
 
	gigbvf_√tdev_›s
 = {

2572 .
ndo_›í
 = 
igbvf_›í
,

2573 .
	gndo_°›
 = 
igbvf_˛o£
,

2574 .
	gndo_°¨t_xmô
 = 
igbvf_xmô_‰ame
,

2575 .
	gndo_gë_°©s
 = 
igbvf_gë_°©s
,

2576 .
	gndo_£t_rx_mode
 = 
igbvf_£t_mu…i
,

2577 .
	gndo_£t_mac_addªss
 = 
igbvf_£t_mac
,

2578 .
	gndo_ch™ge_mtu
 = 
igbvf_ch™ge_mtu
,

2579 .
	gndo_do_io˘l
 = 
igbvf_io˘l
,

2580 .
	gndo_tx_timeout
 = 
igbvf_tx_timeout
,

2581 .
	gndo_vœn_rx_add_vid
 = 
igbvf_vœn_rx_add_vid
,

2582 .
	gndo_vœn_rx_kûl_vid
 = 
igbvf_vœn_rx_kûl_vid
,

2583 #ifde‡
CONFIG_NET_POLL_CONTROLLER


2584 .
	gndo_pﬁl_c⁄åﬁÀr
 = 
igbvf_√çﬁl
,

2586 .
	gndo_£t_„©uªs
 = 
igbvf_£t_„©uªs
,

2600 
__devöô
 
	$igbvf_¥obe
(
pci_dev
 *
pdev
,

2601 c⁄° 
pci_devi˚_id
 *
ít
)

2603 
√t_devi˚
 *
√tdev
;

2604 
igbvf_ad≠ãr
 *
ad≠ãr
;

2605 
e1000_hw
 *
hw
;

2606 c⁄° 
igbvf_öfo
 *
ei
 = 
igbvf_öfo_tbl
[
ít
->
drivî_d©a
];

2608 
ˇrds_found
;

2609 
îr
, 
pci_usög_dac
;

2610 
	`¥ötk
(
KERN_INFO
 "[DVFA]Çetdev.c: msg 1: start of igbvfÖrobe");

2611 
îr
 = 
	`pci_íabÀ_devi˚_mem
(
pdev
);

2612 i‡(
îr
)

2613  
îr
;

2614 
pci_usög_dac
 = 0;

2615 
îr
 = 
	`dma_£t_mask
(&
pdev
->
dev
, 
	`DMA_BIT_MASK
(64));

2616 i‡(!
îr
) {

2617 
îr
 = 
	`dma_£t_cohîít_mask
(&
pdev
->
dev
, 
	`DMA_BIT_MASK
(64));

2618 i‡(!
îr
)

2619 
pci_usög_dac
 = 1;

2621 
îr
 = 
	`dma_£t_mask
(&
pdev
->
dev
, 
	`DMA_BIT_MASK
(32));

2622 i‡(
îr
) {

2623 
îr
 = 
	`dma_£t_cohîít_mask
(&
pdev
->
dev
,

2624 
	`DMA_BIT_MASK
(32));

2625 i‡(
îr
) {

2626 
	`dev_îr
(&
pdev
->
dev
, "No usable DMA "

2628 
îr_dma
;

2633 
îr
 = 
	`pci_ªque°_ªgi⁄s
(
pdev
, 
igbvf_drivî_«me
);

2634 i‡(
îr
)

2635 
îr_pci_ªg
;

2637 
	`pci_£t_ma°î
(
pdev
);

2639 
îr
 = -
ENOMEM
;

2640 
√tdev
 = 
	`Æloc_ëhîdev
((
igbvf_ad≠ãr
));

2641 i‡(!
√tdev
)

2642 
îr_Æloc_ëhîdev
;

2644 
	`SET_NETDEV_DEV
(
√tdev
, &
pdev
->
dev
);

2646 
	`pci_£t_drvd©a
(
pdev
, 
√tdev
);

2647 
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2648 
hw
 = &
ad≠ãr
->hw;

2649 
ad≠ãr
->
√tdev
 =Çetdev;

2650 
ad≠ãr
->
pdev
 =Ödev;

2651 
ad≠ãr
->
ei
 =Éi;

2652 
ad≠ãr
->
pba
 = 
ei
->pba;

2653 
ad≠ãr
->
Êags
 = 
ei
->flags;

2654 
ad≠ãr
->
hw
.
back
 =ádapter;

2655 
ad≠ãr
->
hw
.
mac
.
ty≥
 = 
ei
->mac;

2656 
ad≠ãr
->
msg_íabÀ
 = 
	`√tif_msg_öô
(
debug
, 
DEFAULT_MSG_ENABLE
);

2660 
hw
->
víd‹_id
 = 
pdev
->
víd‹
;

2661 
hw
->
devi˚_id
 = 
pdev
->
devi˚
;

2662 
hw
->
subsy°em_víd‹_id
 = 
pdev
->
subsy°em_víd‹
;

2663 
hw
->
subsy°em_devi˚_id
 = 
pdev
->
subsy°em_devi˚
;

2664 
hw
->
ªvisi⁄_id
 = 
pdev
->
ªvisi⁄
;

2666 
îr
 = -
EIO
;

2667 
ad≠ãr
->
hw
.
hw_addr
 = 
	`i‹em≠
(
	`pci_ªsour˚_°¨t
(
pdev
, 0),

2668 
	`pci_ªsour˚_Àn
(
pdev
, 0));

2670 i‡(!
ad≠ãr
->
hw
.
hw_addr
)

2671 
îr_i‹em≠
;

2673 i‡(
ei
->
gë_v¨ü¡s
) {

2674 
îr
 = 
ei
->
	`gë_v¨ü¡s
(
ad≠ãr
);

2675 i‡(
îr
)

2676 
îr_i‹em≠
;

2680 
îr
 = 
	`igbvf_sw_öô
(
ad≠ãr
);

2681 i‡(
îr
)

2682 
îr_sw_öô
;

2685 
√tdev
->
√tdev_›s
 = &
igbvf_√tdev_›s
;

2687 
	`igbvf_£t_ëhtoﬁ_›s
(
√tdev
);

2688 
√tdev
->
w©chdog_timeo
 = 5 * 
HZ
;

2689 
	`°∫˝y
(
√tdev
->
«me
, 
	`pci_«me
(
pdev
), (netdev->name) - 1);

2691 
ad≠ãr
->
bd_numbî
 = 
ˇrds_found
++;

2693 
√tdev
->
hw_„©uªs
 = 
NETIF_F_SG
 |

2694 
NETIF_F_IP_CSUM
 |

2695 
NETIF_F_IPV6_CSUM
 |

2696 
NETIF_F_TSO
 |

2697 
NETIF_F_TSO6
 |

2698 
NETIF_F_RXCSUM
;

2700 
√tdev
->
„©uªs
 =Çëdev->
hw_„©uªs
 |

2701 
NETIF_F_HW_VLAN_TX
 |

2702 
NETIF_F_HW_VLAN_RX
 |

2703 
NETIF_F_HW_VLAN_FILTER
;

2705 i‡(
pci_usög_dac
)

2706 
√tdev
->
„©uªs
 |
NETIF_F_HIGHDMA
;

2708 
√tdev
->
vœn_„©uªs
 |
NETIF_F_TSO
;

2709 
√tdev
->
vœn_„©uªs
 |
NETIF_F_TSO6
;

2710 
√tdev
->
vœn_„©uªs
 |
NETIF_F_IP_CSUM
;

2711 
√tdev
->
vœn_„©uªs
 |
NETIF_F_IPV6_CSUM
;

2712 
√tdev
->
vœn_„©uªs
 |
NETIF_F_SG
;

2715 
îr
 = 
hw
->
mac
.
›s
.
	`ª£t_hw
(hw);

2716 i‡(
îr
) {

2717 
	`dev_öfo
(&
pdev
->
dev
,

2720 
	`ëh_hw_addr_øndom
(
√tdev
);

2721 
	`mem˝y
(
ad≠ãr
->
hw
.
mac
.
addr
, 
√tdev
->
dev_addr
,

2722 
√tdev
->
addr_Àn
);

2724 
îr
 = 
hw
->
mac
.
›s
.
	`ªad_mac_addr
(hw);

2725 i‡(
îr
) {

2726 
	`dev_îr
(&
pdev
->
dev
, "ErrorÑeading MACáddress\n");

2727 
îr_hw_öô
;

2729 
	`mem˝y
(
√tdev
->
dev_addr
, 
ad≠ãr
->
hw
.
mac
.
addr
,

2730 
√tdev
->
addr_Àn
);

2733 i‡(!
	`is_vÆid_ëhî_addr
(
√tdev
->
dev_addr
)) {

2734 
	`dev_îr
(&
pdev
->
dev
, "Invalid MAC Address: %pM\n",

2735 
√tdev
->
dev_addr
);

2736 
îr
 = -
EIO
;

2737 
îr_hw_öô
;

2740 
	`mem˝y
(
√tdev
->
≥rm_addr
,Çëdev->
dev_addr
,Çëdev->
addr_Àn
);

2742 
	`£tup_timî
(&
ad≠ãr
->
w©chdog_timî
, &
igbvf_w©chdog
,

2743 (Ë
ad≠ãr
);

2745 
	`INIT_WORK
(&
ad≠ãr
->
ª£t_èsk
, 
igbvf_ª£t_èsk
);

2746 
	`INIT_WORK
(&
ad≠ãr
->
w©chdog_èsk
, 
igbvf_w©chdog_èsk
);

2749 
ad≠ãr
->
rx_rög
->
cou¡
 = 1024;

2750 
ad≠ãr
->
tx_rög
->
cou¡
 = 1024;

2753 
	`igbvf_ª£t
(
ad≠ãr
);

2755 
	`°r˝y
(
√tdev
->
«me
, "eth%d");

2756 
îr
 = 
	`ªgi°î_√tdev
(
√tdev
);

2757 i‡(
îr
)

2758 
îr_hw_öô
;

2761 
	`√tif_ˇºõr_off
(
√tdev
);

2762 
	`√tif_°›_queue
(
√tdev
);

2764 
	`igbvf_¥öt_devi˚_öfo
(
ad≠ãr
);

2766 
	`igbvf_öôülize_œ°_cou¡î_°©s
(
ad≠ãr
);

2770 
îr_hw_öô
:

2771 
	`k‰ì
(
ad≠ãr
->
tx_rög
);

2772 
	`k‰ì
(
ad≠ãr
->
rx_rög
);

2773 
îr_sw_öô
:

2774 
	`igbvf_ª£t_öãºu±_ˇ∑bûôy
(
ad≠ãr
);

2775 
	`iounm≠
(
ad≠ãr
->
hw
.
hw_addr
);

2776 
îr_i‹em≠
:

2777 
	`‰ì_√tdev
(
√tdev
);

2778 
îr_Æloc_ëhîdev
:

2779 
	`pci_ªÀa£_ªgi⁄s
(
pdev
);

2780 
îr_pci_ªg
:

2781 
îr_dma
:

2782 
	`pci_dißbÀ_devi˚
(
pdev
);

2783  
îr
;

2784 
	}
}

2795 
__devexô
 
	$igbvf_ªmove
(
pci_dev
 *
pdev
)

2797 
√t_devi˚
 *
√tdev
 = 
	`pci_gë_drvd©a
(
pdev
);

2798 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

2799 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

2805 
	`£t_bô
(
__IGBVF_DOWN
, &
ad≠ãr
->
°©e
);

2806 
	`dñ_timî_sync
(&
ad≠ãr
->
w©chdog_timî
);

2808 
	`ˇn˚l_w‹k_sync
(&
ad≠ãr
->
ª£t_èsk
);

2809 
	`ˇn˚l_w‹k_sync
(&
ad≠ãr
->
w©chdog_èsk
);

2811 
	`uƒegi°î_√tdev
(
√tdev
);

2813 
	`igbvf_ª£t_öãºu±_ˇ∑bûôy
(
ad≠ãr
);

2819 
	`√tif_«pi_dñ
(&
ad≠ãr
->
rx_rög
->
«pi
);

2820 
	`k‰ì
(
ad≠ãr
->
tx_rög
);

2821 
	`k‰ì
(
ad≠ãr
->
rx_rög
);

2823 
	`iounm≠
(
hw
->
hw_addr
);

2824 i‡(
hw
->
Êash_addªss
)

2825 
	`iounm≠
(
hw
->
Êash_addªss
);

2826 
	`pci_ªÀa£_ªgi⁄s
(
pdev
);

2828 
	`‰ì_√tdev
(
√tdev
);

2830 
	`pci_dißbÀ_devi˚
(
pdev
);

2831 
	}
}

2834 
pci_îr‹_h™dÀrs
 
	gigbvf_îr_h™dÀr
 = {

2835 .
îr‹_dëe˘ed
 = 
igbvf_io_îr‹_dëe˘ed
,

2836 .
	g¶Ÿ_ª£t
 = 
igbvf_io_¶Ÿ_ª£t
,

2837 .
	gªsume
 = 
igbvf_io_ªsume
,

2840 
DEFINE_PCI_DEVICE_TABLE
(
igbvf_pci_tbl
) = {

2841 { 
PCI_VDEVICE
(
INTEL
, 
E1000_DEV_ID_82576_VF
), 
bﬂrd_vf
 },

2842 { 
PCI_VDEVICE
(
INTEL
, 
E1000_DEV_ID_I350_VF
), 
bﬂrd_i350_vf
 },

2845 
MODULE_DEVICE_TABLE
(
pci
, 
igbvf_pci_tbl
);

2848 
pci_drivî
 
	gigbvf_drivî
 = {

2849 .
«me
 = 
igbvf_drivî_«me
,

2850 .
	gid_èbÀ
 = 
igbvf_pci_tbl
,

2851 .
	g¥obe
 = 
igbvf_¥obe
,

2852 .
	gªmove
 = 
__devexô_p
(
igbvf_ªmove
),

2853 #ifde‡
CONFIG_PM


2855 .
	gsu•íd
 = 
igbvf_su•íd
,

2856 .
	gªsume
 = 
igbvf_ªsume
,

2858 .
	gshutdown
 = 
igbvf_shutdown
,

2859 .
	gîr_h™dÀr
 = &
igbvf_îr_h™dÀr


2868 
__öô
 
	$igbvf_öô_moduÀ
()

2870 
ªt
;

2871 
	`¥_öfo
("%†- vîsi⁄ %s\n", 
igbvf_drivî_°rög
, 
igbvf_drivî_vîsi⁄
);

2872 
	`¥_öfo
("%s\n", 
igbvf_c›yright
);

2874 
ªt
 = 
	`pci_ªgi°î_drivî
(&
igbvf_drivî
);

2876  
ªt
;

2877 
	}
}

2878 
moduÀ_öô
(
igbvf_öô_moduÀ
);

2886 
__exô
 
	$igbvf_exô_moduÀ
()

2888 
	`pci_uƒegi°î_drivî
(&
igbvf_drivî
);

2889 
	}
}

2890 
moduÀ_exô
(
igbvf_exô_moduÀ
);

2893 
MODULE_AUTHOR
("Intel Corporation, <e1000-devel@lists.sourceforge.net>");

2894 
MODULE_DESCRIPTION
("Intel(R) Gigabit Virtual Function Network Driver");

2895 
MODULE_LICENSE
("GPL");

2896 
MODULE_VERSION
(
DRV_VERSION
);

	@regs.h

28 #i‚de‡
_E1000_REGS_H_


29 
	#_E1000_REGS_H_


	)

31 
	#E1000_CTRL
 0x00000

	)

32 
	#E1000_STATUS
 0x00008

	)

33 
	#E1000_ITR
 0x000C4

	)

34 
	#E1000_EICR
 0x01580

	)

35 
	#E1000_EITR
(
_n
Ë(0x01680 + (0x4 * (_n)))

	)

36 
	#E1000_EICS
 0x01520

	)

37 
	#E1000_EIMS
 0x01524

	)

38 
	#E1000_EIMC
 0x01528

	)

39 
	#E1000_EIAC
 0x0152C

	)

40 
	#E1000_EIAM
 0x01530

	)

41 
	#E1000_IVAR0
 0x01700

	)

42 
	#E1000_IVAR_MISC
 0x01740

	)

51 
	#E1000_RDBAL
(
_n
) ((_n) < 4 ? (0x02800 + ((_n) * 0x100)) : \

52 (0x0C000 + ((
_n
Ë* 0x40)))

	)

53 
	#E1000_RDBAH
(
_n
) ((_n) < 4 ? (0x02804 + ((_n) * 0x100)) : \

54 (0x0C004 + ((
_n
Ë* 0x40)))

	)

55 
	#E1000_RDLEN
(
_n
) ((_n) < 4 ? (0x02808 + ((_n) * 0x100)) : \

56 (0x0C008 + ((
_n
Ë* 0x40)))

	)

57 
	#E1000_SRRCTL
(
_n
) ((_n) < 4 ? (0x0280C + ((_n) * 0x100)) : \

58 (0x0C00C + ((
_n
Ë* 0x40)))

	)

59 
	#E1000_RDH
(
_n
) ((_n) < 4 ? (0x02810 + ((_n) * 0x100)) : \

60 (0x0C010 + ((
_n
Ë* 0x40)))

	)

61 
	#E1000_RDT
(
_n
) ((_n) < 4 ? (0x02818 + ((_n) * 0x100)) : \

62 (0x0C018 + ((
_n
Ë* 0x40)))

	)

63 
	#E1000_RXDCTL
(
_n
) ((_n) < 4 ? (0x02828 + ((_n) * 0x100)) : \

64 (0x0C028 + ((
_n
Ë* 0x40)))

	)

65 
	#E1000_TDBAL
(
_n
) ((_n) < 4 ? (0x03800 + ((_n) * 0x100)) : \

66 (0x0E000 + ((
_n
Ë* 0x40)))

	)

67 
	#E1000_TDBAH
(
_n
) ((_n) < 4 ? (0x03804 + ((_n) * 0x100)) : \

68 (0x0E004 + ((
_n
Ë* 0x40)))

	)

69 
	#E1000_TDLEN
(
_n
) ((_n) < 4 ? (0x03808 + ((_n) * 0x100)) : \

70 (0x0E008 + ((
_n
Ë* 0x40)))

	)

71 
	#E1000_TDH
(
_n
) ((_n) < 4 ? (0x03810 + ((_n) * 0x100)) : \

72 (0x0E010 + ((
_n
Ë* 0x40)))

	)

73 
	#E1000_TDT
(
_n
) ((_n) < 4 ? (0x03818 + ((_n) * 0x100)) : \

74 (0x0E018 + ((
_n
Ë* 0x40)))

	)

75 
	#E1000_TXDCTL
(
_n
) ((_n) < 4 ? (0x03828 + ((_n) * 0x100)) : \

76 (0x0E028 + ((
_n
Ë* 0x40)))

	)

77 
	#E1000_DCA_TXCTRL
(
_n
Ë(0x03814 + (_¿<< 8))

	)

78 
	#E1000_DCA_RXCTRL
(
_n
Ë(0x02814 + (_¿<< 8))

	)

79 
	#E1000_RAL
(
_i
) (((_i) <= 15) ? (0x05400 + ((_i) * 8)) : \

80 (0x054E0 + ((
_i
 - 16Ë* 8)))

	)

81 
	#E1000_RAH
(
_i
) (((_i) <= 15) ? (0x05404 + ((_i) * 8)) : \

82 (0x054E4 + ((
_i
 - 16Ë* 8)))

	)

85 
	#E1000_VFGPRC
 0x00F10

	)

86 
	#E1000_VFGORC
 0x00F18

	)

87 
	#E1000_VFMPRC
 0x00F3C

	)

88 
	#E1000_VFGPTC
 0x00F14

	)

89 
	#E1000_VFGOTC
 0x00F34

	)

90 
	#E1000_VFGOTLBC
 0x00F50

	)

91 
	#E1000_VFGPTLBC
 0x00F44

	)

92 
	#E1000_VFGORLBC
 0x00F48

	)

93 
	#E1000_VFGPRLBC
 0x00F40

	)

96 
	#E1000_V2PMAILBOX
(
_n
Ë(0x00C40 + (4 * (_n)))

	)

97 
	#E1000_VMBMEM
(
_n
Ë(0x00800 + (64 * (_n)))

	)

100 
	#î32
(
ªg
Ë
	`ªadl
(
hw
->
hw_addr
 + 
E1000_
##ªg)

	)

101 
	#ew32
(
ªg
, 
vÆ
Ë
	`wrôñ
((vÆ), 
hw
->
hw_addr
 + 
E1000_
##ªg)

	)

102 
	#¨øy_î32
(
ªg
, 
off£t
) \

103 
	`ªadl
(
hw
->
hw_addr
 + 
E1000_
##
ªg
 + (
off£t
 << 2))

	)

104 
	#¨øy_ew32
(
ªg
, 
off£t
, 
vÆ
) \

105 
	`wrôñ
((
vÆ
), 
hw
->
hw_addr
 + 
E1000_
##
ªg
 + (
off£t
 << 2))

	)

106 
	#e1e_Êush
(Ë
	`î32
(
STATUS
)

	)

	@vf.c

28 
	~<löux/√tdevi˚.h
>

29 
	~"vf.h
"

30 
	~"igbvf.h
"

32 
s32
 
e1000_check_f‹_lök_vf
(
e1000_hw
 *
hw
);

33 
s32
 
e1000_gë_lök_up_öfo_vf
(
e1000_hw
 *
hw
, 
u16
 *
•ìd
,

34 
u16
 *
du∂ex
);

35 
s32
 
e1000_öô_hw_vf
(
e1000_hw
 *
hw
);

36 
s32
 
e1000_ª£t_hw_vf
(
e1000_hw
 *
hw
);

38 
e1000_upd©e_mc_addr_li°_vf
(
e1000_hw
 *
hw
, 
u8
 *,

39 
u32
, u32, u32);

40 
e1000_ør_£t_vf
(
e1000_hw
 *, 
u8
 *, 
u32
);

41 
s32
 
e1000_ªad_mac_addr_vf
(
e1000_hw
 *);

42 
s32
 
e1000_£t_v·a_vf
(
e1000_hw
 *, 
u16
, 
boﬁ
);

48 
s32
 
	$e1000_öô_mac_∑øms_vf
(
e1000_hw
 *
hw
)

50 
e1000_mac_öfo
 *
mac
 = &
hw
->mac;

53 
mac
->
mè_ªg_cou¡
 = 128;

55 
mac
->
ør_íåy_cou¡
 = 1;

59 
mac
->
›s
.
ª£t_hw
 = 
e1000_ª£t_hw_vf
;

61 
mac
->
›s
.
öô_hw
 = 
e1000_öô_hw_vf
;

63 
mac
->
›s
.
check_f‹_lök
 = 
e1000_check_f‹_lök_vf
;

65 
mac
->
›s
.
gë_lök_up_öfo
 = 
e1000_gë_lök_up_öfo_vf
;

67 
mac
->
›s
.
upd©e_mc_addr_li°
 = 
e1000_upd©e_mc_addr_li°_vf
;

69 
mac
->
›s
.
ør_£t
 = 
e1000_ør_£t_vf
;

71 
mac
->
›s
.
ªad_mac_addr
 = 
e1000_ªad_mac_addr_vf
;

73 
mac
->
›s
.
£t_v·a
 = 
e1000_£t_v·a_vf
;

75  
E1000_SUCCESS
;

76 
	}
}

82 
	$e1000_öô_fun˘i⁄_poöãrs_vf
(
e1000_hw
 *
hw
)

84 
hw
->
mac
.
›s
.
öô_∑øms
 = 
e1000_öô_mac_∑øms_vf
;

85 
hw
->
mbx
.
›s
.
öô_∑øms
 = 
e1000_öô_mbx_∑øms_vf
;

86 
	}
}

97 
s32
 
	$e1000_gë_lök_up_öfo_vf
(
e1000_hw
 *
hw
, 
u16
 *
•ìd
,

98 
u16
 *
du∂ex
)

100 
s32
 
°©us
;

102 
°©us
 = 
	`î32
(
STATUS
);

103 i‡(
°©us
 & 
E1000_STATUS_SPEED_1000
)

104 *
•ìd
 = 
SPEED_1000
;

105 i‡(
°©us
 & 
E1000_STATUS_SPEED_100
)

106 *
•ìd
 = 
SPEED_100
;

108 *
•ìd
 = 
SPEED_10
;

110 i‡(
°©us
 & 
E1000_STATUS_FD
)

111 *
du∂ex
 = 
FULL_DUPLEX
;

113 *
du∂ex
 = 
HALF_DUPLEX
;

115  
E1000_SUCCESS
;

116 
	}
}

125 
s32
 
	$e1000_ª£t_hw_vf
(
e1000_hw
 *
hw
)

127 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

128 
u32
 
timeout
 = 
E1000_VF_INIT_TIMEOUT
;

129 
u32
 
ªt_vÆ
 = -
E1000_ERR_MAC_INIT
;

130 
u32
 
msgbuf
[3];

131 
u8
 *
addr
 = (u8 *)(&
msgbuf
[1]);

132 
u32
 
˘æ
;

135 
˘æ
 = 
	`î32
(
CTRL
);

136 
	`ew32
(
CTRL
, 
˘æ
 | 
E1000_CTRL_RST
);

139 !
mbx
->
›s
.
	`check_f‹_r°
(
hw
Ë&& 
timeout
) {

140 
timeout
--;

141 
	`udñay
(5);

144 i‡(
timeout
) {

146 
mbx
->
timeout
 = 
E1000_VF_MBX_INIT_TIMEOUT
;

149 
msgbuf
[0] = 
E1000_VF_RESET
;

150 
mbx
->
›s
.
	`wrôe_po°ed
(
hw
, 
msgbuf
, 1);

152 
	`m¶ìp
(10);

155 
ªt_vÆ
 = 
mbx
->
›s
.
	`ªad_po°ed
(
hw
, 
msgbuf
, 3);

156 i‡(!
ªt_vÆ
) {

157 i‡(
msgbuf
[0] =(
E1000_VF_RESET
 | 
E1000_VT_MSGTYPE_ACK
))

158 
	`mem˝y
(
hw
->
mac
.
≥rm_addr
, 
addr
, 6);

160 
ªt_vÆ
 = -
E1000_ERR_MAC_INIT
;

164  
ªt_vÆ
;

165 
	}
}

173 
s32
 
	$e1000_öô_hw_vf
(
e1000_hw
 *
hw
)

176 
	`e1000_ør_£t_vf
(
hw
, hw->
mac
.
addr
, 0);

178  
E1000_SUCCESS
;

179 
	}
}

190 
u32
 
	$e1000_hash_mc_addr_vf
(
e1000_hw
 *
hw
, 
u8
 *
mc_addr
)

192 
u32
 
hash_vÆue
, 
hash_mask
;

193 
u8
 
bô_shi·
 = 0;

196 
hash_mask
 = (
hw
->
mac
.
mè_ªg_cou¡
 * 32) - 1;

202 
hash_mask
 >> 
bô_shi·
 != 0xFF)

203 
bô_shi·
++;

205 
hash_vÆue
 = 
hash_mask
 & (((
mc_addr
[4] >> (8 - 
bô_shi·
)) |

206 (((
u16
Ë
mc_addr
[5]Ë<< 
bô_shi·
)));

208  
hash_vÆue
;

209 
	}
}

224 
	$e1000_upd©e_mc_addr_li°_vf
(
e1000_hw
 *
hw
,

225 
u8
 *
mc_addr_li°
, 
u32
 
mc_addr_cou¡
,

226 
u32
 
ør_u£d_cou¡
, u32 
ør_cou¡
)

228 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

229 
u32
 
msgbuf
[
E1000_VFMAILBOX_SIZE
];

230 
u16
 *
hash_li°
 = (u16 *)&
msgbuf
[1];

231 
u32
 
hash_vÆue
;

232 
u32
 
˙t
, 
i
;

243 
˙t
 = (
mc_addr_cou¡
 > 30) ? 30 : mc_addr_count;

244 
msgbuf
[0] = 
E1000_VF_SET_MULTICAST
;

245 
msgbuf
[0] |
˙t
 << 
E1000_VT_MSGINFO_SHIFT
;

247 
i
 = 0; i < 
˙t
; i++) {

248 
hash_vÆue
 = 
	`e1000_hash_mc_addr_vf
(
hw
, 
mc_addr_li°
);

249 
hash_li°
[
i
] = 
hash_vÆue
 & 0x0FFFF;

250 
mc_addr_li°
 +
ETH_ALEN
;

253 
mbx
->
›s
.
	`wrôe_po°ed
(
hw
, 
msgbuf
, 
E1000_VFMAILBOX_SIZE
);

254 
	}
}

262 
s32
 
	$e1000_£t_v·a_vf
(
e1000_hw
 *
hw
, 
u16
 
vid
, 
boﬁ
 
£t
)

264 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

265 
u32
 
msgbuf
[2];

266 
s32
 
îr
;

268 
msgbuf
[0] = 
E1000_VF_SET_VLAN
;

269 
msgbuf
[1] = 
vid
;

271 i‡(
£t
)

272 
msgbuf
[0] |1 << 
E1000_VT_MSGINFO_SHIFT
;

274 
mbx
->
›s
.
	`wrôe_po°ed
(
hw
, 
msgbuf
, 2);

276 
îr
 = 
mbx
->
›s
.
	`ªad_po°ed
(
hw
, 
msgbuf
, 2);

278 
msgbuf
[0] &~
E1000_VT_MSGTYPE_CTS
;

281 i‡(!
îr
 && (
msgbuf
[0] =(
E1000_VF_SET_VLAN
 | 
E1000_VT_MSGTYPE_NACK
)))

282 
îr
 = -
E1000_ERR_MAC_INIT
;

284  
îr
;

285 
	}
}

291 
	$e1000_æpml_£t_vf
(
e1000_hw
 *
hw
, 
u16
 
max_size
)

293 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

294 
u32
 
msgbuf
[2];

296 
msgbuf
[0] = 
E1000_VF_SET_LPE
;

297 
msgbuf
[1] = 
max_size
;

299 
mbx
->
›s
.
	`wrôe_po°ed
(
hw
, 
msgbuf
, 2);

300 
	}
}

308 
	$e1000_ør_£t_vf
(
e1000_hw
 *
hw
, 
u8
 * 
addr
, 
u32
 
ödex
)

310 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

311 
u32
 
msgbuf
[3];

312 
u8
 *
msg_addr
 = (u8 *)(&
msgbuf
[1]);

313 
s32
 
ªt_vÆ
;

315 
	`mem£t
(
msgbuf
, 0, 12);

316 
msgbuf
[0] = 
E1000_VF_SET_MAC_ADDR
;

317 
	`mem˝y
(
msg_addr
, 
addr
, 6);

318 
ªt_vÆ
 = 
mbx
->
›s
.
	`wrôe_po°ed
(
hw
, 
msgbuf
, 3);

320 i‡(!
ªt_vÆ
)

321 
ªt_vÆ
 = 
mbx
->
›s
.
	`ªad_po°ed
(
hw
, 
msgbuf
, 3);

323 
msgbuf
[0] &~
E1000_VT_MSGTYPE_CTS
;

326 i‡(!
ªt_vÆ
 &&

327 (
msgbuf
[0] =(
E1000_VF_SET_MAC_ADDR
 | 
E1000_VT_MSGTYPE_NACK
)))

328 
	`e1000_ªad_mac_addr_vf
(
hw
);

330 
	`¥ötk
("[DVFA] vf.c : Returned fromÖfÑoutine:Çot usedÖerm_addr\n");

331 
	}
}

341 
	$dvÁ_£t_mac
(
√t_devi˚
 *
√tdev
, 
u8
 *
mac_addr
)

343 
igbvf_ad≠ãr
 *
ad≠ãr
 = 
	`√tdev_¥iv
(
√tdev
);

344 
e1000_hw
 *
hw
 = &
ad≠ãr
->hw;

345 
	`¥ötk
(
KERN_INFO
 "[DVFA] Inside vf.c: dvfa_set_mac(): callingÉ1000_rar_set_vf()\n");

346 
	`e1000_ør_£t_vf
(
hw
, 
mac_addr
,0);

347 
	`mem˝y
(
hw
->
mac
.
≥rm_addr
, 
mac_addr
, 
ETH_ALEN
);

348 
	`mem˝y
(
hw
->
mac
.
addr
, 
mac_addr
, 
ETH_ALEN
);

349 
	`mem˝y
(
√tdev
->
dev_addr
, 
mac_addr
,Çëdev->
addr_Àn
);

350 
	`mem˝y
(
√tdev
->
≥rm_addr
, 
mac_addr
,Çëdev->
addr_Àn
);

353 
	}
}

354 
EXPORT_SYMBOL
(
dvÁ_£t_mac
);

359 
s32
 
	$e1000_ªad_mac_addr_vf
(
e1000_hw
 *
hw
)

361 
	`mem˝y
(
hw
->
mac
.
addr
, hw->mac.
≥rm_addr
, 
ETH_ALEN
);

363  
E1000_SUCCESS
;

364 
	}
}

374 
s32
 
	$e1000_check_f‹_lök_vf
(
e1000_hw
 *
hw
)

376 
e1000_mbx_öfo
 *
mbx
 = &
hw
->mbx;

377 
e1000_mac_öfo
 *
mac
 = &
hw
->mac;

378 
s32
 
ªt_vÆ
 = 
E1000_SUCCESS
;

379 
u32
 
ö_msg
 = 0;

388 i‡(!
mbx
->
›s
.
	`check_f‹_r°
(
hw
Ë|| !mbx->
timeout
)

389 
mac
->
gë_lök_°©us
 = 
åue
;

391 i‡(!
mac
->
gë_lök_°©us
)

392 
out
;

395 i‡(!(
	`î32
(
STATUS
Ë& 
E1000_STATUS_LU
))

396 
out
;

400 i‡(
mbx
->
›s
.
	`ªad
(
hw
, &
ö_msg
, 1))

401 
out
;

404 i‡(!(
ö_msg
 & 
E1000_VT_MSGTYPE_CTS
)) {

406 i‡(
ö_msg
 & 
E1000_VT_MSGTYPE_NACK
)

407 
ªt_vÆ
 = -
E1000_ERR_MAC_INIT
;

408 
out
;

412 i‡(!
mbx
->
timeout
) {

413 
ªt_vÆ
 = -
E1000_ERR_MAC_INIT
;

414 
out
;

419 
mac
->
gë_lök_°©us
 = 
Ál£
;

421 
out
:

422  
ªt_vÆ
;

423 
	}
}

	@vf.h

28 #i‚de‡
_E1000_VF_H_


29 
	#_E1000_VF_H_


	)

31 
	~<löux/pci.h
>

32 
	~<löux/dñay.h
>

33 
	~<löux/öãºu±.h
>

34 
	~<löux/if_ëhî.h
>

36 
	~"ªgs.h
"

37 
	~"deföes.h
"

39 
	ge1000_hw
;

41 
	#E1000_DEV_ID_82576_VF
 0x10CA

	)

42 
	#E1000_DEV_ID_I350_VF
 0x1520

	)

43 
	#E1000_REVISION_0
 0

	)

44 
	#E1000_REVISION_1
 1

	)

45 
	#E1000_REVISION_2
 2

	)

46 
	#E1000_REVISION_3
 3

	)

47 
	#E1000_REVISION_4
 4

	)

49 
	#E1000_FUNC_0
 0

	)

50 
	#E1000_FUNC_1
 1

	)

58 
	#E1000_RAR_ENTRIES_VF
 1

	)

61 
	ue1000_adv_rx_desc
 {

63 
u64
 
	mpkt_addr
;

64 
u64
 
	mhdr_addr
;

65 } 
	mªad
;

69 
u32
 
	md©a
;

71 
u16
 
	mpkt_öfo
;

72 
u16
 
	mhdr_öfo
;

74 } 
	mhs_rss
;

75 } 
	mlo_dw‹d
;

77 
u32
 
	mrss
;

79 
u16
 
	mù_id
;

80 
u16
 
	mcsum
;

81 } 
	mcsum_ù
;

82 } 
	mhi_dw‹d
;

83 } 
	mlowî
;

85 
u32
 
	m°©us_îr‹
;

86 
u16
 
	mÀngth
;

87 
u16
 
	mvœn
;

88 } 
	muµî
;

89 } 
	mwb
;

92 
	#E1000_RXDADV_HDRBUFLEN_MASK
 0x7FE0

	)

93 
	#E1000_RXDADV_HDRBUFLEN_SHIFT
 5

	)

96 
	ue1000_adv_tx_desc
 {

98 
u64
 
	mbuf„r_addr
;

99 
u32
 
	mcmd_ty≥_Àn
;

100 
u32
 
	mﬁöfo_°©us
;

101 } 
	mªad
;

103 
u64
 
	mrsvd
;

104 
u32
 
	mnxt£q_£ed
;

105 
u32
 
	m°©us
;

106 } 
	mwb
;

110 
	#E1000_ADVTXD_DTYP_CTXT
 0x00200000

	)

111 
	#E1000_ADVTXD_DTYP_DATA
 0x00300000

	)

112 
	#E1000_ADVTXD_DCMD_EOP
 0x01000000

	)

113 
	#E1000_ADVTXD_DCMD_IFCS
 0x02000000

	)

114 
	#E1000_ADVTXD_DCMD_RS
 0x08000000

	)

115 
	#E1000_ADVTXD_DCMD_DEXT
 0x20000000

	)

116 
	#E1000_ADVTXD_DCMD_VLE
 0x40000000

	)

117 
	#E1000_ADVTXD_DCMD_TSE
 0x80000000

	)

118 
	#E1000_ADVTXD_PAYLEN_SHIFT
 14

	)

121 
	se1000_adv_tx_c⁄ãxt_desc
 {

122 
u32
 
	mvœn_macù_Àns
;

123 
u32
 
	m£qnum_£ed
;

124 
u32
 
	mty≥_tucmd_mlhl
;

125 
u32
 
	mmss_l4Àn_idx
;

128 
	#E1000_ADVTXD_MACLEN_SHIFT
 9

	)

129 
	#E1000_ADVTXD_TUCMD_IPV4
 0x00000400

	)

130 
	#E1000_ADVTXD_TUCMD_L4T_TCP
 0x00000800

	)

131 
	#E1000_ADVTXD_L4LEN_SHIFT
 8

	)

132 
	#E1000_ADVTXD_MSS_SHIFT
 16

	)

134 
	ee1000_mac_ty≥
 {

135 
	me1000_undeföed
 = 0,

136 
	me1000_vÁd≠t
,

137 
	me1000_vÁd≠t_i350
,

138 
	me1000_num_macs


141 
	se1000_vf_°©s
 {

142 
u64
 
	mba£_g¥c
;

143 
u64
 
	mba£_g±c
;

144 
u64
 
	mba£_g‹c
;

145 
u64
 
	mba£_gŸc
;

146 
u64
 
	mba£_m¥c
;

147 
u64
 
	mba£_gŸlbc
;

148 
u64
 
	mba£_g±lbc
;

149 
u64
 
	mba£_g‹lbc
;

150 
u64
 
	mba£_g¥lbc
;

152 
u32
 
	mœ°_g¥c
;

153 
u32
 
	mœ°_g±c
;

154 
u32
 
	mœ°_g‹c
;

155 
u32
 
	mœ°_gŸc
;

156 
u32
 
	mœ°_m¥c
;

157 
u32
 
	mœ°_gŸlbc
;

158 
u32
 
	mœ°_g±lbc
;

159 
u32
 
	mœ°_g‹lbc
;

160 
u32
 
	mœ°_g¥lbc
;

162 
u64
 
	mg¥c
;

163 
u64
 
	mg±c
;

164 
u64
 
	mg‹c
;

165 
u64
 
	mgŸc
;

166 
u64
 
	mm¥c
;

167 
u64
 
	mgŸlbc
;

168 
u64
 
	mg±lbc
;

169 
u64
 
	mg‹lbc
;

170 
u64
 
	mg¥lbc
;

173 
	~"mbx.h
"

175 
	se1000_mac_›î©i⁄s
 {

177 
s32
 (*
öô_∑øms
)(
	me1000_hw
 *);

178 
s32
 (*
check_f‹_lök
)(
	me1000_hw
 *);

179 (*
	m˛ór_v·a
)(
	me1000_hw
 *);

180 
s32
 (*
gë_bus_öfo
)(
	me1000_hw
 *);

181 
s32
 (*
gë_lök_up_öfo
)(
	me1000_hw
 *, 
	mu16
 *, u16 *);

182 (*
	mupd©e_mc_addr_li°
)(
	me1000_hw
 *, 
	mu8
 *, 
	mu32
, u32, u32);

183 
s32
 (*
ª£t_hw
)(
	me1000_hw
 *);

184 
s32
 (*
öô_hw
)(
	me1000_hw
 *);

185 
s32
 (*
£tup_lök
)(
	me1000_hw
 *);

186 (*
	mwrôe_v·a
)(
	me1000_hw
 *, 
	mu32
, u32);

187 (*
	mmè_£t
)(
	me1000_hw
 *, 
	mu32
);

188 (*
	mør_£t
)(
	me1000_hw
 *, 
	mu8
*, 
	mu32
);

189 
s32
 (*
ªad_mac_addr
)(
	me1000_hw
 *);

190 
s32
 (*
£t_v·a
)(
	me1000_hw
 *, 
	mu16
, 
	mboﬁ
);

193 
	se1000_mac_öfo
 {

194 
e1000_mac_›î©i⁄s
 
	m›s
;

195 
u8
 
	maddr
[6];

196 
u8
 
	m≥rm_addr
[6];

198 
e1000_mac_ty≥
 
	mty≥
;

200 
u16
 
	mmè_ªg_cou¡
;

201 
u16
 
	mør_íåy_cou¡
;

203 
boﬁ
 
	mgë_lök_°©us
;

206 
	se1000_mbx_›î©i⁄s
 {

207 
s32
 (*
öô_∑øms
)(
e1000_hw
 *
	mhw
);

208 
s32
 (*
ªad
)(
	me1000_hw
 *, 
	mu32
 *, 
	mu16
);

209 
s32
 (*
wrôe
)(
	me1000_hw
 *, 
	mu32
 *, 
	mu16
);

210 
s32
 (*
ªad_po°ed
)(
	me1000_hw
 *, 
	mu32
 *, 
	mu16
);

211 
s32
 (*
wrôe_po°ed
)(
	me1000_hw
 *, 
	mu32
 *, 
	mu16
);

212 
s32
 (*
check_f‹_msg
)(
	me1000_hw
 *);

213 
s32
 (*
check_f‹_ack
)(
	me1000_hw
 *);

214 
s32
 (*
check_f‹_r°
)(
	me1000_hw
 *);

217 
	se1000_mbx_°©s
 {

218 
u32
 
	mmsgs_tx
;

219 
u32
 
	mmsgs_rx
;

221 
u32
 
	macks
;

222 
u32
 
	mªqs
;

223 
u32
 
	mr°s
;

226 
	se1000_mbx_öfo
 {

227 
e1000_mbx_›î©i⁄s
 
	m›s
;

228 
e1000_mbx_°©s
 
	m°©s
;

229 
u32
 
	mtimeout
;

230 
u32
 
	mu£c_dñay
;

231 
u16
 
	msize
;

234 
	se1000_dev_•ec_vf
 {

235 
u32
 
	mvf_numbî
;

236 
u32
 
	mv2p_maûbox
;

239 
	se1000_hw
 {

240 *
	mback
;

242 
u8
 
__iomem
 *
	mhw_addr
;

243 
u8
 
__iomem
 *
	mÊash_addªss
;

244 
	mio_ba£
;

246 
e1000_mac_öfo
 
	mmac
;

247 
e1000_mbx_öfo
 
	mmbx
;

250 
e1000_dev_•ec_vf
 
	mvf
;

251 } 
	mdev_•ec
;

253 
u16
 
	mdevi˚_id
;

254 
u16
 
	msubsy°em_víd‹_id
;

255 
u16
 
	msubsy°em_devi˚_id
;

256 
u16
 
	mvíd‹_id
;

258 
u8
 
	mªvisi⁄_id
;

262 
e1000_æpml_£t_vf
(
e1000_hw
 *, 
u16
);

263 
e1000_öô_fun˘i⁄_poöãrs_vf
(
e1000_hw
 *
hw
);

	@/usr/include/linux/ethtool.h

13 #i‚de‡
_LINUX_ETHTOOL_H


14 
	#_LINUX_ETHTOOL_H


	)

16 
	~<löux/ty≥s.h
>

17 
	~<löux/if_ëhî.h
>

20 
	sëhtoﬁ_cmd
 {

21 
__u32
 
	mcmd
;

22 
__u32
 
	msuµ‹ãd
;

23 
__u32
 
	madvîtisög
;

24 
__u16
 
	m•ìd
;

28 
__u8
 
	mdu∂ex
;

29 
__u8
 
	mp‹t
;

30 
__u8
 
	mphy_addªss
;

31 
__u8
 
	må™s˚ivî
;

32 
__u8
 
	maut⁄eg
;

33 
__u8
 
	mmdio_suµ‹t
;

34 
__u32
 
	mmaxtxpkt
;

35 
__u32
 
	mmaxrxpkt
;

36 
__u16
 
	m•ìd_hi
;

40 
__u8
 
	mëh_ç_mdix
;

41 
__u8
 
	mª£rved2
;

42 
__u32
 
	mÕ_advîtisög
;

43 
__u32
 
	mª£rved
[2];

46 
__ölöe__
 
	$ëhtoﬁ_cmd_•ìd_£t
(
ëhtoﬁ_cmd
 *
ï
,

47 
__u32
 
•ìd
)

50 
ï
->
•ìd
 = (
__u16
)speed;

51 
ï
->
•ìd_hi
 = (
__u16
)(
•ìd
 >> 16);

52 
	}
}

54 
__ölöe__
 
__u32
 
	$ëhtoﬁ_cmd_•ìd
(c⁄° 
ëhtoﬁ_cmd
 *
ï
)

56  (
ï
->
•ìd_hi
 << 16Ë|Ép->
•ìd
;

57 
	}
}

59 
	#ETHTOOL_FWVERS_LEN
 32

	)

60 
	#ETHTOOL_BUSINFO_LEN
 32

	)

62 
	sëhtoﬁ_drvöfo
 {

63 
__u32
 
	mcmd
;

64 
	mdrivî
[32];

65 
	mvîsi⁄
[32];

66 
	mfw_vîsi⁄
[
ETHTOOL_FWVERS_LEN
];

67 
	mbus_öfo
[
ETHTOOL_BUSINFO_LEN
];

69 
	mª£rved1
[32];

70 
	mª£rved2
[12];

78 
__u32
 
	mn_¥iv_Êags
;

79 
__u32
 
	mn_°©s
;

80 
__u32
 
	mã°öfo_Àn
;

81 
__u32
 
	mìdump_Àn
;

82 
__u32
 
	mªgdump_Àn
;

85 
	#SOPASS_MAX
 6

	)

87 
	sëhtoﬁ_wﬁöfo
 {

88 
__u32
 
	mcmd
;

89 
__u32
 
	msuµ‹ãd
;

90 
__u32
 
	mwﬁ›ts
;

91 
__u8
 
	ms›ass
[
SOPASS_MAX
];

95 
	sëhtoﬁ_vÆue
 {

96 
__u32
 
	mcmd
;

97 
__u32
 
	md©a
;

101 
	sëhtoﬁ_ªgs
 {

102 
__u32
 
	mcmd
;

103 
__u32
 
	mvîsi⁄
;

104 
__u32
 
	mÀn
;

105 
__u8
 
	md©a
[0];

109 
	sëhtoﬁ_ì¥om
 {

110 
__u32
 
	mcmd
;

111 
__u32
 
	mmagic
;

112 
__u32
 
	moff£t
;

113 
__u32
 
	mÀn
;

114 
__u8
 
	md©a
[0];

189 
	sëhtoﬁ_cﬂÀs˚
 {

190 
__u32
 
	mcmd
;

191 
__u32
 
	mrx_cﬂÀs˚_u£cs
;

192 
__u32
 
	mrx_max_cﬂÀs˚d_‰ames
;

193 
__u32
 
	mrx_cﬂÀs˚_u£cs_úq
;

194 
__u32
 
	mrx_max_cﬂÀs˚d_‰ames_úq
;

195 
__u32
 
	mtx_cﬂÀs˚_u£cs
;

196 
__u32
 
	mtx_max_cﬂÀs˚d_‰ames
;

197 
__u32
 
	mtx_cﬂÀs˚_u£cs_úq
;

198 
__u32
 
	mtx_max_cﬂÀs˚d_‰ames_úq
;

199 
__u32
 
	m°©s_block_cﬂÀs˚_u£cs
;

200 
__u32
 
	mu£_ad≠tive_rx_cﬂÀs˚
;

201 
__u32
 
	mu£_ad≠tive_tx_cﬂÀs˚
;

202 
__u32
 
	mpkt_øã_low
;

203 
__u32
 
	mrx_cﬂÀs˚_u£cs_low
;

204 
__u32
 
	mrx_max_cﬂÀs˚d_‰ames_low
;

205 
__u32
 
	mtx_cﬂÀs˚_u£cs_low
;

206 
__u32
 
	mtx_max_cﬂÀs˚d_‰ames_low
;

207 
__u32
 
	mpkt_øã_high
;

208 
__u32
 
	mrx_cﬂÀs˚_u£cs_high
;

209 
__u32
 
	mrx_max_cﬂÀs˚d_‰ames_high
;

210 
__u32
 
	mtx_cﬂÀs˚_u£cs_high
;

211 
__u32
 
	mtx_max_cﬂÀs˚d_‰ames_high
;

212 
__u32
 
	møã_ßm∂e_öãrvÆ
;

216 
	sëhtoﬁ_rög∑øm
 {

217 
__u32
 
	mcmd
;

223 
__u32
 
	mrx_max_≥ndög
;

224 
__u32
 
	mrx_möi_max_≥ndög
;

225 
__u32
 
	mrx_jumbo_max_≥ndög
;

226 
__u32
 
	mtx_max_≥ndög
;

231 
__u32
 
	mrx_≥ndög
;

232 
__u32
 
	mrx_möi_≥ndög
;

233 
__u32
 
	mrx_jumbo_≥ndög
;

234 
__u32
 
	mtx_≥ndög
;

253 
	sëhtoﬁ_ch™√ls
 {

254 
__u32
 
	mcmd
;

255 
__u32
 
	mmax_rx
;

256 
__u32
 
	mmax_tx
;

257 
__u32
 
	mmax_Ÿhî
;

258 
__u32
 
	mmax_comböed
;

259 
__u32
 
	mrx_cou¡
;

260 
__u32
 
	mtx_cou¡
;

261 
__u32
 
	mŸhî_cou¡
;

262 
__u32
 
	mcomböed_cou¡
;

266 
	sëhtoﬁ_∑u£∑øm
 {

267 
__u32
 
	mcmd
;

279 
__u32
 
	maut⁄eg
;

280 
__u32
 
	mrx_∑u£
;

281 
__u32
 
	mtx_∑u£
;

284 
	#ETH_GSTRING_LEN
 32

	)

285 
	eëhtoﬁ_°rög£t
 {

286 
	mETH_SS_TEST
 = 0,

287 
	mETH_SS_STATS
,

288 
	mETH_SS_PRIV_FLAGS
,

289 
	mETH_SS_NTUPLE_FILTERS
,

290 
	mETH_SS_FEATURES
,

294 
	sëhtoﬁ_g°rögs
 {

295 
__u32
 
	mcmd
;

296 
__u32
 
	m°rög_£t
;

297 
__u32
 
	mÀn
;

298 
__u8
 
	md©a
[0];

301 
	sëhtoﬁ_s£t_öfo
 {

302 
__u32
 
	mcmd
;

303 
__u32
 
	mª£rved
;

304 
__u64
 
	ms£t_mask
;

306 
__u32
 
	md©a
[0];

322 
	eëhtoﬁ_ã°_Êags
 {

323 
	mETH_TEST_FL_OFFLINE
 = (1 << 0),

324 
	mETH_TEST_FL_FAILED
 = (1 << 1),

325 
	mETH_TEST_FL_EXTERNAL_LB
 = (1 << 2),

326 
	mETH_TEST_FL_EXTERNAL_LB_DONE
 = (1 << 3),

330 
	sëhtoﬁ_ã°
 {

331 
__u32
 
	mcmd
;

332 
__u32
 
	mÊags
;

333 
__u32
 
	mª£rved
;

334 
__u32
 
	mÀn
;

335 
__u64
 
	md©a
[0];

339 
	sëhtoﬁ_°©s
 {

340 
__u32
 
	mcmd
;

341 
__u32
 
	mn_°©s
;

342 
__u64
 
	md©a
[0];

345 
	sëhtoﬁ_≥rm_addr
 {

346 
__u32
 
	mcmd
;

347 
__u32
 
	msize
;

348 
__u8
 
	md©a
[0];

360 
	eëhtoﬁ_Êags
 {

361 
	mETH_FLAG_TXVLAN
 = (1 << 7),

362 
	mETH_FLAG_RXVLAN
 = (1 << 8),

363 
	mETH_FLAG_LRO
 = (1 << 15),

364 
	mETH_FLAG_NTUPLE
 = (1 << 27),

365 
	mETH_FLAG_RXHASH
 = (1 << 28),

384 
	sëhtoﬁ_t˝ù4_•ec
 {

385 
__be32
 
	mù4§c
;

386 
__be32
 
	mù4d°
;

387 
__be16
 
	mp§c
;

388 
__be16
 
	mpd°
;

389 
__u8
 
	mtos
;

401 
	sëhtoﬁ_ah_e•ù4_•ec
 {

402 
__be32
 
	mù4§c
;

403 
__be32
 
	mù4d°
;

404 
__be32
 
	m•i
;

405 
__u8
 
	mtos
;

408 
	#ETH_RX_NFC_IP4
 1

	)

419 
	sëhtoﬁ_u§ù4_•ec
 {

420 
__be32
 
	mù4§c
;

421 
__be32
 
	mù4d°
;

422 
__be32
 
	ml4_4_byãs
;

423 
__u8
 
	mtos
;

424 
__u8
 
	mù_vî
;

425 
__u8
 
	m¥Ÿo
;

428 
	uëhtoﬁ_Êow_uni⁄
 {

429 
ëhtoﬁ_t˝ù4_•ec
 
	mt˝_ù4_•ec
;

430 
ëhtoﬁ_t˝ù4_•ec
 
	mudp_ù4_•ec
;

431 
ëhtoﬁ_t˝ù4_•ec
 
	ms˘p_ù4_•ec
;

432 
ëhtoﬁ_ah_e•ù4_•ec
 
	mah_ù4_•ec
;

433 
ëhtoﬁ_ah_e•ù4_•ec
 
	me•_ù4_•ec
;

434 
ëhtoﬁ_u§ù4_•ec
 
	mu§_ù4_•ec
;

435 
ëhhdr
 
	mëhî_•ec
;

436 
__u8
 
	mhd©a
[60];

439 
	sëhtoﬁ_Êow_ext
 {

440 
__be16
 
	mvœn_ëy≥
;

441 
__be16
 
	mvœn_tci
;

442 
__be32
 
	md©a
[2];

460 
	sëhtoﬁ_rx_Êow_•ec
 {

461 
__u32
 
	mÊow_ty≥
;

462 
ëhtoﬁ_Êow_uni⁄
 
	mh_u
;

463 
ëhtoﬁ_Êow_ext
 
	mh_ext
;

464 
ëhtoﬁ_Êow_uni⁄
 
	mm_u
;

465 
ëhtoﬁ_Êow_ext
 
	mm_ext
;

466 
__u64
 
	mrög_cookõ
;

467 
__u32
 
	mloˇti⁄
;

506 
	sëhtoﬁ_rxnfc
 {

507 
__u32
 
	mcmd
;

508 
__u32
 
	mÊow_ty≥
;

509 
__u64
 
	md©a
;

510 
ëhtoﬁ_rx_Êow_•ec
 
	mfs
;

511 
__u32
 
	mruÀ_˙t
;

512 
__u32
 
	mruÀ_locs
[0];

523 
	sëhtoﬁ_rxfh_ödú
 {

524 
__u32
 
	mcmd
;

525 
__u32
 
	msize
;

526 
__u32
 
	mrög_ödex
[0];

545 
	sëhtoﬁ_rx_¡u∂e_Êow_•ec
 {

546 
__u32
 
	mÊow_ty≥
;

548 
ëhtoﬁ_t˝ù4_•ec
 
	mt˝_ù4_•ec
;

549 
ëhtoﬁ_t˝ù4_•ec
 
	mudp_ù4_•ec
;

550 
ëhtoﬁ_t˝ù4_•ec
 
	ms˘p_ù4_•ec
;

551 
ëhtoﬁ_ah_e•ù4_•ec
 
	mah_ù4_•ec
;

552 
ëhtoﬁ_ah_e•ù4_•ec
 
	me•_ù4_•ec
;

553 
ëhtoﬁ_u§ù4_•ec
 
	mu§_ù4_•ec
;

554 
ëhhdr
 
	mëhî_•ec
;

555 
__u8
 
	mhd©a
[72];

556 } 
	mh_u
, 
	mm_u
;

558 
__u16
 
	mvœn_èg
;

559 
__u16
 
	mvœn_èg_mask
;

560 
__u64
 
	md©a
;

561 
__u64
 
	md©a_mask
;

563 
__s32
 
	ma˘i⁄
;

564 
	#ETHTOOL_RXNTUPLE_ACTION_DROP
 (-1Ë

	)

565 
	#ETHTOOL_RXNTUPLE_ACTION_CLEAR
 (-2Ë

	)

573 
	sëhtoﬁ_rx_¡u∂e
 {

574 
__u32
 
	mcmd
;

575 
ëhtoﬁ_rx_¡u∂e_Êow_•ec
 
	mfs
;

578 
	#ETHTOOL_FLASH_MAX_FILENAME
 128

	)

579 
	eëhtoﬁ_Êash_›_ty≥
 {

580 
	mETHTOOL_FLASH_ALL_REGIONS
 = 0,

584 
	sëhtoﬁ_Êash
 {

585 
__u32
 
	mcmd
;

586 
__u32
 
	mªgi⁄
;

587 
	md©a
[
ETHTOOL_FLASH_MAX_FILENAME
];

602 
	sëhtoﬁ_dump
 {

603 
__u32
 
	mcmd
;

604 
__u32
 
	mvîsi⁄
;

605 
__u32
 
	mÊag
;

606 
__u32
 
	mÀn
;

607 
__u8
 
	md©a
[0];

619 
	sëhtoﬁ_gë_„©uªs_block
 {

620 
__u32
 
	mavaûabÀ
;

621 
__u32
 
	mªque°ed
;

622 
__u32
 
	ma˘ive
;

623 
__u32
 
	m√vî_ch™ged
;

633 
	sëhtoﬁ_g„©uªs
 {

634 
__u32
 
	mcmd
;

635 
__u32
 
	msize
;

636 
ëhtoﬁ_gë_„©uªs_block
 
	m„©uªs
[0];

644 
	sëhtoﬁ_£t_„©uªs_block
 {

645 
__u32
 
	mvÆid
;

646 
__u32
 
	mªque°ed
;

655 
	sëhtoﬁ_s„©uªs
 {

656 
__u32
 
	mcmd
;

657 
__u32
 
	msize
;

658 
ëhtoﬁ_£t_„©uªs_block
 
	m„©uªs
[0];

686 
	eëhtoﬁ_s„©uªs_ªtvÆ_bôs
 {

687 
	mETHTOOL_F_UNSUPPORTED__BIT
,

688 
	mETHTOOL_F_WISH__BIT
,

689 
	mETHTOOL_F_COMPAT__BIT
,

692 
	#ETHTOOL_F_UNSUPPORTED
 (1 << 
ETHTOOL_F_UNSUPPORTED__BIT
)

	)

693 
	#ETHTOOL_F_WISH
 (1 << 
ETHTOOL_F_WISH__BIT
)

	)

694 
	#ETHTOOL_F_COMPAT
 (1 << 
ETHTOOL_F_COMPAT__BIT
)

	)

698 
	#ETHTOOL_GSET
 0x00000001

	)

699 
	#ETHTOOL_SSET
 0x00000002

	)

700 
	#ETHTOOL_GDRVINFO
 0x00000003

	)

701 
	#ETHTOOL_GREGS
 0x00000004

	)

702 
	#ETHTOOL_GWOL
 0x00000005

	)

703 
	#ETHTOOL_SWOL
 0x00000006

	)

704 
	#ETHTOOL_GMSGLVL
 0x00000007

	)

705 
	#ETHTOOL_SMSGLVL
 0x00000008

	)

706 
	#ETHTOOL_NWAY_RST
 0x00000009

	)

709 
	#ETHTOOL_GLINK
 0x0000000a

	)

710 
	#ETHTOOL_GEEPROM
 0x0000000b

	)

711 
	#ETHTOOL_SEEPROM
 0x0000000¯

	)

712 
	#ETHTOOL_GCOALESCE
 0x0000000ê

	)

713 
	#ETHTOOL_SCOALESCE
 0x0000000‡

	)

714 
	#ETHTOOL_GRINGPARAM
 0x00000010

	)

715 
	#ETHTOOL_SRINGPARAM
 0x00000011

	)

716 
	#ETHTOOL_GPAUSEPARAM
 0x00000012

	)

717 
	#ETHTOOL_SPAUSEPARAM
 0x00000013

	)

718 
	#ETHTOOL_GRXCSUM
 0x00000014

	)

719 
	#ETHTOOL_SRXCSUM
 0x00000015

	)

720 
	#ETHTOOL_GTXCSUM
 0x00000016

	)

721 
	#ETHTOOL_STXCSUM
 0x00000017

	)

722 
	#ETHTOOL_GSG
 0x00000018

	)

724 
	#ETHTOOL_SSG
 0x00000019

	)

726 
	#ETHTOOL_TEST
 0x0000001®

	)

727 
	#ETHTOOL_GSTRINGS
 0x0000001b

	)

728 
	#ETHTOOL_PHYS_ID
 0x0000001¯

	)

729 
	#ETHTOOL_GSTATS
 0x0000001d

	)

730 
	#ETHTOOL_GTSO
 0x0000001ê

	)

731 
	#ETHTOOL_STSO
 0x0000001‡

	)

732 
	#ETHTOOL_GPERMADDR
 0x00000020

	)

733 
	#ETHTOOL_GUFO
 0x00000021

	)

734 
	#ETHTOOL_SUFO
 0x00000022

	)

735 
	#ETHTOOL_GGSO
 0x00000023

	)

736 
	#ETHTOOL_SGSO
 0x00000024

	)

737 
	#ETHTOOL_GFLAGS
 0x00000025

	)

738 
	#ETHTOOL_SFLAGS
 0x00000026

	)

739 
	#ETHTOOL_GPFLAGS
 0x00000027

	)

740 
	#ETHTOOL_SPFLAGS
 0x00000028

	)

742 
	#ETHTOOL_GRXFH
 0x00000029

	)

743 
	#ETHTOOL_SRXFH
 0x0000002®

	)

744 
	#ETHTOOL_GGRO
 0x0000002b

	)

745 
	#ETHTOOL_SGRO
 0x0000002¯

	)

746 
	#ETHTOOL_GRXRINGS
 0x0000002d

	)

747 
	#ETHTOOL_GRXCLSRLCNT
 0x0000002ê

	)

748 
	#ETHTOOL_GRXCLSRULE
 0x0000002‡

	)

749 
	#ETHTOOL_GRXCLSRLALL
 0x00000030

	)

750 
	#ETHTOOL_SRXCLSRLDEL
 0x00000031

	)

751 
	#ETHTOOL_SRXCLSRLINS
 0x00000032

	)

752 
	#ETHTOOL_FLASHDEV
 0x00000033

	)

753 
	#ETHTOOL_RESET
 0x00000034

	)

754 
	#ETHTOOL_SRXNTUPLE
 0x00000035

	)

755 
	#ETHTOOL_GRXNTUPLE
 0x00000036

	)

756 
	#ETHTOOL_GSSET_INFO
 0x00000037

	)

757 
	#ETHTOOL_GRXFHINDIR
 0x00000038

	)

758 
	#ETHTOOL_SRXFHINDIR
 0x00000039

	)

760 
	#ETHTOOL_GFEATURES
 0x0000003®

	)

761 
	#ETHTOOL_SFEATURES
 0x0000003b

	)

762 
	#ETHTOOL_GCHANNELS
 0x0000003¯

	)

763 
	#ETHTOOL_SCHANNELS
 0x0000003d

	)

764 
	#ETHTOOL_SET_DUMP
 0x0000003ê

	)

765 
	#ETHTOOL_GET_DUMP_FLAG
 0x0000003‡

	)

766 
	#ETHTOOL_GET_DUMP_DATA
 0x00000040

	)

769 
	#SPARC_ETH_GSET
 
ETHTOOL_GSET


	)

770 
	#SPARC_ETH_SSET
 
ETHTOOL_SSET


	)

773 
	#SUPPORTED_10ba£T_HÆf
 (1 << 0)

	)

774 
	#SUPPORTED_10ba£T_FuŒ
 (1 << 1)

	)

775 
	#SUPPORTED_100ba£T_HÆf
 (1 << 2)

	)

776 
	#SUPPORTED_100ba£T_FuŒ
 (1 << 3)

	)

777 
	#SUPPORTED_1000ba£T_HÆf
 (1 << 4)

	)

778 
	#SUPPORTED_1000ba£T_FuŒ
 (1 << 5)

	)

779 
	#SUPPORTED_Aut⁄eg
 (1 << 6)

	)

780 
	#SUPPORTED_TP
 (1 << 7)

	)

781 
	#SUPPORTED_AUI
 (1 << 8)

	)

782 
	#SUPPORTED_MII
 (1 << 9)

	)

783 
	#SUPPORTED_FIBRE
 (1 << 10)

	)

784 
	#SUPPORTED_BNC
 (1 << 11)

	)

785 
	#SUPPORTED_10000ba£T_FuŒ
 (1 << 12)

	)

786 
	#SUPPORTED_Pau£
 (1 << 13)

	)

787 
	#SUPPORTED_Asym_Pau£
 (1 << 14)

	)

788 
	#SUPPORTED_2500ba£X_FuŒ
 (1 << 15)

	)

789 
	#SUPPORTED_Back∂™e
 (1 << 16)

	)

790 
	#SUPPORTED_1000ba£KX_FuŒ
 (1 << 17)

	)

791 
	#SUPPORTED_10000ba£KX4_FuŒ
 (1 << 18)

	)

792 
	#SUPPORTED_10000ba£KR_FuŒ
 (1 << 19)

	)

793 
	#SUPPORTED_10000ba£R_FEC
 (1 << 20)

	)

794 
	#SUPPORTED_20000ba£MLD2_FuŒ
 (1 << 21)

	)

795 
	#SUPPORTED_20000ba£KR2_FuŒ
 (1 << 22)

	)

798 
	#ADVERTISED_10ba£T_HÆf
 (1 << 0)

	)

799 
	#ADVERTISED_10ba£T_FuŒ
 (1 << 1)

	)

800 
	#ADVERTISED_100ba£T_HÆf
 (1 << 2)

	)

801 
	#ADVERTISED_100ba£T_FuŒ
 (1 << 3)

	)

802 
	#ADVERTISED_1000ba£T_HÆf
 (1 << 4)

	)

803 
	#ADVERTISED_1000ba£T_FuŒ
 (1 << 5)

	)

804 
	#ADVERTISED_Aut⁄eg
 (1 << 6)

	)

805 
	#ADVERTISED_TP
 (1 << 7)

	)

806 
	#ADVERTISED_AUI
 (1 << 8)

	)

807 
	#ADVERTISED_MII
 (1 << 9)

	)

808 
	#ADVERTISED_FIBRE
 (1 << 10)

	)

809 
	#ADVERTISED_BNC
 (1 << 11)

	)

810 
	#ADVERTISED_10000ba£T_FuŒ
 (1 << 12)

	)

811 
	#ADVERTISED_Pau£
 (1 << 13)

	)

812 
	#ADVERTISED_Asym_Pau£
 (1 << 14)

	)

813 
	#ADVERTISED_2500ba£X_FuŒ
 (1 << 15)

	)

814 
	#ADVERTISED_Back∂™e
 (1 << 16)

	)

815 
	#ADVERTISED_1000ba£KX_FuŒ
 (1 << 17)

	)

816 
	#ADVERTISED_10000ba£KX4_FuŒ
 (1 << 18)

	)

817 
	#ADVERTISED_10000ba£KR_FuŒ
 (1 << 19)

	)

818 
	#ADVERTISED_10000ba£R_FEC
 (1 << 20)

	)

819 
	#ADVERTISED_20000ba£MLD2_FuŒ
 (1 << 21)

	)

820 
	#ADVERTISED_20000ba£KR2_FuŒ
 (1 << 22)

	)

829 
	#SPEED_10
 10

	)

830 
	#SPEED_100
 100

	)

831 
	#SPEED_1000
 1000

	)

832 
	#SPEED_2500
 2500

	)

833 
	#SPEED_10000
 10000

	)

834 
	#SPEED_UNKNOWN
 -1

	)

837 
	#DUPLEX_HALF
 0x00

	)

838 
	#DUPLEX_FULL
 0x01

	)

839 
	#DUPLEX_UNKNOWN
 0xff

	)

842 
	#PORT_TP
 0x00

	)

843 
	#PORT_AUI
 0x01

	)

844 
	#PORT_MII
 0x02

	)

845 
	#PORT_FIBRE
 0x03

	)

846 
	#PORT_BNC
 0x04

	)

847 
	#PORT_DA
 0x05

	)

848 
	#PORT_NONE
 0xef

	)

849 
	#PORT_OTHER
 0xff

	)

852 
	#XCVR_INTERNAL
 0x00

	)

853 
	#XCVR_EXTERNAL
 0x01

	)

854 
	#XCVR_DUMMY1
 0x02

	)

855 
	#XCVR_DUMMY2
 0x03

	)

856 
	#XCVR_DUMMY3
 0x04

	)

861 
	#AUTONEG_DISABLE
 0x00

	)

862 
	#AUTONEG_ENABLE
 0x01

	)

865 
	#ETH_TP_MDI_INVALID
 0x00

	)

866 
	#ETH_TP_MDI
 0x01

	)

867 
	#ETH_TP_MDI_X
 0x02

	)

870 
	#WAKE_PHY
 (1 << 0)

	)

871 
	#WAKE_UCAST
 (1 << 1)

	)

872 
	#WAKE_MCAST
 (1 << 2)

	)

873 
	#WAKE_BCAST
 (1 << 3)

	)

874 
	#WAKE_ARP
 (1 << 4)

	)

875 
	#WAKE_MAGIC
 (1 << 5)

	)

876 
	#WAKE_MAGICSECURE
 (1 << 6Ë

	)

879 
	#TCP_V4_FLOW
 0x01

	)

880 
	#UDP_V4_FLOW
 0x02

	)

881 
	#SCTP_V4_FLOW
 0x03

	)

882 
	#AH_ESP_V4_FLOW
 0x04

	)

883 
	#TCP_V6_FLOW
 0x05

	)

884 
	#UDP_V6_FLOW
 0x06

	)

885 
	#SCTP_V6_FLOW
 0x07

	)

886 
	#AH_ESP_V6_FLOW
 0x08

	)

887 
	#AH_V4_FLOW
 0x09

	)

888 
	#ESP_V4_FLOW
 0x0®

	)

889 
	#AH_V6_FLOW
 0x0b

	)

890 
	#ESP_V6_FLOW
 0x0¯

	)

891 
	#IP_USER_FLOW
 0x0d

	)

892 
	#IPV4_FLOW
 0x10

	)

893 
	#IPV6_FLOW
 0x11

	)

894 
	#ETHER_FLOW
 0x12

	)

896 
	#FLOW_EXT
 0x80000000

	)

899 
	#RXH_L2DA
 (1 << 1)

	)

900 
	#RXH_VLAN
 (1 << 2)

	)

901 
	#RXH_L3_PROTO
 (1 << 3)

	)

902 
	#RXH_IP_SRC
 (1 << 4)

	)

903 
	#RXH_IP_DST
 (1 << 5)

	)

904 
	#RXH_L4_B_0_1
 (1 << 6Ë

	)

905 
	#RXH_L4_B_2_3
 (1 << 7Ë

	)

906 
	#RXH_DISCARD
 (1 << 31)

	)

908 
	#RX_CLS_FLOW_DISC
 0xffffffffffffffffULL

	)

917 
	eëhtoﬁ_ª£t_Êags
 {

923 
	mETH_RESET_MGMT
 = 1 << 0,

924 
	mETH_RESET_IRQ
 = 1 << 1,

925 
	mETH_RESET_DMA
 = 1 << 2,

926 
	mETH_RESET_FILTER
 = 1 << 3,

927 
	mETH_RESET_OFFLOAD
 = 1 << 4,

928 
	mETH_RESET_MAC
 = 1 << 5,

929 
	mETH_RESET_PHY
 = 1 << 6,

930 
	mETH_RESET_RAM
 = 1 << 7,

933 
	mETH_RESET_DEDICATED
 = 0x0000ffff,

935 
	mETH_RESET_ALL
 = 0xffffffff,

938 
	#ETH_RESET_SHARED_SHIFT
 16

	)

	@/usr/include/linux/if_ether.h

21 #i‚de‡
_LINUX_IF_ETHER_H


22 
	#_LINUX_IF_ETHER_H


	)

24 
	~<löux/ty≥s.h
>

31 
	#ETH_ALEN
 6

	)

32 
	#ETH_HLEN
 14

	)

33 
	#ETH_ZLEN
 60

	)

34 
	#ETH_DATA_LEN
 1500

	)

35 
	#ETH_FRAME_LEN
 1514

	)

36 
	#ETH_FCS_LEN
 4

	)

42 
	#ETH_P_LOOP
 0x0060

	)

43 
	#ETH_P_PUP
 0x0200

	)

44 
	#ETH_P_PUPAT
 0x0201

	)

45 
	#ETH_P_IP
 0x0800

	)

46 
	#ETH_P_X25
 0x0805

	)

47 
	#ETH_P_ARP
 0x0806

	)

48 
	#ETH_P_BPQ
 0x08FF

	)

49 
	#ETH_P_IEEEPUP
 0x0a00

	)

50 
	#ETH_P_IEEEPUPAT
 0x0a01

	)

51 
	#ETH_P_DEC
 0x6000

	)

52 
	#ETH_P_DNA_DL
 0x6001

	)

53 
	#ETH_P_DNA_RC
 0x6002

	)

54 
	#ETH_P_DNA_RT
 0x6003

	)

55 
	#ETH_P_LAT
 0x6004

	)

56 
	#ETH_P_DIAG
 0x6005

	)

57 
	#ETH_P_CUST
 0x6006

	)

58 
	#ETH_P_SCA
 0x6007

	)

59 
	#ETH_P_TEB
 0x6558

	)

60 
	#ETH_P_RARP
 0x8035

	)

61 
	#ETH_P_ATALK
 0x809B

	)

62 
	#ETH_P_AARP
 0x80F3

	)

63 
	#ETH_P_8021Q
 0x8100

	)

64 
	#ETH_P_IPX
 0x8137

	)

65 
	#ETH_P_IPV6
 0x86DD

	)

66 
	#ETH_P_PAUSE
 0x8808

	)

67 
	#ETH_P_SLOW
 0x8809

	)

68 
	#ETH_P_WCCP
 0x883E

	)

70 
	#ETH_P_PPP_DISC
 0x8863

	)

71 
	#ETH_P_PPP_SES
 0x8864

	)

72 
	#ETH_P_MPLS_UC
 0x8847

	)

73 
	#ETH_P_MPLS_MC
 0x8848

	)

74 
	#ETH_P_ATMMPOA
 0x884¯

	)

75 
	#ETH_P_LINK_CTL
 0x886¯

	)

76 
	#ETH_P_ATMFATE
 0x8884

	)

79 
	#ETH_P_PAE
 0x888E

	)

80 
	#ETH_P_AOE
 0x88A2

	)

81 
	#ETH_P_8021AD
 0x88A8

	)

82 
	#ETH_P_TIPC
 0x88CA

	)

83 
	#ETH_P_8021AH
 0x88E7

	)

84 
	#ETH_P_1588
 0x88F7

	)

85 
	#ETH_P_FCOE
 0x8906

	)

86 
	#ETH_P_TDLS
 0x890D

	)

87 
	#ETH_P_FIP
 0x8914

	)

88 
	#ETH_P_QINQ1
 0x9100

	)

89 
	#ETH_P_QINQ2
 0x9200

	)

90 
	#ETH_P_QINQ3
 0x9300

	)

91 
	#ETH_P_EDSA
 0xDADA

	)

92 
	#ETH_P_AF_IUCV
 0xFBFB

	)

98 
	#ETH_P_802_3
 0x0001

	)

99 
	#ETH_P_AX25
 0x0002

	)

100 
	#ETH_P_ALL
 0x0003

	)

101 
	#ETH_P_802_2
 0x0004

	)

102 
	#ETH_P_SNAP
 0x0005

	)

103 
	#ETH_P_DDCMP
 0x0006

	)

104 
	#ETH_P_WAN_PPP
 0x0007

	)

105 
	#ETH_P_PPP_MP
 0x0008

	)

106 
	#ETH_P_LOCALTALK
 0x0009

	)

107 
	#ETH_P_CAN
 0x000C

	)

108 
	#ETH_P_PPPTALK
 0x0010

	)

109 
	#ETH_P_TR_802_2
 0x0011

	)

110 
	#ETH_P_MOBITEX
 0x0015

	)

111 
	#ETH_P_CONTROL
 0x0016

	)

112 
	#ETH_P_IRDA
 0x0017

	)

113 
	#ETH_P_ECONET
 0x0018

	)

114 
	#ETH_P_HDLC
 0x0019

	)

115 
	#ETH_P_ARCNET
 0x001A

	)

116 
	#ETH_P_DSA
 0x001B

	)

117 
	#ETH_P_TRAILER
 0x001C

	)

118 
	#ETH_P_PHONET
 0x00F5

	)

119 
	#ETH_P_IEEE802154
 0x00F6

	)

120 
	#ETH_P_CAIF
 0x00F7

	)

126 
	sëhhdr
 {

127 
	mh_de°
[
ETH_ALEN
];

128 
	mh_sour˚
[
ETH_ALEN
];

129 
__be16
 
	mh_¥Ÿo
;

130 } 
__©åibuã__
((
∑cked
));

	@/usr/include/linux/if_vlan.h

13 #i‚de‡
_LINUX_IF_VLAN_H_


14 
	#_LINUX_IF_VLAN_H_


	)

20 
	evœn_io˘l_cmds
 {

21 
	mADD_VLAN_CMD
,

22 
	mDEL_VLAN_CMD
,

23 
	mSET_VLAN_INGRESS_PRIORITY_CMD
,

24 
	mSET_VLAN_EGRESS_PRIORITY_CMD
,

25 
	mGET_VLAN_INGRESS_PRIORITY_CMD
,

26 
	mGET_VLAN_EGRESS_PRIORITY_CMD
,

27 
	mSET_VLAN_NAME_TYPE_CMD
,

28 
	mSET_VLAN_FLAG_CMD
,

29 
	mGET_VLAN_REALDEV_NAME_CMD
,

30 
	mGET_VLAN_VID_CMD


33 
	evœn_Êags
 {

34 
	mVLAN_FLAG_REORDER_HDR
 = 0x1,

35 
	mVLAN_FLAG_GVRP
 = 0x2,

36 
	mVLAN_FLAG_LOOSE_BINDING
 = 0x4,

39 
	evœn_«me_ty≥s
 {

40 
	mVLAN_NAME_TYPE_PLUS_VID
,

41 
	mVLAN_NAME_TYPE_RAW_PLUS_VID
,

42 
	mVLAN_NAME_TYPE_PLUS_VID_NO_PAD
,

43 
	mVLAN_NAME_TYPE_RAW_PLUS_VID_NO_PAD
,

44 
	mVLAN_NAME_TYPE_HIGHEST


47 
	svœn_io˘l_¨gs
 {

48 
	mcmd
;

49 
	mdevi˚1
[24];

52 
	mdevi˚2
[24];

53 
	mVID
;

54 
	mskb_¥i‹ôy
;

55 
	m«me_ty≥
;

56 
	mböd_ty≥
;

57 
	mÊag
;

58 } 
	mu
;

60 
	mvœn_qos
;

	@/usr/include/linux/ipv6.h

1 #i‚de‡
_IPV6_H


2 
	#_IPV6_H


	)

4 
	~<löux/ty≥s.h
>

5 
	~<löux/ö6.h
>

6 
	~<asm/byã‹dî.h
>

10 
	#IPV6_MIN_MTU
 1280

	)

19 
	sö6_pktöfo
 {

20 
ö6_addr
 
	mùi6_addr
;

21 
	mùi6_ifödex
;

24 
	sù6_mtuöfo
 {

25 
sockaddr_ö6
 
	mù6m_addr
;

26 
__u32
 
	mù6m_mtu
;

29 
	sö6_i‰eq
 {

30 
ö6_addr
 
	mi‰6_addr
;

31 
__u32
 
	mi‰6_¥efixÀn
;

32 
	mi‰6_ifödex
;

35 
	#IPV6_SRCRT_STRICT
 0x01

	)

36 
	#IPV6_SRCRT_TYPE_0
 0

	)

37 
	#IPV6_SRCRT_TYPE_2
 2

	)

42 
	sùv6_π_hdr
 {

43 
__u8
 
	m√xthdr
;

44 
__u8
 
	mhdæí
;

45 
__u8
 
	mty≥
;

46 
__u8
 
	m£gmíts_À·
;

55 
	sùv6_›t_hdr
 {

56 
__u8
 
	m√xthdr
;

57 
__u8
 
	mhdæí
;

61 } 
__©åibuã__
((
∑cked
));

63 
	#ùv6_de°›t_hdr
 
ùv6_›t_hdr


	)

64 
	#ùv6_h››t_hdr
 
ùv6_›t_hdr


	)

71 
	sπ0_hdr
 {

72 
ùv6_π_hdr
 
	mπ_hdr
;

73 
__u32
 
	mª£rved
;

74 
ö6_addr
 
	maddr
[0];

76 
	#π0_ty≥
 
π_hdr
.
ty≥


	)

83 
	sπ2_hdr
 {

84 
ùv6_π_hdr
 
	mπ_hdr
;

85 
__u32
 
	mª£rved
;

86 
ö6_addr
 
	maddr
;

88 
	#π2_ty≥
 
π_hdr
.
ty≥


	)

95 
	sùv6_de°›t_hao
 {

96 
__u8
 
	mty≥
;

97 
__u8
 
	mÀngth
;

98 
ö6_addr
 
	maddr
;

99 } 
__©åibuã__
((
∑cked
));

108 
	sùv6hdr
 {

109 #i‡
deföed
(
__LITTLE_ENDIAN_BITFIELD
)

110 
__u8
 
	m¥i‹ôy
:4,

111 
	mvîsi⁄
:4;

112 #ñi‡
deföed
(
__BIG_ENDIAN_BITFIELD
)

113 
__u8
 
	mvîsi⁄
:4,

114 
	m¥i‹ôy
:4;

118 
__u8
 
	mÊow_lbl
[3];

120 
__be16
 
	m∑ylﬂd_Àn
;

121 
__u8
 
	m√xthdr
;

122 
__u8
 
	mh›_limô
;

124 
ö6_addr
 
	mßddr
;

125 
ö6_addr
 
	mdaddr
;

131 
	mDEVCONF_FORWARDING
 = 0,

132 
	mDEVCONF_HOPLIMIT
,

133 
	mDEVCONF_MTU6
,

134 
	mDEVCONF_ACCEPT_RA
,

135 
	mDEVCONF_ACCEPT_REDIRECTS
,

136 
	mDEVCONF_AUTOCONF
,

137 
	mDEVCONF_DAD_TRANSMITS
,

138 
	mDEVCONF_RTR_SOLICITS
,

139 
	mDEVCONF_RTR_SOLICIT_INTERVAL
,

140 
	mDEVCONF_RTR_SOLICIT_DELAY
,

141 
	mDEVCONF_USE_TEMPADDR
,

142 
	mDEVCONF_TEMP_VALID_LFT
,

143 
	mDEVCONF_TEMP_PREFERED_LFT
,

144 
	mDEVCONF_REGEN_MAX_RETRY
,

145 
	mDEVCONF_MAX_DESYNC_FACTOR
,

146 
	mDEVCONF_MAX_ADDRESSES
,

147 
	mDEVCONF_FORCE_MLD_VERSION
,

148 
	mDEVCONF_ACCEPT_RA_DEFRTR
,

149 
	mDEVCONF_ACCEPT_RA_PINFO
,

150 
	mDEVCONF_ACCEPT_RA_RTR_PREF
,

151 
	mDEVCONF_RTR_PROBE_INTERVAL
,

152 
	mDEVCONF_ACCEPT_RA_RT_INFO_MAX_PLEN
,

153 
	mDEVCONF_PROXY_NDP
,

154 
	mDEVCONF_OPTIMISTIC_DAD
,

155 
	mDEVCONF_ACCEPT_SOURCE_ROUTE
,

156 
	mDEVCONF_MC_FORWARDING
,

157 
	mDEVCONF_DISABLE_IPV6
,

158 
	mDEVCONF_ACCEPT_DAD
,

159 
	mDEVCONF_FORCE_TLLAO
,

160 
	mDEVCONF_MAX


	@/usr/include/linux/mii.h

8 #i‚de‡
__LINUX_MII_H__


9 
	#__LINUX_MII_H__


	)

11 
	~<löux/ty≥s.h
>

14 
	#MII_BMCR
 0x00

	)

15 
	#MII_BMSR
 0x01

	)

16 
	#MII_PHYSID1
 0x02

	)

17 
	#MII_PHYSID2
 0x03

	)

18 
	#MII_ADVERTISE
 0x04

	)

19 
	#MII_LPA
 0x05

	)

20 
	#MII_EXPANSION
 0x06

	)

21 
	#MII_CTRL1000
 0x09

	)

22 
	#MII_STAT1000
 0x0®

	)

23 
	#MII_ESTATUS
 0x0‡

	)

24 
	#MII_DCOUNTER
 0x12

	)

25 
	#MII_FCSCOUNTER
 0x13

	)

26 
	#MII_NWAYTEST
 0x14

	)

27 
	#MII_RERRCOUNTER
 0x15

	)

28 
	#MII_SREVISION
 0x16

	)

29 
	#MII_RESV1
 0x17

	)

30 
	#MII_LBRERROR
 0x18

	)

31 
	#MII_PHYADDR
 0x19

	)

32 
	#MII_RESV2
 0x1®

	)

33 
	#MII_TPISTATUS
 0x1b

	)

34 
	#MII_NCONFIG
 0x1¯

	)

37 
	#BMCR_RESV
 0x003‡

	)

38 
	#BMCR_SPEED1000
 0x0040

	)

39 
	#BMCR_CTST
 0x0080

	)

40 
	#BMCR_FULLDPLX
 0x0100

	)

41 
	#BMCR_ANRESTART
 0x0200

	)

42 
	#BMCR_ISOLATE
 0x0400

	)

43 
	#BMCR_PDOWN
 0x0800

	)

44 
	#BMCR_ANENABLE
 0x1000

	)

45 
	#BMCR_SPEED100
 0x2000

	)

46 
	#BMCR_LOOPBACK
 0x4000

	)

47 
	#BMCR_RESET
 0x8000

	)

50 
	#BMSR_ERCAP
 0x0001

	)

51 
	#BMSR_JCD
 0x0002

	)

52 
	#BMSR_LSTATUS
 0x0004

	)

53 
	#BMSR_ANEGCAPABLE
 0x0008

	)

54 
	#BMSR_RFAULT
 0x0010

	)

55 
	#BMSR_ANEGCOMPLETE
 0x0020

	)

56 
	#BMSR_RESV
 0x00c0

	)

57 
	#BMSR_ESTATEN
 0x0100

	)

58 
	#BMSR_100HALF2
 0x0200

	)

59 
	#BMSR_100FULL2
 0x0400

	)

60 
	#BMSR_10HALF
 0x0800

	)

61 
	#BMSR_10FULL
 0x1000

	)

62 
	#BMSR_100HALF
 0x2000

	)

63 
	#BMSR_100FULL
 0x4000

	)

64 
	#BMSR_100BASE4
 0x8000

	)

67 
	#ADVERTISE_SLCT
 0x001‡

	)

68 
	#ADVERTISE_CSMA
 0x0001

	)

69 
	#ADVERTISE_10HALF
 0x0020

	)

70 
	#ADVERTISE_1000XFULL
 0x0020

	)

71 
	#ADVERTISE_10FULL
 0x0040

	)

72 
	#ADVERTISE_1000XHALF
 0x0040

	)

73 
	#ADVERTISE_100HALF
 0x0080

	)

74 
	#ADVERTISE_1000XPAUSE
 0x0080

	)

75 
	#ADVERTISE_100FULL
 0x0100

	)

76 
	#ADVERTISE_1000XPSE_ASYM
 0x0100

	)

77 
	#ADVERTISE_100BASE4
 0x0200

	)

78 
	#ADVERTISE_PAUSE_CAP
 0x0400

	)

79 
	#ADVERTISE_PAUSE_ASYM
 0x0800

	)

80 
	#ADVERTISE_RESV
 0x1000

	)

81 
	#ADVERTISE_RFAULT
 0x2000

	)

82 
	#ADVERTISE_LPACK
 0x4000

	)

83 
	#ADVERTISE_NPAGE
 0x8000

	)

85 
	#ADVERTISE_FULL
 (
ADVERTISE_100FULL
 | 
ADVERTISE_10FULL
 | \

86 
ADVERTISE_CSMA
)

	)

87 
	#ADVERTISE_ALL
 (
ADVERTISE_10HALF
 | 
ADVERTISE_10FULL
 | \

88 
ADVERTISE_100HALF
 | 
ADVERTISE_100FULL
)

	)

91 
	#LPA_SLCT
 0x001‡

	)

92 
	#LPA_10HALF
 0x0020

	)

93 
	#LPA_1000XFULL
 0x0020

	)

94 
	#LPA_10FULL
 0x0040

	)

95 
	#LPA_1000XHALF
 0x0040

	)

96 
	#LPA_100HALF
 0x0080

	)

97 
	#LPA_1000XPAUSE
 0x0080

	)

98 
	#LPA_100FULL
 0x0100

	)

99 
	#LPA_1000XPAUSE_ASYM
 0x0100

	)

100 
	#LPA_100BASE4
 0x0200

	)

101 
	#LPA_PAUSE_CAP
 0x0400

	)

102 
	#LPA_PAUSE_ASYM
 0x0800

	)

103 
	#LPA_RESV
 0x1000

	)

104 
	#LPA_RFAULT
 0x2000

	)

105 
	#LPA_LPACK
 0x4000

	)

106 
	#LPA_NPAGE
 0x8000

	)

108 
	#LPA_DUPLEX
 (
LPA_10FULL
 | 
LPA_100FULL
)

	)

109 
	#LPA_100
 (
LPA_100FULL
 | 
LPA_100HALF
 | 
LPA_100BASE4
)

	)

112 
	#EXPANSION_NWAY
 0x0001

	)

113 
	#EXPANSION_LCWP
 0x0002

	)

114 
	#EXPANSION_ENABLENPAGE
 0x0004

	)

115 
	#EXPANSION_NPCAPABLE
 0x0008

	)

116 
	#EXPANSION_MFAULTS
 0x0010

	)

117 
	#EXPANSION_RESV
 0xf„0

	)

119 
	#ESTATUS_1000_TFULL
 0x2000

	)

120 
	#ESTATUS_1000_THALF
 0x1000

	)

123 
	#NWAYTEST_RESV1
 0x00f‡

	)

124 
	#NWAYTEST_LOOPBACK
 0x0100

	)

125 
	#NWAYTEST_RESV2
 0x„00

	)

128 
	#ADVERTISE_1000FULL
 0x0200

	)

129 
	#ADVERTISE_1000HALF
 0x0100

	)

130 
	#CTL1000_AS_MASTER
 0x0800

	)

131 
	#CTL1000_ENABLE_MASTER
 0x1000

	)

134 
	#LPA_1000LOCALRXOK
 0x2000

	)

135 
	#LPA_1000REMRXOK
 0x1000

	)

136 
	#LPA_1000FULL
 0x0800

	)

137 
	#LPA_1000HALF
 0x0400

	)

140 
	#FLOW_CTRL_TX
 0x01

	)

141 
	#FLOW_CTRL_RX
 0x02

	)

144 
	smii_io˘l_d©a
 {

145 
__u16
 
	mphy_id
;

146 
__u16
 
	mªg_num
;

147 
__u16
 
	mvÆ_ö
;

148 
__u16
 
	mvÆ_out
;

	@/usr/include/linux/netdevice.h

25 #i‚de‡
_LINUX_NETDEVICE_H


26 
	#_LINUX_NETDEVICE_H


	)

28 
	~<löux/if.h
>

29 
	~<löux/if_ëhî.h
>

30 
	~<löux/if_∑ckë.h
>

31 
	~<löux/if_lök.h
>

34 
	#MAX_ADDR_LEN
 32

	)

37 
	#INIT_NETDEV_GROUP
 0

	)

43 
	mIF_PORT_UNKNOWN
 = 0,

44 
	mIF_PORT_10BASE2
,

45 
	mIF_PORT_10BASET
,

46 
	mIF_PORT_AUI
,

47 
	mIF_PORT_100BASET
,

48 
	mIF_PORT_100BASETX
,

49 
	mIF_PORT_100BASEFX


	@/usr/include/linux/pci.h

17 #i‚de‡
LINUX_PCI_H


18 
	#LINUX_PCI_H


	)

20 
	~<löux/pci_ªgs.h
>

30 
	#PCI_DEVFN
(
¶Ÿ
, 
func
Ë((((¶ŸË& 0x1fË<< 3Ë| ((funcË& 0x07))

	)

31 
	#PCI_SLOT
(
dev‚
Ë(((dev‚Ë>> 3Ë& 0x1f)

	)

32 
	#PCI_FUNC
(
dev‚
Ë((dev‚Ë& 0x07)

	)

35 
	#PCIIOC_BASE
 ('P' << 24 | 'C' << 16 | 'I' << 8)

	)

36 
	#PCIIOC_CONTROLLER
 (
PCIIOC_BASE
 | 0x00Ë

	)

37 
	#PCIIOC_MMAP_IS_IO
 (
PCIIOC_BASE
 | 0x01Ë

	)

38 
	#PCIIOC_MMAP_IS_MEM
 (
PCIIOC_BASE
 | 0x02Ë

	)

39 
	#PCIIOC_WRITE_COMBINE
 (
PCIIOC_BASE
 | 0x03Ë

	)

	@/usr/include/linux/tcp.h

17 #i‚de‡
_LINUX_TCP_H


18 
	#_LINUX_TCP_H


	)

20 
	~<löux/ty≥s.h
>

21 
	~<asm/byã‹dî.h
>

22 
	~<löux/sockë.h
>

24 
	st˝hdr
 {

25 
__be16
 
	msour˚
;

26 
__be16
 
	mde°
;

27 
__be32
 
	m£q
;

28 
__be32
 
	mack_£q
;

29 #i‡
deföed
(
__LITTLE_ENDIAN_BITFIELD
)

30 
__u16
 
	mªs1
:4,

31 
	mdoff
:4,

32 
	mfö
:1,

33 
	msyn
:1,

34 
	mr°
:1,

35 
	mpsh
:1,

36 
	mack
:1,

37 
	murg
:1,

38 
	me˚
:1,

39 
	mcwr
:1;

40 #ñi‡
deföed
(
__BIG_ENDIAN_BITFIELD
)

41 
__u16
 
	mdoff
:4,

42 
	mªs1
:4,

43 
	mcwr
:1,

44 
	me˚
:1,

45 
	murg
:1,

46 
	mack
:1,

47 
	mpsh
:1,

48 
	mr°
:1,

49 
	msyn
:1,

50 
	mfö
:1;

54 
__be16
 
	mwödow
;

55 
__sum16
 
	mcheck
;

56 
__be16
 
	murg_±r
;

64 
	ut˝_w‹d_hdr
 {

65 
t˝hdr
 
	mhdr
;

66 
__be32
 
	mw‹ds
[5];

69 
	#t˝_Êag_w‹d
(
ç
Ë–((
t˝_w‹d_hdr
 *)—p))->
w‹ds
 [3])

	)

72 
	mTCP_FLAG_CWR
 = 
__˝u_to_be32
(0x00800000),

73 
	mTCP_FLAG_ECE
 = 
__˝u_to_be32
(0x00400000),

74 
	mTCP_FLAG_URG
 = 
__˝u_to_be32
(0x00200000),

75 
	mTCP_FLAG_ACK
 = 
__˝u_to_be32
(0x00100000),

76 
	mTCP_FLAG_PSH
 = 
__˝u_to_be32
(0x00080000),

77 
	mTCP_FLAG_RST
 = 
__˝u_to_be32
(0x00040000),

78 
	mTCP_FLAG_SYN
 = 
__˝u_to_be32
(0x00020000),

79 
	mTCP_FLAG_FIN
 = 
__˝u_to_be32
(0x00010000),

80 
	mTCP_RESERVED_BITS
 = 
__˝u_to_be32
(0x0F000000),

81 
	mTCP_DATA_OFFSET
 = 
__˝u_to_be32
(0xF0000000)

87 
	#TCP_MSS_DEFAULT
 536U

	)

88 
	#TCP_MSS_DESIRED
 1220U

	)

91 
	#TCP_NODELAY
 1

	)

92 
	#TCP_MAXSEG
 2

	)

93 
	#TCP_CORK
 3

	)

94 
	#TCP_KEEPIDLE
 4

	)

95 
	#TCP_KEEPINTVL
 5

	)

96 
	#TCP_KEEPCNT
 6

	)

97 
	#TCP_SYNCNT
 7

	)

98 
	#TCP_LINGER2
 8

	)

99 
	#TCP_DEFER_ACCEPT
 9

	)

100 
	#TCP_WINDOW_CLAMP
 10

	)

101 
	#TCP_INFO
 11

	)

102 
	#TCP_QUICKACK
 12

	)

103 
	#TCP_CONGESTION
 13

	)

104 
	#TCP_MD5SIG
 14

	)

105 
	#TCP_COOKIE_TRANSACTIONS
 15

	)

106 
	#TCP_THIN_LINEAR_TIMEOUTS
 16

	)

107 
	#TCP_THIN_DUPACK
 17

	)

108 
	#TCP_USER_TIMEOUT
 18

	)

111 
	#TCPI_OPT_TIMESTAMPS
 1

	)

112 
	#TCPI_OPT_SACK
 2

	)

113 
	#TCPI_OPT_WSCALE
 4

	)

114 
	#TCPI_OPT_ECN
 8

	)

115 
	#TCPI_OPT_ECN_SEEN
 16

	)

117 
	et˝_ˇ_°©e
 {

118 
	mTCP_CA_O≥n
 = 0,

119 
	#TCPF_CA_O≥n
 (1<<
TCP_CA_O≥n
)

	)

120 
	mTCP_CA_Dis‹dî
 = 1,

121 
	#TCPF_CA_Dis‹dî
 (1<<
TCP_CA_Dis‹dî
)

	)

122 
	mTCP_CA_CWR
 = 2,

123 
	#TCPF_CA_CWR
 (1<<
TCP_CA_CWR
)

	)

124 
	mTCP_CA_Recovîy
 = 3,

125 
	#TCPF_CA_Recovîy
 (1<<
TCP_CA_Recovîy
)

	)

126 
	mTCP_CA_Loss
 = 4

127 
	#TCPF_CA_Loss
 (1<<
TCP_CA_Loss
)

	)

130 
	st˝_öfo
 {

131 
__u8
 
	mt˝i_°©e
;

132 
__u8
 
	mt˝i_ˇ_°©e
;

133 
__u8
 
	mt˝i_ªå™smôs
;

134 
__u8
 
	mt˝i_¥obes
;

135 
__u8
 
	mt˝i_backoff
;

136 
__u8
 
	mt˝i_›ti⁄s
;

137 
__u8
 
	mt˝i_¢d_wsˇÀ
 : 4, 
	mt˝i_rcv_wsˇÀ
 : 4;

139 
__u32
 
	mt˝i_πo
;

140 
__u32
 
	mt˝i_©o
;

141 
__u32
 
	mt˝i_¢d_mss
;

142 
__u32
 
	mt˝i_rcv_mss
;

144 
__u32
 
	mt˝i_u«cked
;

145 
__u32
 
	mt˝i_ßcked
;

146 
__u32
 
	mt˝i_lo°
;

147 
__u32
 
	mt˝i_ªå™s
;

148 
__u32
 
	mt˝i_Áckës
;

151 
__u32
 
	mt˝i_œ°_d©a_£¡
;

152 
__u32
 
	mt˝i_œ°_ack_£¡
;

153 
__u32
 
	mt˝i_œ°_d©a_ªcv
;

154 
__u32
 
	mt˝i_œ°_ack_ªcv
;

157 
__u32
 
	mt˝i_pmtu
;

158 
__u32
 
	mt˝i_rcv_s°hªsh
;

159 
__u32
 
	mt˝i_πt
;

160 
__u32
 
	mt˝i_πtv¨
;

161 
__u32
 
	mt˝i_¢d_s°hªsh
;

162 
__u32
 
	mt˝i_¢d_cwnd
;

163 
__u32
 
	mt˝i_advmss
;

164 
__u32
 
	mt˝i_ª‹dîög
;

166 
__u32
 
	mt˝i_rcv_πt
;

167 
__u32
 
	mt˝i_rcv_•a˚
;

169 
__u32
 
	mt˝i_tŸÆ_ªå™s
;

173 
	#TCP_MD5SIG_MAXKEYLEN
 80

	)

175 
	st˝_md5sig
 {

176 
__kî√l_sockaddr_°‹age
 
	mt˝m_addr
;

177 
__u16
 
	m__t˝m_∑d1
;

178 
__u16
 
	mt˝m_keyÀn
;

179 
__u32
 
	m__t˝m_∑d2
;

180 
__u8
 
	mt˝m_key
[
TCP_MD5SIG_MAXKEYLEN
];

184 
	#TCP_COOKIE_MIN
 8

	)

185 
	#TCP_COOKIE_MAX
 16

	)

186 
	#TCP_COOKIE_PAIR_SIZE
 (2*
TCP_COOKIE_MAX
)

	)

189 
	#TCP_COOKIE_IN_ALWAYS
 (1 << 0Ë

	)

190 
	#TCP_COOKIE_OUT_NEVER
 (1 << 1Ë

	)

194 
	#TCP_S_DATA_IN
 (1 << 2Ë

	)

195 
	#TCP_S_DATA_OUT
 (1 << 3Ë

	)

198 
	st˝_cookõ_å™ß˘i⁄s
 {

199 
__u16
 
	mt˝˘_Êags
;

200 
__u8
 
	m__t˝˘_∑d1
;

201 
__u8
 
	mt˝˘_cookõ_desúed
;

202 
__u16
 
	mt˝˘_s_d©a_desúed
;

203 
__u16
 
	mt˝˘_u£d
;

204 
__u8
 
	mt˝˘_vÆue
[
TCP_MSS_DEFAULT
];

	@/usr/include/linux/types.h

1 #i‚de‡
_LINUX_TYPES_H


2 
	#_LINUX_TYPES_H


	)

4 
	~<asm/ty≥s.h
>

6 #i‚de‡
__ASSEMBLY__


8 
	~<löux/posix_ty≥s.h
>

16 #ifde‡
__CHECKER__


17 
	#__bôwi£__
 
	`__©åibuã__
((
bôwi£
))

	)

19 
	#__bôwi£__


	)

21 #ifde‡
__CHECK_ENDIAN__


22 
	#__bôwi£
 
__bôwi£__


	)

24 
	#__bôwi£


	)

27 
__u16
 
	t__bôwi£
 
	t__À16
;

28 
__u16
 
	t__bôwi£
 
	t__be16
;

29 
__u32
 
	t__bôwi£
 
	t__À32
;

30 
__u32
 
	t__bôwi£
 
	t__be32
;

31 
__u64
 
	t__bôwi£
 
	t__À64
;

32 
__u64
 
	t__bôwi£
 
	t__be64
;

34 
__u16
 
	t__bôwi£
 
	t__sum16
;

35 
__u32
 
	t__bôwi£
 
	t__wsum
;

46 
	#__Æig√d_u64
 
__u64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

47 
	#__Æig√d_be64
 
__be64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

48 
	#__Æig√d_À64
 
__À64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

	@/usr/include/asm/byteorder.h

1 #i‚de‡
_ASM_X86_BYTEORDER_H


2 
	#_ASM_X86_BYTEORDER_H


	)

4 
	~<löux/byã‹dî/lôée_ídün.h
>

	@/usr/include/asm/types.h

1 #i‚de‡
_ASM_X86_TYPES_H


2 
	#_ASM_X86_TYPES_H


	)

4 
	~<asm-gíîic/ty≥s.h
>

	@/usr/include/linux/if.h

19 #i‚de‡
_LINUX_IF_H


20 
	#_LINUX_IF_H


	)

22 
	~<löux/ty≥s.h
>

23 
	~<löux/sockë.h
>

26 
	#IFNAMSIZ
 16

	)

27 
	#IFALIASZ
 256

	)

28 
	~<löux/hdlc/io˘l.h
>

31 
	#IFF_UP
 0x1

	)

32 
	#IFF_BROADCAST
 0x2

	)

33 
	#IFF_DEBUG
 0x4

	)

34 
	#IFF_LOOPBACK
 0x8

	)

35 
	#IFF_POINTOPOINT
 0x10

	)

36 
	#IFF_NOTRAILERS
 0x20

	)

37 
	#IFF_RUNNING
 0x40

	)

38 
	#IFF_NOARP
 0x80

	)

39 
	#IFF_PROMISC
 0x100

	)

40 
	#IFF_ALLMULTI
 0x200

	)

42 
	#IFF_MASTER
 0x400

	)

43 
	#IFF_SLAVE
 0x800

	)

45 
	#IFF_MULTICAST
 0x1000

	)

47 
	#IFF_PORTSEL
 0x2000

	)

48 
	#IFF_AUTOMEDIA
 0x4000

	)

49 
	#IFF_DYNAMIC
 0x8000

	)

51 
	#IFF_LOWER_UP
 0x10000

	)

52 
	#IFF_DORMANT
 0x20000

	)

54 
	#IFF_ECHO
 0x40000

	)

56 
	#IFF_VOLATILE
 (
IFF_LOOPBACK
|
IFF_POINTOPOINT
|
IFF_BROADCAST
|
IFF_ECHO
|\

57 
IFF_MASTER
|
IFF_SLAVE
|
IFF_RUNNING
|
IFF_LOWER_UP
|
IFF_DORMANT
)

	)

60 
	#IFF_802_1Q_VLAN
 0x1

	)

61 
	#IFF_EBRIDGE
 0x2

	)

62 
	#IFF_SLAVE_INACTIVE
 0x4

	)

63 
	#IFF_MASTER_8023AD
 0x8

	)

64 
	#IFF_MASTER_ALB
 0x10

	)

65 
	#IFF_BONDING
 0x20

	)

66 
	#IFF_SLAVE_NEEDARP
 0x40

	)

67 
	#IFF_ISATAP
 0x80

	)

68 
	#IFF_MASTER_ARPMON
 0x100

	)

69 
	#IFF_WAN_HDLC
 0x200

	)

70 
	#IFF_XMIT_DST_RELEASE
 0x400

	)

73 
	#IFF_DONT_BRIDGE
 0x800

	)

74 
	#IFF_DISABLE_NETPOLL
 0x1000

	)

75 
	#IFF_MACVLAN_PORT
 0x2000

	)

76 
	#IFF_BRIDGE_PORT
 0x4000

	)

77 
	#IFF_OVS_DATAPATH
 0x8000

	)

79 
	#IFF_TX_SKB_SHARING
 0x10000

	)

81 
	#IFF_UNICAST_FLT
 0x20000

	)

83 
	#IF_GET_IFACE
 0x0001

	)

84 
	#IF_GET_PROTO
 0x0002

	)

87 
	#IF_IFACE_V35
 0x1000

	)

88 
	#IF_IFACE_V24
 0x1001

	)

89 
	#IF_IFACE_X21
 0x1002

	)

90 
	#IF_IFACE_T1
 0x1003

	)

91 
	#IF_IFACE_E1
 0x1004

	)

92 
	#IF_IFACE_SYNC_SERIAL
 0x1005

	)

93 
	#IF_IFACE_X21D
 0x1006

	)

96 
	#IF_PROTO_HDLC
 0x2000

	)

97 
	#IF_PROTO_PPP
 0x2001

	)

98 
	#IF_PROTO_CISCO
 0x2002

	)

99 
	#IF_PROTO_FR
 0x2003

	)

100 
	#IF_PROTO_FR_ADD_PVC
 0x2004

	)

101 
	#IF_PROTO_FR_DEL_PVC
 0x2005

	)

102 
	#IF_PROTO_X25
 0x2006

	)

103 
	#IF_PROTO_HDLC_ETH
 0x2007

	)

104 
	#IF_PROTO_FR_ADD_ETH_PVC
 0x2008

	)

105 
	#IF_PROTO_FR_DEL_ETH_PVC
 0x2009

	)

106 
	#IF_PROTO_FR_PVC
 0x200A

	)

107 
	#IF_PROTO_FR_ETH_PVC
 0x200B

	)

108 
	#IF_PROTO_RAW
 0x200C

	)

112 
	mIF_OPER_UNKNOWN
,

113 
	mIF_OPER_NOTPRESENT
,

114 
	mIF_OPER_DOWN
,

115 
	mIF_OPER_LOWERLAYERDOWN
,

116 
	mIF_OPER_TESTING
,

117 
	mIF_OPER_DORMANT
,

118 
	mIF_OPER_UP
,

123 
	mIF_LINK_MODE_DEFAULT
,

124 
	mIF_LINK_MODE_DORMANT
,

137 
	sifm≠
 {

138 
	mmem_°¨t
;

139 
	mmem_íd
;

140 
	mba£_addr
;

141 
	múq
;

142 
	mdma
;

143 
	mp‹t
;

147 
	sif_£âögs
 {

148 
	mty≥
;

149 
	msize
;

152 
øw_hdlc_¥Ÿo
 *
	møw_hdlc
;

153 
cisco_¥Ÿo
 *
	mcisco
;

154 
‰_¥Ÿo
 *
	m‰
;

155 
‰_¥Ÿo_pvc
 *
	m‰_pvc
;

156 
‰_¥Ÿo_pvc_öfo
 *
	m‰_pvc_öfo
;

159 
sync_£rül_£âögs
 *
	msync
;

160 
ã1_£âögs
 *
	mã1
;

161 } 
	mifs_ifsu
;

171 
	si‰eq
 {

172 
	#IFHWADDRLEN
 6

	)

175 
	mi‰n_«me
[
IFNAMSIZ
];

176 } 
	mi‰_i‰n
;

179 
sockaddr
 
	mi‰u_addr
;

180 
sockaddr
 
	mi‰u_d°addr
;

181 
sockaddr
 
	mi‰u_brﬂdaddr
;

182 
sockaddr
 
	mi‰u_√tmask
;

183 
sockaddr
 
	mi‰u_hwaddr
;

184 
	mi‰u_Êags
;

185 
	mi‰u_ivÆue
;

186 
	mi‰u_mtu
;

187 
ifm≠
 
	mi‰u_m≠
;

188 
	mi‰u_¶ave
[
IFNAMSIZ
];

189 
	mi‰u_√w«me
[
IFNAMSIZ
];

190 * 
	mi‰u_d©a
;

191 
if_£âögs
 
	mi‰u_£âögs
;

192 } 
	mi‰_i‰u
;

195 
	#i‰_«me
 
i‰_i‰n
.
i‰n_«me


	)

196 
	#i‰_hwaddr
 
i‰_i‰u
.
i‰u_hwaddr


	)

197 
	#i‰_addr
 
i‰_i‰u
.
i‰u_addr


	)

198 
	#i‰_d°addr
 
i‰_i‰u
.
i‰u_d°addr


	)

199 
	#i‰_brﬂdaddr
 
i‰_i‰u
.
i‰u_brﬂdaddr


	)

200 
	#i‰_√tmask
 
i‰_i‰u
.
i‰u_√tmask


	)

201 
	#i‰_Êags
 
i‰_i‰u
.
i‰u_Êags


	)

202 
	#i‰_mëric
 
i‰_i‰u
.
i‰u_ivÆue


	)

203 
	#i‰_mtu
 
i‰_i‰u
.
i‰u_mtu


	)

204 
	#i‰_m≠
 
i‰_i‰u
.
i‰u_m≠


	)

205 
	#i‰_¶ave
 
i‰_i‰u
.
i‰u_¶ave


	)

206 
	#i‰_d©a
 
i‰_i‰u
.
i‰u_d©a


	)

207 
	#i‰_ifödex
 
i‰_i‰u
.
i‰u_ivÆue


	)

208 
	#i‰_b™dwidth
 
i‰_i‰u
.
i‰u_ivÆue


	)

209 
	#i‰_qÀn
 
i‰_i‰u
.
i‰u_ivÆue


	)

210 
	#i‰_√w«me
 
i‰_i‰u
.
i‰u_√w«me


	)

211 
	#i‰_£âögs
 
i‰_i‰u
.
i‰u_£âögs


	)

220 
	sifc⁄f
 {

221 
	mifc_Àn
;

223 *
	mifcu_buf
;

224 
i‰eq
 *
	mifcu_ªq
;

225 } 
	mifc_ifcu
;

227 
	#ifc_buf
 
ifc_ifcu
.
ifcu_buf


	)

228 
	#ifc_ªq
 
ifc_ifcu
.
ifcu_ªq


	)

	@/usr/include/linux/if_link.h

1 #i‚de‡
_LINUX_IF_LINK_H


2 
	#_LINUX_IF_LINK_H


	)

4 
	~<löux/ty≥s.h
>

5 
	~<löux/√éök.h
>

8 
	sπ∆_lök_°©s
 {

9 
__u32
 
	mrx_∑ckës
;

10 
__u32
 
	mtx_∑ckës
;

11 
__u32
 
	mrx_byãs
;

12 
__u32
 
	mtx_byãs
;

13 
__u32
 
	mrx_îr‹s
;

14 
__u32
 
	mtx_îr‹s
;

15 
__u32
 
	mrx_dr›≥d
;

16 
__u32
 
	mtx_dr›≥d
;

17 
__u32
 
	mmu…iˇ°
;

18 
__u32
 
	mcﬁlisi⁄s
;

21 
__u32
 
	mrx_Àngth_îr‹s
;

22 
__u32
 
	mrx_ovî_îr‹s
;

23 
__u32
 
	mrx_¸c_îr‹s
;

24 
__u32
 
	mrx_‰ame_îr‹s
;

25 
__u32
 
	mrx_fifo_îr‹s
;

26 
__u32
 
	mrx_mis£d_îr‹s
;

29 
__u32
 
	mtx_ab‹ãd_îr‹s
;

30 
__u32
 
	mtx_ˇºõr_îr‹s
;

31 
__u32
 
	mtx_fifo_îr‹s
;

32 
__u32
 
	mtx_hóπbót_îr‹s
;

33 
__u32
 
	mtx_wödow_îr‹s
;

36 
__u32
 
	mrx_com¥es£d
;

37 
__u32
 
	mtx_com¥es£d
;

41 
	sπ∆_lök_°©s64
 {

42 
__u64
 
	mrx_∑ckës
;

43 
__u64
 
	mtx_∑ckës
;

44 
__u64
 
	mrx_byãs
;

45 
__u64
 
	mtx_byãs
;

46 
__u64
 
	mrx_îr‹s
;

47 
__u64
 
	mtx_îr‹s
;

48 
__u64
 
	mrx_dr›≥d
;

49 
__u64
 
	mtx_dr›≥d
;

50 
__u64
 
	mmu…iˇ°
;

51 
__u64
 
	mcﬁlisi⁄s
;

54 
__u64
 
	mrx_Àngth_îr‹s
;

55 
__u64
 
	mrx_ovî_îr‹s
;

56 
__u64
 
	mrx_¸c_îr‹s
;

57 
__u64
 
	mrx_‰ame_îr‹s
;

58 
__u64
 
	mrx_fifo_îr‹s
;

59 
__u64
 
	mrx_mis£d_îr‹s
;

62 
__u64
 
	mtx_ab‹ãd_îr‹s
;

63 
__u64
 
	mtx_ˇºõr_îr‹s
;

64 
__u64
 
	mtx_fifo_îr‹s
;

65 
__u64
 
	mtx_hóπbót_îr‹s
;

66 
__u64
 
	mtx_wödow_îr‹s
;

69 
__u64
 
	mrx_com¥es£d
;

70 
__u64
 
	mtx_com¥es£d
;

74 
	sπ∆_lök_ifm≠
 {

75 
__u64
 
	mmem_°¨t
;

76 
__u64
 
	mmem_íd
;

77 
__u64
 
	mba£_addr
;

78 
__u16
 
	múq
;

79 
__u8
 
	mdma
;

80 
__u8
 
	mp‹t
;

102 
	mIFLA_UNSPEC
,

103 
	mIFLA_ADDRESS
,

104 
	mIFLA_BROADCAST
,

105 
	mIFLA_IFNAME
,

106 
	mIFLA_MTU
,

107 
	mIFLA_LINK
,

108 
	mIFLA_QDISC
,

109 
	mIFLA_STATS
,

110 
	mIFLA_COST
,

111 
	#IFLA_COST
 
IFLA_COST


	)

112 
	mIFLA_PRIORITY
,

113 
	#IFLA_PRIORITY
 
IFLA_PRIORITY


	)

114 
	mIFLA_MASTER
,

115 
	#IFLA_MASTER
 
IFLA_MASTER


	)

116 
	mIFLA_WIRELESS
,

117 
	#IFLA_WIRELESS
 
IFLA_WIRELESS


	)

118 
	mIFLA_PROTINFO
,

119 
	#IFLA_PROTINFO
 
IFLA_PROTINFO


	)

120 
	mIFLA_TXQLEN
,

121 
	#IFLA_TXQLEN
 
IFLA_TXQLEN


	)

122 
	mIFLA_MAP
,

123 
	#IFLA_MAP
 
IFLA_MAP


	)

124 
	mIFLA_WEIGHT
,

125 
	#IFLA_WEIGHT
 
IFLA_WEIGHT


	)

126 
	mIFLA_OPERSTATE
,

127 
	mIFLA_LINKMODE
,

128 
	mIFLA_LINKINFO
,

129 
	#IFLA_LINKINFO
 
IFLA_LINKINFO


	)

130 
	mIFLA_NET_NS_PID
,

131 
	mIFLA_IFALIAS
,

132 
	mIFLA_NUM_VF
,

133 
	mIFLA_VFINFO_LIST
,

134 
	mIFLA_STATS64
,

135 
	mIFLA_VF_PORTS
,

136 
	mIFLA_PORT_SELF
,

137 
	mIFLA_AF_SPEC
,

138 
	mIFLA_GROUP
,

139 
	mIFLA_NET_NS_FD
,

140 
	mIFLA_EXT_MASK
,

141 
	m__IFLA_MAX


145 
	#IFLA_MAX
 (
__IFLA_MAX
 - 1)

	)

148 
	#IFLA_RTA
(
r
Ë((
π©å
*)(((*)‘)Ë+ 
	`NLMSG_ALIGN
((
iföfomsg
))))

	)

149 
	#IFLA_PAYLOAD
(
n
Ë
	`NLMSG_PAYLOAD
“,(
iföfomsg
))

	)

152 
	mIFLA_INET_UNSPEC
,

153 
	mIFLA_INET_CONF
,

154 
	m__IFLA_INET_MAX
,

157 
	#IFLA_INET_MAX
 (
__IFLA_INET_MAX
 - 1)

	)

190 
	mIFLA_INET6_UNSPEC
,

191 
	mIFLA_INET6_FLAGS
,

192 
	mIFLA_INET6_CONF
,

193 
	mIFLA_INET6_STATS
,

194 
	mIFLA_INET6_MCAST
,

195 
	mIFLA_INET6_CACHEINFO
,

196 
	mIFLA_INET6_ICMP6STATS
,

197 
	m__IFLA_INET6_MAX


200 
	#IFLA_INET6_MAX
 (
__IFLA_INET6_MAX
 - 1)

	)

202 
	siÊa_ˇcheöfo
 {

203 
__u32
 
	mmax_ªasm_Àn
;

204 
__u32
 
	mt°amp
;

205 
__u32
 
	mªachabÀ_time
;

206 
__u32
 
	mªå™s_time
;

210 
	mIFLA_INFO_UNSPEC
,

211 
	mIFLA_INFO_KIND
,

212 
	mIFLA_INFO_DATA
,

213 
	mIFLA_INFO_XSTATS
,

214 
	m__IFLA_INFO_MAX
,

217 
	#IFLA_INFO_MAX
 (
__IFLA_INFO_MAX
 - 1)

	)

222 
	mIFLA_VLAN_UNSPEC
,

223 
	mIFLA_VLAN_ID
,

224 
	mIFLA_VLAN_FLAGS
,

225 
	mIFLA_VLAN_EGRESS_QOS
,

226 
	mIFLA_VLAN_INGRESS_QOS
,

227 
	m__IFLA_VLAN_MAX
,

230 
	#IFLA_VLAN_MAX
 (
__IFLA_VLAN_MAX
 - 1)

	)

232 
	siÊa_vœn_Êags
 {

233 
__u32
 
	mÊags
;

234 
__u32
 
	mmask
;

238 
	mIFLA_VLAN_QOS_UNSPEC
,

239 
	mIFLA_VLAN_QOS_MAPPING
,

240 
	m__IFLA_VLAN_QOS_MAX


243 
	#IFLA_VLAN_QOS_MAX
 (
__IFLA_VLAN_QOS_MAX
 - 1)

	)

245 
	siÊa_vœn_qos_m≠pög
 {

246 
__u32
 
	m‰om
;

247 
__u32
 
	mto
;

252 
	mIFLA_MACVLAN_UNSPEC
,

253 
	mIFLA_MACVLAN_MODE
,

254 
	m__IFLA_MACVLAN_MAX
,

257 
	#IFLA_MACVLAN_MAX
 (
__IFLA_MACVLAN_MAX
 - 1)

	)

259 
	emacvœn_mode
 {

260 
	mMACVLAN_MODE_PRIVATE
 = 1,

261 
	mMACVLAN_MODE_VEPA
 = 2,

262 
	mMACVLAN_MODE_BRIDGE
 = 4,

263 
	mMACVLAN_MODE_PASSTHRU
 = 8,

269 
	mIFLA_VF_INFO_UNSPEC
,

270 
	mIFLA_VF_INFO
,

271 
	m__IFLA_VF_INFO_MAX
,

274 
	#IFLA_VF_INFO_MAX
 (
__IFLA_VF_INFO_MAX
 - 1)

	)

277 
	mIFLA_VF_UNSPEC
,

278 
	mIFLA_VF_MAC
,

279 
	mIFLA_VF_VLAN
,

280 
	mIFLA_VF_TX_RATE
,

281 
	mIFLA_VF_SPOOFCHK
,

282 
	m__IFLA_VF_MAX
,

285 
	#IFLA_VF_MAX
 (
__IFLA_VF_MAX
 - 1)

	)

287 
	siÊa_vf_mac
 {

288 
__u32
 
	mvf
;

289 
__u8
 
	mmac
[32];

292 
	siÊa_vf_vœn
 {

293 
__u32
 
	mvf
;

294 
__u32
 
	mvœn
;

295 
__u32
 
	mqos
;

298 
	siÊa_vf_tx_øã
 {

299 
__u32
 
	mvf
;

300 
__u32
 
	møã
;

303 
	siÊa_vf_•oofchk
 {

304 
__u32
 
	mvf
;

305 
__u32
 
	m£âög
;

324 
	mIFLA_VF_PORT_UNSPEC
,

325 
	mIFLA_VF_PORT
,

326 
	m__IFLA_VF_PORT_MAX
,

329 
	#IFLA_VF_PORT_MAX
 (
__IFLA_VF_PORT_MAX
 - 1)

	)

332 
	mIFLA_PORT_UNSPEC
,

333 
	mIFLA_PORT_VF
,

334 
	mIFLA_PORT_PROFILE
,

335 
	mIFLA_PORT_VSI_TYPE
,

336 
	mIFLA_PORT_INSTANCE_UUID
,

337 
	mIFLA_PORT_HOST_UUID
,

338 
	mIFLA_PORT_REQUEST
,

339 
	mIFLA_PORT_RESPONSE
,

340 
	m__IFLA_PORT_MAX
,

343 
	#IFLA_PORT_MAX
 (
__IFLA_PORT_MAX
 - 1)

	)

345 
	#PORT_PROFILE_MAX
 40

	)

346 
	#PORT_UUID_MAX
 16

	)

347 
	#PORT_SELF_VF
 -1

	)

350 
	mPORT_REQUEST_PREASSOCIATE
 = 0,

351 
	mPORT_REQUEST_PREASSOCIATE_RR
,

352 
	mPORT_REQUEST_ASSOCIATE
,

353 
	mPORT_REQUEST_DISASSOCIATE
,

357 
	mPORT_VDP_RESPONSE_SUCCESS
 = 0,

358 
	mPORT_VDP_RESPONSE_INVALID_FORMAT
,

359 
	mPORT_VDP_RESPONSE_INSUFFICIENT_RESOURCES
,

360 
	mPORT_VDP_RESPONSE_UNUSED_VTID
,

361 
	mPORT_VDP_RESPONSE_VTID_VIOLATION
,

362 
	mPORT_VDP_RESPONSE_VTID_VERSION_VIOALTION
,

363 
	mPORT_VDP_RESPONSE_OUT_OF_SYNC
,

365 
	mPORT_PROFILE_RESPONSE_SUCCESS
 = 0x100,

366 
	mPORT_PROFILE_RESPONSE_INPROGRESS
,

367 
	mPORT_PROFILE_RESPONSE_INVALID
,

368 
	mPORT_PROFILE_RESPONSE_BADSTATE
,

369 
	mPORT_PROFILE_RESPONSE_INSUFFICIENT_RESOURCES
,

370 
	mPORT_PROFILE_RESPONSE_ERROR
,

373 
	siÊa_p‹t_vsi
 {

374 
__u8
 
	mvsi_mgr_id
;

375 
__u8
 
	mvsi_ty≥_id
[3];

376 
__u8
 
	mvsi_ty≥_vîsi⁄
;

377 
__u8
 
	m∑d
[3];

	@/usr/include/linux/if_packet.h

1 #i‚de‡
__LINUX_IF_PACKET_H


2 
	#__LINUX_IF_PACKET_H


	)

4 
	~<löux/ty≥s.h
>

6 
	ssockaddr_pkt
 {

7 
	m•kt_Ámûy
;

8 
	m•kt_devi˚
[14];

9 
__be16
 
	m•kt_¥Ÿocﬁ
;

12 
	ssockaddr_Œ
 {

13 
	m¶l_Ámûy
;

14 
__be16
 
	m¶l_¥Ÿocﬁ
;

15 
	m¶l_ifödex
;

16 
	m¶l_h©y≥
;

17 
	m¶l_pkây≥
;

18 
	m¶l_hÆí
;

19 
	m¶l_addr
[8];

24 
	#PACKET_HOST
 0

	)

25 
	#PACKET_BROADCAST
 1

	)

26 
	#PACKET_MULTICAST
 2

	)

27 
	#PACKET_OTHERHOST
 3

	)

28 
	#PACKET_OUTGOING
 4

	)

30 
	#PACKET_LOOPBACK
 5

	)

31 
	#PACKET_FASTROUTE
 6

	)

35 
	#PACKET_ADD_MEMBERSHIP
 1

	)

36 
	#PACKET_DROP_MEMBERSHIP
 2

	)

37 
	#PACKET_RECV_OUTPUT
 3

	)

39 
	#PACKET_RX_RING
 5

	)

40 
	#PACKET_STATISTICS
 6

	)

41 
	#PACKET_COPY_THRESH
 7

	)

42 
	#PACKET_AUXDATA
 8

	)

43 
	#PACKET_ORIGDEV
 9

	)

44 
	#PACKET_VERSION
 10

	)

45 
	#PACKET_HDRLEN
 11

	)

46 
	#PACKET_RESERVE
 12

	)

47 
	#PACKET_TX_RING
 13

	)

48 
	#PACKET_LOSS
 14

	)

49 
	#PACKET_VNET_HDR
 15

	)

50 
	#PACKET_TX_TIMESTAMP
 16

	)

51 
	#PACKET_TIMESTAMP
 17

	)

52 
	#PACKET_FANOUT
 18

	)

54 
	#PACKET_FANOUT_HASH
 0

	)

55 
	#PACKET_FANOUT_LB
 1

	)

56 
	#PACKET_FANOUT_CPU
 2

	)

57 
	#PACKET_FANOUT_FLAG_DEFRAG
 0x8000

	)

59 
	sçackë_°©s
 {

60 
	mç_∑ckës
;

61 
	mç_dr›s
;

64 
	sçackë_°©s_v3
 {

65 
	mç_∑ckës
;

66 
	mç_dr›s
;

67 
	mç_‰ìze_q_˙t
;

70 
	uçackë_°©s_u
 {

71 
çackë_°©s
 
	m°©s1
;

72 
çackë_°©s_v3
 
	m°©s3
;

75 
	sçackë_auxd©a
 {

76 
__u32
 
	mç_°©us
;

77 
__u32
 
	mç_Àn
;

78 
__u32
 
	mç_¢≠Àn
;

79 
__u16
 
	mç_mac
;

80 
__u16
 
	mç_√t
;

81 
__u16
 
	mç_vœn_tci
;

82 
__u16
 
	mç_∑ddög
;

86 
	#TP_STATUS_KERNEL
 0x0

	)

87 
	#TP_STATUS_USER
 0x1

	)

88 
	#TP_STATUS_COPY
 0x2

	)

89 
	#TP_STATUS_LOSING
 0x4

	)

90 
	#TP_STATUS_CSUMNOTREADY
 0x8

	)

91 
	#TP_STATUS_VLAN_VALID
 0x10

	)

92 
	#TP_STATUS_BLK_TMO
 0x20

	)

95 
	#TP_STATUS_AVAILABLE
 0x0

	)

96 
	#TP_STATUS_SEND_REQUEST
 0x1

	)

97 
	#TP_STATUS_SENDING
 0x2

	)

98 
	#TP_STATUS_WRONG_FORMAT
 0x4

	)

101 
	#TP_FT_REQ_FILL_RXHASH
 0x1

	)

103 
	sçackë_hdr
 {

104 
	mç_°©us
;

105 
	mç_Àn
;

106 
	mç_¢≠Àn
;

107 
	mç_mac
;

108 
	mç_√t
;

109 
	mç_£c
;

110 
	mç_u£c
;

113 
	#TPACKET_ALIGNMENT
 16

	)

114 
	#TPACKET_ALIGN
(
x
Ë(((x)+
TPACKET_ALIGNMENT
-1)&~(TPACKET_ALIGNMENT-1))

	)

115 
	#TPACKET_HDRLEN
 (
	`TPACKET_ALIGN
((
çackë_hdr
)Ë+ (
sockaddr_Œ
))

	)

117 
	sçackë2_hdr
 {

118 
__u32
 
	mç_°©us
;

119 
__u32
 
	mç_Àn
;

120 
__u32
 
	mç_¢≠Àn
;

121 
__u16
 
	mç_mac
;

122 
__u16
 
	mç_√t
;

123 
__u32
 
	mç_£c
;

124 
__u32
 
	mç_n£c
;

125 
__u16
 
	mç_vœn_tci
;

126 
__u16
 
	mç_∑ddög
;

129 
	sçackë_hdr_v¨ü¡1
 {

130 
__u32
 
	mç_rxhash
;

131 
__u32
 
	mç_vœn_tci
;

134 
	sçackë3_hdr
 {

135 
__u32
 
	mç_√xt_off£t
;

136 
__u32
 
	mç_£c
;

137 
__u32
 
	mç_n£c
;

138 
__u32
 
	mç_¢≠Àn
;

139 
__u32
 
	mç_Àn
;

140 
__u32
 
	mç_°©us
;

141 
__u16
 
	mç_mac
;

142 
__u16
 
	mç_√t
;

145 
çackë_hdr_v¨ü¡1
 
	mhv1
;

149 
	sçackë_bd_ts
 {

150 
	mts_£c
;

152 
	mts_u£c
;

153 
	mts_n£c
;

157 
	sçackë_hdr_v1
 {

158 
__u32
 
	mblock_°©us
;

159 
__u32
 
	mnum_pkts
;

160 
__u32
 
	moff£t_to_fú°_pkt
;

165 
__u32
 
	mblk_Àn
;

176 
__Æig√d_u64
 
	m£q_num
;

203 
çackë_bd_ts
 
	mts_fú°_pkt
, 
	mts_œ°_pkt
;

206 
	uçackë_bd_hódî_u
 {

207 
çackë_hdr_v1
 
	mbh1
;

210 
	sçackë_block_desc
 {

211 
__u32
 
	mvîsi⁄
;

212 
__u32
 
	moff£t_to_¥iv
;

213 
çackë_bd_hódî_u
 
	mhdr
;

216 
	#TPACKET2_HDRLEN
 (
	`TPACKET_ALIGN
((
çackë2_hdr
)Ë+ (
sockaddr_Œ
))

	)

217 
	#TPACKET3_HDRLEN
 (
	`TPACKET_ALIGN
((
çackë3_hdr
)Ë+ (
sockaddr_Œ
))

	)

219 
	eçackë_vîsi⁄s
 {

220 
	mTPACKET_V1
,

221 
	mTPACKET_V2
,

222 
	mTPACKET_V3


238 
	sçackë_ªq
 {

239 
	mç_block_size
;

240 
	mç_block_ƒ
;

241 
	mç_‰ame_size
;

242 
	mç_‰ame_ƒ
;

245 
	sçackë_ªq3
 {

246 
	mç_block_size
;

247 
	mç_block_ƒ
;

248 
	mç_‰ame_size
;

249 
	mç_‰ame_ƒ
;

250 
	mç_ªtúe_blk_tov
;

251 
	mç_sizeof_¥iv
;

252 
	mç_„©uª_ªq_w‹d
;

255 
	uçackë_ªq_u
 {

256 
çackë_ªq
 
	mªq
;

257 
çackë_ªq3
 
	mªq3
;

260 
	s∑ckë_mªq
 {

261 
	mmr_ifödex
;

262 
	mmr_ty≥
;

263 
	mmr_Æí
;

264 
	mmr_addªss
[8];

267 
	#PACKET_MR_MULTICAST
 0

	)

268 
	#PACKET_MR_PROMISC
 1

	)

269 
	#PACKET_MR_ALLMULTI
 2

	)

270 
	#PACKET_MR_UNICAST
 3

	)

	@/usr/include/linux/in6.h

21 #i‚de‡
_LINUX_IN6_H


22 
	#_LINUX_IN6_H


	)

24 
	~<löux/ty≥s.h
>

30 
	sö6_addr
 {

32 
__u8
 
	mu6_addr8
[16];

33 
__be16
 
	mu6_addr16
[8];

34 
__be32
 
	mu6_addr32
[4];

35 } 
	mö6_u
;

36 
	#s6_addr
 
ö6_u
.
u6_addr8


	)

37 
	#s6_addr16
 
ö6_u
.
u6_addr16


	)

38 
	#s6_addr32
 
ö6_u
.
u6_addr32


	)

46 
	ssockaddr_ö6
 {

47 
	msö6_Ámûy
;

48 
__be16
 
	msö6_p‹t
;

49 
__be32
 
	msö6_Êowöfo
;

50 
ö6_addr
 
	msö6_addr
;

51 
__u32
 
	msö6_sc›e_id
;

54 
	sùv6_mªq
 {

56 
ö6_addr
 
	mùv6mr_mu…üddr
;

59 
	mùv6mr_ifödex
;

62 
	#ùv6mr_aˇddr
 
ùv6mr_mu…üddr


	)

64 
	sö6_Êowœbñ_ªq
 {

65 
ö6_addr
 
	mÊr_d°
;

66 
__be32
 
	mÊr_œbñ
;

67 
__u8
 
	mÊr_a˘i⁄
;

68 
__u8
 
	mÊr_sh¨e
;

69 
__u16
 
	mÊr_Êags
;

70 
__u16
 
	mÊr_expúes
;

71 
__u16
 
	mÊr_lögî
;

72 
__u32
 
	m__Êr_∑d
;

76 
	#IPV6_FL_A_GET
 0

	)

77 
	#IPV6_FL_A_PUT
 1

	)

78 
	#IPV6_FL_A_RENEW
 2

	)

80 
	#IPV6_FL_F_CREATE
 1

	)

81 
	#IPV6_FL_F_EXCL
 2

	)

83 
	#IPV6_FL_S_NONE
 0

	)

84 
	#IPV6_FL_S_EXCL
 1

	)

85 
	#IPV6_FL_S_PROCESS
 2

	)

86 
	#IPV6_FL_S_USER
 3

	)

87 
	#IPV6_FL_S_ANY
 255

	)

98 
	#IPV6_FLOWINFO_FLOWLABEL
 0x000fffff

	)

99 
	#IPV6_FLOWINFO_PRIORITY
 0x0ff00000

	)

102 
	#IPV6_PRIORITY_UNCHARACTERIZED
 0x0000

	)

103 
	#IPV6_PRIORITY_FILLER
 0x0100

	)

104 
	#IPV6_PRIORITY_UNATTENDED
 0x0200

	)

105 
	#IPV6_PRIORITY_RESERVED1
 0x0300

	)

106 
	#IPV6_PRIORITY_BULK
 0x0400

	)

107 
	#IPV6_PRIORITY_RESERVED2
 0x0500

	)

108 
	#IPV6_PRIORITY_INTERACTIVE
 0x0600

	)

109 
	#IPV6_PRIORITY_CONTROL
 0x0700

	)

110 
	#IPV6_PRIORITY_8
 0x0800

	)

111 
	#IPV6_PRIORITY_9
 0x0900

	)

112 
	#IPV6_PRIORITY_10
 0x0a00

	)

113 
	#IPV6_PRIORITY_11
 0x0b00

	)

114 
	#IPV6_PRIORITY_12
 0x0c00

	)

115 
	#IPV6_PRIORITY_13
 0x0d00

	)

116 
	#IPV6_PRIORITY_14
 0x0e00

	)

117 
	#IPV6_PRIORITY_15
 0x0f00

	)

122 
	#IPPROTO_HOPOPTS
 0

	)

123 
	#IPPROTO_ROUTING
 43

	)

124 
	#IPPROTO_FRAGMENT
 44

	)

125 
	#IPPROTO_ICMPV6
 58

	)

126 
	#IPPROTO_NONE
 59

	)

127 
	#IPPROTO_DSTOPTS
 60

	)

128 
	#IPPROTO_MH
 135

	)

133 
	#IPV6_TLV_PAD0
 0

	)

134 
	#IPV6_TLV_PADN
 1

	)

135 
	#IPV6_TLV_ROUTERALERT
 5

	)

136 
	#IPV6_TLV_JUMBO
 194

	)

137 
	#IPV6_TLV_HAO
 201

	)

143 
	#IPV6_ADDRFORM
 1

	)

144 
	#IPV6_2292PKTINFO
 2

	)

145 
	#IPV6_2292HOPOPTS
 3

	)

146 
	#IPV6_2292DSTOPTS
 4

	)

147 
	#IPV6_2292RTHDR
 5

	)

148 
	#IPV6_2292PKTOPTIONS
 6

	)

149 
	#IPV6_CHECKSUM
 7

	)

150 
	#IPV6_2292HOPLIMIT
 8

	)

151 
	#IPV6_NEXTHOP
 9

	)

152 
	#IPV6_AUTHHDR
 10

	)

153 
	#IPV6_FLOWINFO
 11

	)

155 
	#IPV6_UNICAST_HOPS
 16

	)

156 
	#IPV6_MULTICAST_IF
 17

	)

157 
	#IPV6_MULTICAST_HOPS
 18

	)

158 
	#IPV6_MULTICAST_LOOP
 19

	)

159 
	#IPV6_ADD_MEMBERSHIP
 20

	)

160 
	#IPV6_DROP_MEMBERSHIP
 21

	)

161 
	#IPV6_ROUTER_ALERT
 22

	)

162 
	#IPV6_MTU_DISCOVER
 23

	)

163 
	#IPV6_MTU
 24

	)

164 
	#IPV6_RECVERR
 25

	)

165 
	#IPV6_V6ONLY
 26

	)

166 
	#IPV6_JOIN_ANYCAST
 27

	)

167 
	#IPV6_LEAVE_ANYCAST
 28

	)

170 
	#IPV6_PMTUDISC_DONT
 0

	)

171 
	#IPV6_PMTUDISC_WANT
 1

	)

172 
	#IPV6_PMTUDISC_DO
 2

	)

173 
	#IPV6_PMTUDISC_PROBE
 3

	)

176 
	#IPV6_FLOWLABEL_MGR
 32

	)

177 
	#IPV6_FLOWINFO_SEND
 33

	)

179 
	#IPV6_IPSEC_POLICY
 34

	)

180 
	#IPV6_XFRM_POLICY
 35

	)

201 
	#IPV6_RECVPKTINFO
 49

	)

202 
	#IPV6_PKTINFO
 50

	)

203 
	#IPV6_RECVHOPLIMIT
 51

	)

204 
	#IPV6_HOPLIMIT
 52

	)

205 
	#IPV6_RECVHOPOPTS
 53

	)

206 
	#IPV6_HOPOPTS
 54

	)

207 
	#IPV6_RTHDRDSTOPTS
 55

	)

208 
	#IPV6_RECVRTHDR
 56

	)

209 
	#IPV6_RTHDR
 57

	)

210 
	#IPV6_RECVDSTOPTS
 58

	)

211 
	#IPV6_DSTOPTS
 59

	)

212 
	#IPV6_RECVPATHMTU
 60

	)

213 
	#IPV6_PATHMTU
 61

	)

214 
	#IPV6_DONTFRAG
 62

	)

216 
	#IPV6_USE_MIN_MTU
 63

	)

232 
	#IPV6_RECVTCLASS
 66

	)

233 
	#IPV6_TCLASS
 67

	)

246 
	#IPV6_ADDR_PREFERENCES
 72

	)

248 
	#IPV6_PREFER_SRC_TMP
 0x0001

	)

249 
	#IPV6_PREFER_SRC_PUBLIC
 0x0002

	)

250 
	#IPV6_PREFER_SRC_PUBTMP_DEFAULT
 0x0100

	)

251 
	#IPV6_PREFER_SRC_COA
 0x0004

	)

252 
	#IPV6_PREFER_SRC_HOME
 0x0400

	)

253 
	#IPV6_PREFER_SRC_CGA
 0x0008

	)

254 
	#IPV6_PREFER_SRC_NONCGA
 0x0800

	)

257 
	#IPV6_MINHOPCOUNT
 73

	)

259 
	#IPV6_ORIGDSTADDR
 74

	)

260 
	#IPV6_RECVORIGDSTADDR
 
IPV6_ORIGDSTADDR


	)

261 
	#IPV6_TRANSPARENT
 75

	)

	@/usr/include/linux/pci_regs.h

22 #i‚de‡
LINUX_PCI_REGS_H


23 
	#LINUX_PCI_REGS_H


	)

29 
	#PCI_VENDOR_ID
 0x00

	)

30 
	#PCI_DEVICE_ID
 0x02

	)

31 
	#PCI_COMMAND
 0x04

	)

32 
	#PCI_COMMAND_IO
 0x1

	)

33 
	#PCI_COMMAND_MEMORY
 0x2

	)

34 
	#PCI_COMMAND_MASTER
 0x4

	)

35 
	#PCI_COMMAND_SPECIAL
 0x8

	)

36 
	#PCI_COMMAND_INVALIDATE
 0x10

	)

37 
	#PCI_COMMAND_VGA_PALETTE
 0x20

	)

38 
	#PCI_COMMAND_PARITY
 0x40

	)

39 
	#PCI_COMMAND_WAIT
 0x80

	)

40 
	#PCI_COMMAND_SERR
 0x100

	)

41 
	#PCI_COMMAND_FAST_BACK
 0x200

	)

42 
	#PCI_COMMAND_INTX_DISABLE
 0x400

	)

44 
	#PCI_STATUS
 0x06

	)

45 
	#PCI_STATUS_INTERRUPT
 0x08

	)

46 
	#PCI_STATUS_CAP_LIST
 0x10

	)

47 
	#PCI_STATUS_66MHZ
 0x20

	)

48 
	#PCI_STATUS_UDF
 0x40

	)

49 
	#PCI_STATUS_FAST_BACK
 0x80

	)

50 
	#PCI_STATUS_PARITY
 0x100

	)

51 
	#PCI_STATUS_DEVSEL_MASK
 0x600

	)

52 
	#PCI_STATUS_DEVSEL_FAST
 0x000

	)

53 
	#PCI_STATUS_DEVSEL_MEDIUM
 0x200

	)

54 
	#PCI_STATUS_DEVSEL_SLOW
 0x400

	)

55 
	#PCI_STATUS_SIG_TARGET_ABORT
 0x800

	)

56 
	#PCI_STATUS_REC_TARGET_ABORT
 0x1000

	)

57 
	#PCI_STATUS_REC_MASTER_ABORT
 0x2000

	)

58 
	#PCI_STATUS_SIG_SYSTEM_ERROR
 0x4000

	)

59 
	#PCI_STATUS_DETECTED_PARITY
 0x8000

	)

61 
	#PCI_CLASS_REVISION
 0x08

	)

62 
	#PCI_REVISION_ID
 0x08

	)

63 
	#PCI_CLASS_PROG
 0x09

	)

64 
	#PCI_CLASS_DEVICE
 0x0®

	)

66 
	#PCI_CACHE_LINE_SIZE
 0x0¯

	)

67 
	#PCI_LATENCY_TIMER
 0x0d

	)

68 
	#PCI_HEADER_TYPE
 0x0ê

	)

69 
	#PCI_HEADER_TYPE_NORMAL
 0

	)

70 
	#PCI_HEADER_TYPE_BRIDGE
 1

	)

71 
	#PCI_HEADER_TYPE_CARDBUS
 2

	)

73 
	#PCI_BIST
 0x0‡

	)

74 
	#PCI_BIST_CODE_MASK
 0x0‡

	)

75 
	#PCI_BIST_START
 0x40

	)

76 
	#PCI_BIST_CAPABLE
 0x80

	)

84 
	#PCI_BASE_ADDRESS_0
 0x10

	)

85 
	#PCI_BASE_ADDRESS_1
 0x14

	)

86 
	#PCI_BASE_ADDRESS_2
 0x18

	)

87 
	#PCI_BASE_ADDRESS_3
 0x1¯

	)

88 
	#PCI_BASE_ADDRESS_4
 0x20

	)

89 
	#PCI_BASE_ADDRESS_5
 0x24

	)

90 
	#PCI_BASE_ADDRESS_SPACE
 0x01

	)

91 
	#PCI_BASE_ADDRESS_SPACE_IO
 0x01

	)

92 
	#PCI_BASE_ADDRESS_SPACE_MEMORY
 0x00

	)

93 
	#PCI_BASE_ADDRESS_MEM_TYPE_MASK
 0x06

	)

94 
	#PCI_BASE_ADDRESS_MEM_TYPE_32
 0x00

	)

95 
	#PCI_BASE_ADDRESS_MEM_TYPE_1M
 0x02

	)

96 
	#PCI_BASE_ADDRESS_MEM_TYPE_64
 0x04

	)

97 
	#PCI_BASE_ADDRESS_MEM_PREFETCH
 0x08

	)

98 
	#PCI_BASE_ADDRESS_MEM_MASK
 (~0x0fUL)

	)

99 
	#PCI_BASE_ADDRESS_IO_MASK
 (~0x03UL)

	)

103 
	#PCI_CARDBUS_CIS
 0x28

	)

104 
	#PCI_SUBSYSTEM_VENDOR_ID
 0x2c

	)

105 
	#PCI_SUBSYSTEM_ID
 0x2e

	)

106 
	#PCI_ROM_ADDRESS
 0x30

	)

107 
	#PCI_ROM_ADDRESS_ENABLE
 0x01

	)

108 
	#PCI_ROM_ADDRESS_MASK
 (~0x7ffUL)

	)

110 
	#PCI_CAPABILITY_LIST
 0x34

	)

113 
	#PCI_INTERRUPT_LINE
 0x3¯

	)

114 
	#PCI_INTERRUPT_PIN
 0x3d

	)

115 
	#PCI_MIN_GNT
 0x3ê

	)

116 
	#PCI_MAX_LAT
 0x3‡

	)

119 
	#PCI_PRIMARY_BUS
 0x18

	)

120 
	#PCI_SECONDARY_BUS
 0x19

	)

121 
	#PCI_SUBORDINATE_BUS
 0x1®

	)

122 
	#PCI_SEC_LATENCY_TIMER
 0x1b

	)

123 
	#PCI_IO_BASE
 0x1¯

	)

124 
	#PCI_IO_LIMIT
 0x1d

	)

125 
	#PCI_IO_RANGE_TYPE_MASK
 0x0fUL

	)

126 
	#PCI_IO_RANGE_TYPE_16
 0x00

	)

127 
	#PCI_IO_RANGE_TYPE_32
 0x01

	)

128 
	#PCI_IO_RANGE_MASK
 (~0x0fUL)

	)

129 
	#PCI_SEC_STATUS
 0x1ê

	)

130 
	#PCI_MEMORY_BASE
 0x20

	)

131 
	#PCI_MEMORY_LIMIT
 0x22

	)

132 
	#PCI_MEMORY_RANGE_TYPE_MASK
 0x0fUL

	)

133 
	#PCI_MEMORY_RANGE_MASK
 (~0x0fUL)

	)

134 
	#PCI_PREF_MEMORY_BASE
 0x24

	)

135 
	#PCI_PREF_MEMORY_LIMIT
 0x26

	)

136 
	#PCI_PREF_RANGE_TYPE_MASK
 0x0fUL

	)

137 
	#PCI_PREF_RANGE_TYPE_32
 0x00

	)

138 
	#PCI_PREF_RANGE_TYPE_64
 0x01

	)

139 
	#PCI_PREF_RANGE_MASK
 (~0x0fUL)

	)

140 
	#PCI_PREF_BASE_UPPER32
 0x28

	)

141 
	#PCI_PREF_LIMIT_UPPER32
 0x2c

	)

142 
	#PCI_IO_BASE_UPPER16
 0x30

	)

143 
	#PCI_IO_LIMIT_UPPER16
 0x32

	)

146 
	#PCI_ROM_ADDRESS1
 0x38

	)

148 
	#PCI_BRIDGE_CONTROL
 0x3e

	)

149 
	#PCI_BRIDGE_CTL_PARITY
 0x01

	)

150 
	#PCI_BRIDGE_CTL_SERR
 0x02

	)

151 
	#PCI_BRIDGE_CTL_ISA
 0x04

	)

152 
	#PCI_BRIDGE_CTL_VGA
 0x08

	)

153 
	#PCI_BRIDGE_CTL_MASTER_ABORT
 0x20

	)

154 
	#PCI_BRIDGE_CTL_BUS_RESET
 0x40

	)

155 
	#PCI_BRIDGE_CTL_FAST_BACK
 0x80

	)

158 
	#PCI_CB_CAPABILITY_LIST
 0x14

	)

160 
	#PCI_CB_SEC_STATUS
 0x16

	)

161 
	#PCI_CB_PRIMARY_BUS
 0x18

	)

162 
	#PCI_CB_CARD_BUS
 0x19

	)

163 
	#PCI_CB_SUBORDINATE_BUS
 0x1®

	)

164 
	#PCI_CB_LATENCY_TIMER
 0x1b

	)

165 
	#PCI_CB_MEMORY_BASE_0
 0x1c

	)

166 
	#PCI_CB_MEMORY_LIMIT_0
 0x20

	)

167 
	#PCI_CB_MEMORY_BASE_1
 0x24

	)

168 
	#PCI_CB_MEMORY_LIMIT_1
 0x28

	)

169 
	#PCI_CB_IO_BASE_0
 0x2c

	)

170 
	#PCI_CB_IO_BASE_0_HI
 0x2e

	)

171 
	#PCI_CB_IO_LIMIT_0
 0x30

	)

172 
	#PCI_CB_IO_LIMIT_0_HI
 0x32

	)

173 
	#PCI_CB_IO_BASE_1
 0x34

	)

174 
	#PCI_CB_IO_BASE_1_HI
 0x36

	)

175 
	#PCI_CB_IO_LIMIT_1
 0x38

	)

176 
	#PCI_CB_IO_LIMIT_1_HI
 0x3a

	)

177 
	#PCI_CB_IO_RANGE_MASK
 (~0x03UL)

	)

179 
	#PCI_CB_BRIDGE_CONTROL
 0x3e

	)

180 
	#PCI_CB_BRIDGE_CTL_PARITY
 0x01

	)

181 
	#PCI_CB_BRIDGE_CTL_SERR
 0x02

	)

182 
	#PCI_CB_BRIDGE_CTL_ISA
 0x04

	)

183 
	#PCI_CB_BRIDGE_CTL_VGA
 0x08

	)

184 
	#PCI_CB_BRIDGE_CTL_MASTER_ABORT
 0x20

	)

185 
	#PCI_CB_BRIDGE_CTL_CB_RESET
 0x40

	)

186 
	#PCI_CB_BRIDGE_CTL_16BIT_INT
 0x80

	)

187 
	#PCI_CB_BRIDGE_CTL_PREFETCH_MEM0
 0x100

	)

188 
	#PCI_CB_BRIDGE_CTL_PREFETCH_MEM1
 0x200

	)

189 
	#PCI_CB_BRIDGE_CTL_POST_WRITES
 0x400

	)

190 
	#PCI_CB_SUBSYSTEM_VENDOR_ID
 0x40

	)

191 
	#PCI_CB_SUBSYSTEM_ID
 0x42

	)

192 
	#PCI_CB_LEGACY_MODE_BASE
 0x44

	)

197 
	#PCI_CAP_LIST_ID
 0

	)

198 
	#PCI_CAP_ID_PM
 0x01

	)

199 
	#PCI_CAP_ID_AGP
 0x02

	)

200 
	#PCI_CAP_ID_VPD
 0x03

	)

201 
	#PCI_CAP_ID_SLOTID
 0x04

	)

202 
	#PCI_CAP_ID_MSI
 0x05

	)

203 
	#PCI_CAP_ID_CHSWP
 0x06

	)

204 
	#PCI_CAP_ID_PCIX
 0x07

	)

205 
	#PCI_CAP_ID_HT
 0x08

	)

206 
	#PCI_CAP_ID_VNDR
 0x09

	)

207 
	#PCI_CAP_ID_DBG
 0x0A

	)

208 
	#PCI_CAP_ID_CCRC
 0x0B

	)

209 
	#PCI_CAP_ID_SHPC
 0x0C

	)

210 
	#PCI_CAP_ID_SSVID
 0x0D

	)

211 
	#PCI_CAP_ID_AGP3
 0x0E

	)

212 
	#PCI_CAP_ID_EXP
 0x10

	)

213 
	#PCI_CAP_ID_MSIX
 0x11

	)

214 
	#PCI_CAP_ID_AF
 0x13

	)

215 
	#PCI_CAP_LIST_NEXT
 1

	)

216 
	#PCI_CAP_FLAGS
 2

	)

217 
	#PCI_CAP_SIZEOF
 4

	)

221 
	#PCI_PM_PMC
 2

	)

222 
	#PCI_PM_CAP_VER_MASK
 0x0007

	)

223 
	#PCI_PM_CAP_PME_CLOCK
 0x0008

	)

224 
	#PCI_PM_CAP_RESERVED
 0x0010

	)

225 
	#PCI_PM_CAP_DSI
 0x0020

	)

226 
	#PCI_PM_CAP_AUX_POWER
 0x01C0

	)

227 
	#PCI_PM_CAP_D1
 0x0200

	)

228 
	#PCI_PM_CAP_D2
 0x0400

	)

229 
	#PCI_PM_CAP_PME
 0x0800

	)

230 
	#PCI_PM_CAP_PME_MASK
 0xF800

	)

231 
	#PCI_PM_CAP_PME_D0
 0x0800

	)

232 
	#PCI_PM_CAP_PME_D1
 0x1000

	)

233 
	#PCI_PM_CAP_PME_D2
 0x2000

	)

234 
	#PCI_PM_CAP_PME_D3
 0x4000

	)

235 
	#PCI_PM_CAP_PME_D3cﬁd
 0x8000

	)

236 
	#PCI_PM_CAP_PME_SHIFT
 11

	)

237 
	#PCI_PM_CTRL
 4

	)

238 
	#PCI_PM_CTRL_STATE_MASK
 0x0003

	)

239 
	#PCI_PM_CTRL_NO_SOFT_RESET
 0x0008

	)

240 
	#PCI_PM_CTRL_PME_ENABLE
 0x0100

	)

241 
	#PCI_PM_CTRL_DATA_SEL_MASK
 0x1e00

	)

242 
	#PCI_PM_CTRL_DATA_SCALE_MASK
 0x6000

	)

243 
	#PCI_PM_CTRL_PME_STATUS
 0x8000

	)

244 
	#PCI_PM_PPB_EXTENSIONS
 6

	)

245 
	#PCI_PM_PPB_B2_B3
 0x40

	)

246 
	#PCI_PM_BPCC_ENABLE
 0x80

	)

247 
	#PCI_PM_DATA_REGISTER
 7

	)

248 
	#PCI_PM_SIZEOF
 8

	)

252 
	#PCI_AGP_VERSION
 2

	)

253 
	#PCI_AGP_RFU
 3

	)

254 
	#PCI_AGP_STATUS
 4

	)

255 
	#PCI_AGP_STATUS_RQ_MASK
 0xff000000

	)

256 
	#PCI_AGP_STATUS_SBA
 0x0200

	)

257 
	#PCI_AGP_STATUS_64BIT
 0x0020

	)

258 
	#PCI_AGP_STATUS_FW
 0x0010

	)

259 
	#PCI_AGP_STATUS_RATE4
 0x0004

	)

260 
	#PCI_AGP_STATUS_RATE2
 0x0002

	)

261 
	#PCI_AGP_STATUS_RATE1
 0x0001

	)

262 
	#PCI_AGP_COMMAND
 8

	)

263 
	#PCI_AGP_COMMAND_RQ_MASK
 0xff000000

	)

264 
	#PCI_AGP_COMMAND_SBA
 0x0200

	)

265 
	#PCI_AGP_COMMAND_AGP
 0x0100

	)

266 
	#PCI_AGP_COMMAND_64BIT
 0x0020

	)

267 
	#PCI_AGP_COMMAND_FW
 0x0010

	)

268 
	#PCI_AGP_COMMAND_RATE4
 0x0004

	)

269 
	#PCI_AGP_COMMAND_RATE2
 0x0002

	)

270 
	#PCI_AGP_COMMAND_RATE1
 0x0001

	)

271 
	#PCI_AGP_SIZEOF
 12

	)

275 
	#PCI_VPD_ADDR
 2

	)

276 
	#PCI_VPD_ADDR_MASK
 0x7ff‡

	)

277 
	#PCI_VPD_ADDR_F
 0x8000

	)

278 
	#PCI_VPD_DATA
 4

	)

282 
	#PCI_SID_ESR
 2

	)

283 
	#PCI_SID_ESR_NSLOTS
 0x1‡

	)

284 
	#PCI_SID_ESR_FIC
 0x20

	)

285 
	#PCI_SID_CHASSIS_NR
 3

	)

289 
	#PCI_MSI_FLAGS
 2

	)

290 
	#PCI_MSI_FLAGS_64BIT
 0x80

	)

291 
	#PCI_MSI_FLAGS_QSIZE
 0x70

	)

292 
	#PCI_MSI_FLAGS_QMASK
 0x0ê

	)

293 
	#PCI_MSI_FLAGS_ENABLE
 0x01

	)

294 
	#PCI_MSI_FLAGS_MASKBIT
 0x100

	)

295 
	#PCI_MSI_RFU
 3

	)

296 
	#PCI_MSI_ADDRESS_LO
 4

	)

297 
	#PCI_MSI_ADDRESS_HI
 8

	)

298 
	#PCI_MSI_DATA_32
 8

	)

299 
	#PCI_MSI_MASK_32
 12

	)

300 
	#PCI_MSI_DATA_64
 12

	)

301 
	#PCI_MSI_MASK_64
 16

	)

304 
	#PCI_MSIX_FLAGS
 2

	)

305 
	#PCI_MSIX_FLAGS_QSIZE
 0x7FF

	)

306 
	#PCI_MSIX_FLAGS_ENABLE
 (1 << 15)

	)

307 
	#PCI_MSIX_FLAGS_MASKALL
 (1 << 14)

	)

308 
	#PCI_MSIX_TABLE
 4

	)

309 
	#PCI_MSIX_PBA
 8

	)

310 
	#PCI_MSIX_FLAGS_BIRMASK
 (7 << 0)

	)

313 
	#PCI_MSIX_ENTRY_SIZE
 16

	)

314 
	#PCI_MSIX_ENTRY_LOWER_ADDR
 0

	)

315 
	#PCI_MSIX_ENTRY_UPPER_ADDR
 4

	)

316 
	#PCI_MSIX_ENTRY_DATA
 8

	)

317 
	#PCI_MSIX_ENTRY_VECTOR_CTRL
 12

	)

318 
	#PCI_MSIX_ENTRY_CTRL_MASKBIT
 1

	)

322 
	#PCI_CHSWP_CSR
 2

	)

323 
	#PCI_CHSWP_DHA
 0x01

	)

324 
	#PCI_CHSWP_EIM
 0x02

	)

325 
	#PCI_CHSWP_PIE
 0x04

	)

326 
	#PCI_CHSWP_LOO
 0x08

	)

327 
	#PCI_CHSWP_PI
 0x30

	)

328 
	#PCI_CHSWP_EXT
 0x40

	)

329 
	#PCI_CHSWP_INS
 0x80

	)

333 
	#PCI_AF_LENGTH
 2

	)

334 
	#PCI_AF_CAP
 3

	)

335 
	#PCI_AF_CAP_TP
 0x01

	)

336 
	#PCI_AF_CAP_FLR
 0x02

	)

337 
	#PCI_AF_CTRL
 4

	)

338 
	#PCI_AF_CTRL_FLR
 0x01

	)

339 
	#PCI_AF_STATUS
 5

	)

340 
	#PCI_AF_STATUS_TP
 0x01

	)

344 
	#PCI_X_CMD
 2

	)

345 
	#PCI_X_CMD_DPERR_E
 0x0001

	)

346 
	#PCI_X_CMD_ERO
 0x0002

	)

347 
	#PCI_X_CMD_READ_512
 0x0000

	)

348 
	#PCI_X_CMD_READ_1K
 0x0004

	)

349 
	#PCI_X_CMD_READ_2K
 0x0008

	)

350 
	#PCI_X_CMD_READ_4K
 0x000¯

	)

351 
	#PCI_X_CMD_MAX_READ
 0x000¯

	)

353 
	#PCI_X_CMD_SPLIT_1
 0x0000

	)

354 
	#PCI_X_CMD_SPLIT_2
 0x0010

	)

355 
	#PCI_X_CMD_SPLIT_3
 0x0020

	)

356 
	#PCI_X_CMD_SPLIT_4
 0x0030

	)

357 
	#PCI_X_CMD_SPLIT_8
 0x0040

	)

358 
	#PCI_X_CMD_SPLIT_12
 0x0050

	)

359 
	#PCI_X_CMD_SPLIT_16
 0x0060

	)

360 
	#PCI_X_CMD_SPLIT_32
 0x0070

	)

361 
	#PCI_X_CMD_MAX_SPLIT
 0x0070

	)

362 
	#PCI_X_CMD_VERSION
(
x
Ë(((xË>> 12Ë& 3Ë

	)

363 
	#PCI_X_STATUS
 4

	)

364 
	#PCI_X_STATUS_DEVFN
 0x000000f‡

	)

365 
	#PCI_X_STATUS_BUS
 0x0000ff00

	)

366 
	#PCI_X_STATUS_64BIT
 0x00010000

	)

367 
	#PCI_X_STATUS_133MHZ
 0x00020000

	)

368 
	#PCI_X_STATUS_SPL_DISC
 0x00040000

	)

369 
	#PCI_X_STATUS_UNX_SPL
 0x00080000

	)

370 
	#PCI_X_STATUS_COMPLEX
 0x00100000

	)

371 
	#PCI_X_STATUS_MAX_READ
 0x00600000

	)

372 
	#PCI_X_STATUS_MAX_SPLIT
 0x03800000

	)

373 
	#PCI_X_STATUS_MAX_CUM
 0x1c000000

	)

374 
	#PCI_X_STATUS_SPL_ERR
 0x20000000

	)

375 
	#PCI_X_STATUS_266MHZ
 0x40000000

	)

376 
	#PCI_X_STATUS_533MHZ
 0x80000000

	)

380 
	#PCI_SSVID_VENDOR_ID
 4

	)

381 
	#PCI_SSVID_DEVICE_ID
 6

	)

385 
	#PCI_EXP_FLAGS
 2

	)

386 
	#PCI_EXP_FLAGS_VERS
 0x000‡

	)

387 
	#PCI_EXP_FLAGS_TYPE
 0x00f0

	)

388 
	#PCI_EXP_TYPE_ENDPOINT
 0x0

	)

389 
	#PCI_EXP_TYPE_LEG_END
 0x1

	)

390 
	#PCI_EXP_TYPE_ROOT_PORT
 0x4

	)

391 
	#PCI_EXP_TYPE_UPSTREAM
 0x5

	)

392 
	#PCI_EXP_TYPE_DOWNSTREAM
 0x6

	)

393 
	#PCI_EXP_TYPE_PCI_BRIDGE
 0x7

	)

394 
	#PCI_EXP_TYPE_RC_END
 0x9

	)

395 
	#PCI_EXP_TYPE_RC_EC
 0x®

	)

396 
	#PCI_EXP_FLAGS_SLOT
 0x0100

	)

397 
	#PCI_EXP_FLAGS_IRQ
 0x3e00

	)

398 
	#PCI_EXP_DEVCAP
 4

	)

399 
	#PCI_EXP_DEVCAP_PAYLOAD
 0x07

	)

400 
	#PCI_EXP_DEVCAP_PHANTOM
 0x18

	)

401 
	#PCI_EXP_DEVCAP_EXT_TAG
 0x20

	)

402 
	#PCI_EXP_DEVCAP_L0S
 0x1c0

	)

403 
	#PCI_EXP_DEVCAP_L1
 0xe00

	)

404 
	#PCI_EXP_DEVCAP_ATN_BUT
 0x1000

	)

405 
	#PCI_EXP_DEVCAP_ATN_IND
 0x2000

	)

406 
	#PCI_EXP_DEVCAP_PWR_IND
 0x4000

	)

407 
	#PCI_EXP_DEVCAP_RBER
 0x8000

	)

408 
	#PCI_EXP_DEVCAP_PWR_VAL
 0x3fc0000

	)

409 
	#PCI_EXP_DEVCAP_PWR_SCL
 0xc000000

	)

410 
	#PCI_EXP_DEVCAP_FLR
 0x10000000

	)

411 
	#PCI_EXP_DEVCTL
 8

	)

412 
	#PCI_EXP_DEVCTL_CERE
 0x0001

	)

413 
	#PCI_EXP_DEVCTL_NFERE
 0x0002

	)

414 
	#PCI_EXP_DEVCTL_FERE
 0x0004

	)

415 
	#PCI_EXP_DEVCTL_URRE
 0x0008

	)

416 
	#PCI_EXP_DEVCTL_RELAX_EN
 0x0010

	)

417 
	#PCI_EXP_DEVCTL_PAYLOAD
 0x00e0

	)

418 
	#PCI_EXP_DEVCTL_EXT_TAG
 0x0100

	)

419 
	#PCI_EXP_DEVCTL_PHANTOM
 0x0200

	)

420 
	#PCI_EXP_DEVCTL_AUX_PME
 0x0400

	)

421 
	#PCI_EXP_DEVCTL_NOSNOOP_EN
 0x0800

	)

422 
	#PCI_EXP_DEVCTL_READRQ
 0x7000

	)

423 
	#PCI_EXP_DEVCTL_BCR_FLR
 0x8000

	)

424 
	#PCI_EXP_DEVSTA
 10

	)

425 
	#PCI_EXP_DEVSTA_CED
 0x01

	)

426 
	#PCI_EXP_DEVSTA_NFED
 0x02

	)

427 
	#PCI_EXP_DEVSTA_FED
 0x04

	)

428 
	#PCI_EXP_DEVSTA_URD
 0x08

	)

429 
	#PCI_EXP_DEVSTA_AUXPD
 0x10

	)

430 
	#PCI_EXP_DEVSTA_TRPND
 0x20

	)

431 
	#PCI_EXP_LNKCAP
 12

	)

432 
	#PCI_EXP_LNKCAP_SLS
 0x0000000‡

	)

433 
	#PCI_EXP_LNKCAP_MLW
 0x000003f0

	)

434 
	#PCI_EXP_LNKCAP_ASPMS
 0x00000c00

	)

435 
	#PCI_EXP_LNKCAP_L0SEL
 0x00007000

	)

436 
	#PCI_EXP_LNKCAP_L1EL
 0x00038000

	)

437 
	#PCI_EXP_LNKCAP_CLKPM
 0x00040000

	)

438 
	#PCI_EXP_LNKCAP_SDERC
 0x00080000

	)

439 
	#PCI_EXP_LNKCAP_DLLLARC
 0x00100000

	)

440 
	#PCI_EXP_LNKCAP_LBNC
 0x00200000

	)

441 
	#PCI_EXP_LNKCAP_PN
 0xff000000

	)

442 
	#PCI_EXP_LNKCTL
 16

	)

443 
	#PCI_EXP_LNKCTL_ASPMC
 0x0003

	)

444 
	#PCI_EXP_LNKCTL_RCB
 0x0008

	)

445 
	#PCI_EXP_LNKCTL_LD
 0x0010

	)

446 
	#PCI_EXP_LNKCTL_RL
 0x0020

	)

447 
	#PCI_EXP_LNKCTL_CCC
 0x0040

	)

448 
	#PCI_EXP_LNKCTL_ES
 0x0080

	)

449 
	#PCI_EXP_LNKCTL_CLKREQ_EN
 0x100

	)

450 
	#PCI_EXP_LNKCTL_HAWD
 0x0200

	)

451 
	#PCI_EXP_LNKCTL_LBMIE
 0x0400

	)

452 
	#PCI_EXP_LNKCTL_LABIE
 0x0800

	)

453 
	#PCI_EXP_LNKSTA
 18

	)

454 
	#PCI_EXP_LNKSTA_CLS
 0x000‡

	)

455 
	#PCI_EXP_LNKSTA_CLS_2_5GB
 0x01

	)

456 
	#PCI_EXP_LNKSTA_CLS_5_0GB
 0x02

	)

457 
	#PCI_EXP_LNKSTA_NLW
 0x03f0

	)

458 
	#PCI_EXP_LNKSTA_NLW_SHIFT
 4

	)

459 
	#PCI_EXP_LNKSTA_LT
 0x0800

	)

460 
	#PCI_EXP_LNKSTA_SLC
 0x1000

	)

461 
	#PCI_EXP_LNKSTA_DLLLA
 0x2000

	)

462 
	#PCI_EXP_LNKSTA_LBMS
 0x4000

	)

463 
	#PCI_EXP_LNKSTA_LABS
 0x8000

	)

464 
	#PCI_EXP_SLTCAP
 20

	)

465 
	#PCI_EXP_SLTCAP_ABP
 0x00000001

	)

466 
	#PCI_EXP_SLTCAP_PCP
 0x00000002

	)

467 
	#PCI_EXP_SLTCAP_MRLSP
 0x00000004

	)

468 
	#PCI_EXP_SLTCAP_AIP
 0x00000008

	)

469 
	#PCI_EXP_SLTCAP_PIP
 0x00000010

	)

470 
	#PCI_EXP_SLTCAP_HPS
 0x00000020

	)

471 
	#PCI_EXP_SLTCAP_HPC
 0x00000040

	)

472 
	#PCI_EXP_SLTCAP_SPLV
 0x00007f80

	)

473 
	#PCI_EXP_SLTCAP_SPLS
 0x00018000

	)

474 
	#PCI_EXP_SLTCAP_EIP
 0x00020000

	)

475 
	#PCI_EXP_SLTCAP_NCCS
 0x00040000

	)

476 
	#PCI_EXP_SLTCAP_PSN
 0xfff80000

	)

477 
	#PCI_EXP_SLTCTL
 24

	)

478 
	#PCI_EXP_SLTCTL_ABPE
 0x0001

	)

479 
	#PCI_EXP_SLTCTL_PFDE
 0x0002

	)

480 
	#PCI_EXP_SLTCTL_MRLSCE
 0x0004

	)

481 
	#PCI_EXP_SLTCTL_PDCE
 0x0008

	)

482 
	#PCI_EXP_SLTCTL_CCIE
 0x0010

	)

483 
	#PCI_EXP_SLTCTL_HPIE
 0x0020

	)

484 
	#PCI_EXP_SLTCTL_AIC
 0x00c0

	)

485 
	#PCI_EXP_SLTCTL_PIC
 0x0300

	)

486 
	#PCI_EXP_SLTCTL_PCC
 0x0400

	)

487 
	#PCI_EXP_SLTCTL_EIC
 0x0800

	)

488 
	#PCI_EXP_SLTCTL_DLLSCE
 0x1000

	)

489 
	#PCI_EXP_SLTSTA
 26

	)

490 
	#PCI_EXP_SLTSTA_ABP
 0x0001

	)

491 
	#PCI_EXP_SLTSTA_PFD
 0x0002

	)

492 
	#PCI_EXP_SLTSTA_MRLSC
 0x0004

	)

493 
	#PCI_EXP_SLTSTA_PDC
 0x0008

	)

494 
	#PCI_EXP_SLTSTA_CC
 0x0010

	)

495 
	#PCI_EXP_SLTSTA_MRLSS
 0x0020

	)

496 
	#PCI_EXP_SLTSTA_PDS
 0x0040

	)

497 
	#PCI_EXP_SLTSTA_EIS
 0x0080

	)

498 
	#PCI_EXP_SLTSTA_DLLSC
 0x0100

	)

499 
	#PCI_EXP_RTCTL
 28

	)

500 
	#PCI_EXP_RTCTL_SECEE
 0x01

	)

501 
	#PCI_EXP_RTCTL_SENFEE
 0x02

	)

502 
	#PCI_EXP_RTCTL_SEFEE
 0x04

	)

503 
	#PCI_EXP_RTCTL_PMEIE
 0x08

	)

504 
	#PCI_EXP_RTCTL_CRSSVE
 0x10

	)

505 
	#PCI_EXP_RTCAP
 30

	)

506 
	#PCI_EXP_RTSTA
 32

	)

507 
	#PCI_EXP_RTSTA_PME
 0x10000

	)

508 
	#PCI_EXP_RTSTA_PENDING
 0x20000

	)

509 
	#PCI_EXP_DEVCAP2
 36

	)

510 
	#PCI_EXP_DEVCAP2_ARI
 0x20

	)

511 
	#PCI_EXP_DEVCAP2_LTR
 0x800

	)

512 
	#PCI_EXP_OBFF_MASK
 0xc0000

	)

513 
	#PCI_EXP_OBFF_MSG
 0x40000

	)

514 
	#PCI_EXP_OBFF_WAKE
 0x80000

	)

515 
	#PCI_EXP_DEVCTL2
 40

	)

516 
	#PCI_EXP_DEVCTL2_ARI
 0x20

	)

517 
	#PCI_EXP_IDO_REQ_EN
 0x100

	)

518 
	#PCI_EXP_IDO_CMP_EN
 0x200

	)

519 
	#PCI_EXP_LTR_EN
 0x400

	)

520 
	#PCI_EXP_OBFF_MSGA_EN
 0x2000

	)

521 
	#PCI_EXP_OBFF_MSGB_EN
 0x4000

	)

522 
	#PCI_EXP_OBFF_WAKE_EN
 0x6000

	)

523 
	#PCI_EXP_LNKCTL2
 48

	)

524 
	#PCI_EXP_SLTCTL2
 56

	)

527 
	#PCI_EXT_CAP_ID
(
hódî
Ë(hódî & 0x0000ffff)

	)

528 
	#PCI_EXT_CAP_VER
(
hódî
Ë((hódî >> 16Ë& 0xf)

	)

529 
	#PCI_EXT_CAP_NEXT
(
hódî
Ë((hódî >> 20Ë& 0xffc)

	)

531 
	#PCI_EXT_CAP_ID_ERR
 1

	)

532 
	#PCI_EXT_CAP_ID_VC
 2

	)

533 
	#PCI_EXT_CAP_ID_DSN
 3

	)

534 
	#PCI_EXT_CAP_ID_PWR
 4

	)

535 
	#PCI_EXT_CAP_ID_VNDR
 11

	)

536 
	#PCI_EXT_CAP_ID_ACS
 13

	)

537 
	#PCI_EXT_CAP_ID_ARI
 14

	)

538 
	#PCI_EXT_CAP_ID_ATS
 15

	)

539 
	#PCI_EXT_CAP_ID_SRIOV
 16

	)

540 
	#PCI_EXT_CAP_ID_LTR
 24

	)

543 
	#PCI_ERR_UNCOR_STATUS
 4

	)

544 
	#PCI_ERR_UNC_TRAIN
 0x00000001

	)

545 
	#PCI_ERR_UNC_DLP
 0x00000010

	)

546 
	#PCI_ERR_UNC_POISON_TLP
 0x00001000

	)

547 
	#PCI_ERR_UNC_FCP
 0x00002000

	)

548 
	#PCI_ERR_UNC_COMP_TIME
 0x00004000

	)

549 
	#PCI_ERR_UNC_COMP_ABORT
 0x00008000

	)

550 
	#PCI_ERR_UNC_UNX_COMP
 0x00010000

	)

551 
	#PCI_ERR_UNC_RX_OVER
 0x00020000

	)

552 
	#PCI_ERR_UNC_MALF_TLP
 0x00040000

	)

553 
	#PCI_ERR_UNC_ECRC
 0x00080000

	)

554 
	#PCI_ERR_UNC_UNSUP
 0x00100000

	)

555 
	#PCI_ERR_UNCOR_MASK
 8

	)

557 
	#PCI_ERR_UNCOR_SEVER
 12

	)

559 
	#PCI_ERR_COR_STATUS
 16

	)

560 
	#PCI_ERR_COR_RCVR
 0x00000001

	)

561 
	#PCI_ERR_COR_BAD_TLP
 0x00000040

	)

562 
	#PCI_ERR_COR_BAD_DLLP
 0x00000080

	)

563 
	#PCI_ERR_COR_REP_ROLL
 0x00000100

	)

564 
	#PCI_ERR_COR_REP_TIMER
 0x00001000

	)

565 
	#PCI_ERR_COR_MASK
 20

	)

567 
	#PCI_ERR_CAP
 24

	)

568 
	#PCI_ERR_CAP_FEP
(
x
Ë((xË& 31Ë

	)

569 
	#PCI_ERR_CAP_ECRC_GENC
 0x00000020

	)

570 
	#PCI_ERR_CAP_ECRC_GENE
 0x00000040

	)

571 
	#PCI_ERR_CAP_ECRC_CHKC
 0x00000080

	)

572 
	#PCI_ERR_CAP_ECRC_CHKE
 0x00000100

	)

573 
	#PCI_ERR_HEADER_LOG
 28

	)

574 
	#PCI_ERR_ROOT_COMMAND
 44

	)

576 
	#PCI_ERR_ROOT_CMD_COR_EN
 0x00000001

	)

578 
	#PCI_ERR_ROOT_CMD_NONFATAL_EN
 0x00000002

	)

580 
	#PCI_ERR_ROOT_CMD_FATAL_EN
 0x00000004

	)

581 
	#PCI_ERR_ROOT_STATUS
 48

	)

582 
	#PCI_ERR_ROOT_COR_RCV
 0x00000001

	)

584 
	#PCI_ERR_ROOT_MULTI_COR_RCV
 0x00000002

	)

586 
	#PCI_ERR_ROOT_UNCOR_RCV
 0x00000004

	)

588 
	#PCI_ERR_ROOT_MULTI_UNCOR_RCV
 0x00000008

	)

589 
	#PCI_ERR_ROOT_FIRST_FATAL
 0x00000010

	)

590 
	#PCI_ERR_ROOT_NONFATAL_RCV
 0x00000020

	)

591 
	#PCI_ERR_ROOT_FATAL_RCV
 0x00000040

	)

592 
	#PCI_ERR_ROOT_ERR_SRC
 52

	)

595 
	#PCI_VC_PORT_REG1
 4

	)

596 
	#PCI_VC_PORT_REG2
 8

	)

597 
	#PCI_VC_PORT_CTRL
 12

	)

598 
	#PCI_VC_PORT_STATUS
 14

	)

599 
	#PCI_VC_RES_CAP
 16

	)

600 
	#PCI_VC_RES_CTRL
 20

	)

601 
	#PCI_VC_RES_STATUS
 26

	)

604 
	#PCI_PWR_DSR
 4

	)

605 
	#PCI_PWR_DATA
 8

	)

606 
	#PCI_PWR_DATA_BASE
(
x
Ë((xË& 0xffË

	)

607 
	#PCI_PWR_DATA_SCALE
(
x
Ë(((xË>> 8Ë& 3Ë

	)

608 
	#PCI_PWR_DATA_PM_SUB
(
x
Ë(((xË>> 10Ë& 7Ë

	)

609 
	#PCI_PWR_DATA_PM_STATE
(
x
Ë(((xË>> 13Ë& 3Ë

	)

610 
	#PCI_PWR_DATA_TYPE
(
x
Ë(((xË>> 15Ë& 7Ë

	)

611 
	#PCI_PWR_DATA_RAIL
(
x
Ë(((xË>> 18Ë& 7Ë

	)

612 
	#PCI_PWR_CAP
 12

	)

613 
	#PCI_PWR_CAP_BUDGET
(
x
Ë((xË& 1Ë

	)

623 
	#HT_3BIT_CAP_MASK
 0xE0

	)

624 
	#HT_CAPTYPE_SLAVE
 0x00

	)

625 
	#HT_CAPTYPE_HOST
 0x20

	)

627 
	#HT_5BIT_CAP_MASK
 0xF8

	)

628 
	#HT_CAPTYPE_IRQ
 0x80

	)

629 
	#HT_CAPTYPE_REMAPPING_40
 0xA0

	)

630 
	#HT_CAPTYPE_REMAPPING_64
 0xA2

	)

631 
	#HT_CAPTYPE_UNITID_CLUMP
 0x90

	)

632 
	#HT_CAPTYPE_EXTCONF
 0x98

	)

633 
	#HT_CAPTYPE_MSI_MAPPING
 0xA8

	)

634 
	#HT_MSI_FLAGS
 0x02

	)

635 
	#HT_MSI_FLAGS_ENABLE
 0x1

	)

636 
	#HT_MSI_FLAGS_FIXED
 0x2

	)

637 
	#HT_MSI_FIXED_ADDR
 0x00000000FEE00000ULL

	)

638 
	#HT_MSI_ADDR_LO
 0x04

	)

639 
	#HT_MSI_ADDR_LO_MASK
 0xFFF00000

	)

640 
	#HT_MSI_ADDR_HI
 0x08

	)

641 
	#HT_CAPTYPE_DIRECT_ROUTE
 0xB0

	)

642 
	#HT_CAPTYPE_VCSET
 0xB8

	)

643 
	#HT_CAPTYPE_ERROR_RETRY
 0xC0

	)

644 
	#HT_CAPTYPE_GEN3
 0xD0

	)

645 
	#HT_CAPTYPE_PM
 0xE0

	)

648 
	#PCI_ARI_CAP
 0x04

	)

649 
	#PCI_ARI_CAP_MFVC
 0x0001

	)

650 
	#PCI_ARI_CAP_ACS
 0x0002

	)

651 
	#PCI_ARI_CAP_NFN
(
x
Ë(((xË>> 8Ë& 0xffË

	)

652 
	#PCI_ARI_CTRL
 0x06

	)

653 
	#PCI_ARI_CTRL_MFVC
 0x0001

	)

654 
	#PCI_ARI_CTRL_ACS
 0x0002

	)

655 
	#PCI_ARI_CTRL_FG
(
x
Ë(((xË>> 4Ë& 7Ë

	)

658 
	#PCI_ATS_CAP
 0x04

	)

659 
	#PCI_ATS_CAP_QDEP
(
x
Ë((xË& 0x1fË

	)

660 
	#PCI_ATS_MAX_QDEP
 32

	)

661 
	#PCI_ATS_CTRL
 0x06

	)

662 
	#PCI_ATS_CTRL_ENABLE
 0x8000

	)

663 
	#PCI_ATS_CTRL_STU
(
x
Ë((xË& 0x1fË

	)

664 
	#PCI_ATS_MIN_STU
 12

	)

667 
	#PCI_PRI_CAP
 0x13

	)

668 
	#PCI_PRI_CONTROL_OFF
 0x04

	)

669 
	#PCI_PRI_STATUS_OFF
 0x06

	)

670 
	#PCI_PRI_ENABLE
 0x0001

	)

671 
	#PCI_PRI_RESET
 0x0002

	)

672 
	#PCI_PRI_STATUS_RF
 0x0001

	)

673 
	#PCI_PRI_STATUS_UPRGI
 0x0002

	)

674 
	#PCI_PRI_STATUS_STOPPED
 0x0100

	)

675 
	#PCI_PRI_MAX_REQ_OFF
 0x08

	)

676 
	#PCI_PRI_ALLOC_REQ_OFF
 0x0¯

	)

679 
	#PCI_PASID_CAP
 0x1b

	)

680 
	#PCI_PASID_CAP_OFF
 0x04

	)

681 
	#PCI_PASID_CONTROL_OFF
 0x06

	)

682 
	#PCI_PASID_ENABLE
 0x01

	)

683 
	#PCI_PASID_EXEC
 0x02

	)

684 
	#PCI_PASID_PRIV
 0x04

	)

687 
	#PCI_SRIOV_CAP
 0x04

	)

688 
	#PCI_SRIOV_CAP_VFM
 0x01

	)

689 
	#PCI_SRIOV_CAP_INTR
(
x
Ë((xË>> 21Ë

	)

690 
	#PCI_SRIOV_CTRL
 0x08

	)

691 
	#PCI_SRIOV_CTRL_VFE
 0x01

	)

692 
	#PCI_SRIOV_CTRL_VFM
 0x02

	)

693 
	#PCI_SRIOV_CTRL_INTR
 0x04

	)

694 
	#PCI_SRIOV_CTRL_MSE
 0x08

	)

695 
	#PCI_SRIOV_CTRL_ARI
 0x10

	)

696 
	#PCI_SRIOV_STATUS
 0x0®

	)

697 
	#PCI_SRIOV_STATUS_VFM
 0x01

	)

698 
	#PCI_SRIOV_INITIAL_VF
 0x0¯

	)

699 
	#PCI_SRIOV_TOTAL_VF
 0x0ê

	)

700 
	#PCI_SRIOV_NUM_VF
 0x10

	)

701 
	#PCI_SRIOV_FUNC_LINK
 0x12

	)

702 
	#PCI_SRIOV_VF_OFFSET
 0x14

	)

703 
	#PCI_SRIOV_VF_STRIDE
 0x16

	)

704 
	#PCI_SRIOV_VF_DID
 0x1®

	)

705 
	#PCI_SRIOV_SUP_PGSIZE
 0x1¯

	)

706 
	#PCI_SRIOV_SYS_PGSIZE
 0x20

	)

707 
	#PCI_SRIOV_BAR
 0x24

	)

708 
	#PCI_SRIOV_NUM_BARS
 6

	)

709 
	#PCI_SRIOV_VFM
 0x3¯

	)

710 
	#PCI_SRIOV_VFM_BIR
(
x
Ë((xË& 7Ë

	)

711 
	#PCI_SRIOV_VFM_OFFSET
(
x
Ë((xË& ~7Ë

	)

712 
	#PCI_SRIOV_VFM_UA
 0x0

	)

713 
	#PCI_SRIOV_VFM_MI
 0x1

	)

714 
	#PCI_SRIOV_VFM_MO
 0x2

	)

715 
	#PCI_SRIOV_VFM_AV
 0x3

	)

717 
	#PCI_LTR_MAX_SNOOP_LAT
 0x4

	)

718 
	#PCI_LTR_MAX_NOSNOOP_LAT
 0x6

	)

719 
	#PCI_LTR_VALUE_MASK
 0x000003ff

	)

720 
	#PCI_LTR_SCALE_MASK
 0x00001c00

	)

721 
	#PCI_LTR_SCALE_SHIFT
 10

	)

724 
	#PCI_ACS_CAP
 0x04

	)

725 
	#PCI_ACS_SV
 0x01

	)

726 
	#PCI_ACS_TB
 0x02

	)

727 
	#PCI_ACS_RR
 0x04

	)

728 
	#PCI_ACS_CR
 0x08

	)

729 
	#PCI_ACS_UF
 0x10

	)

730 
	#PCI_ACS_EC
 0x20

	)

731 
	#PCI_ACS_DT
 0x40

	)

732 
	#PCI_ACS_CTRL
 0x06

	)

733 
	#PCI_ACS_EGRESS_CTL_V
 0x08

	)

	@/usr/include/linux/posix_types.h

1 #i‚de‡
_LINUX_POSIX_TYPES_H


2 
	#_LINUX_POSIX_TYPES_H


	)

4 
	~<löux/°ddef.h
>

21 #unde‡
__NFDBITS


22 
	#__NFDBITS
 (8 * ())

	)

24 #unde‡
__FD_SETSIZE


25 
	#__FD_SETSIZE
 1024

	)

27 #unde‡
__FDSET_LONGS


28 
	#__FDSET_LONGS
 (
__FD_SETSIZE
/
__NFDBITS
)

	)

30 #unde‡
__FDELT


31 
	#__FDELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

33 #unde‡
__FDMASK


34 
	#__FDMASK
(
d
Ë(1UL << ((dË% 
__NFDBITS
))

	)

37 
	mfds_bôs
 [
__FDSET_LONGS
];

38 } 
	t__kî√l_fd_£t
;

41 (*
	t__kî√l_sigh™dÀr_t
)();

44 
	t__kî√l_key_t
;

45 
	t__kî√l_mqd_t
;

47 
	~<asm/posix_ty≥s.h
>

	@/usr/include/linux/socket.h

1 #i‚de‡
_LINUX_SOCKET_H


2 
	#_LINUX_SOCKET_H


	)

7 
	#_K_SS_MAXSIZE
 128

	)

8 
	#_K_SS_ALIGNSIZE
 (
	`__Æignof__
 (
sockaddr
 *))

	)

11 
	t__kî√l_ß_Ámûy_t
;

13 
	s__kî√l_sockaddr_°‹age
 {

14 
__kî√l_ß_Ámûy_t
 
	mss_Ámûy
;

16 
	m__d©a
[
_K_SS_MAXSIZE
 - ()];

19 } 
__©åibuã__
 ((
Æig√d
(
_K_SS_ALIGNSIZE
)));

	@/usr/include/asm-generic/types.h

1 #i‚de‡
_ASM_GENERIC_TYPES_H


2 
	#_ASM_GENERIC_TYPES_H


	)

7 
	~<asm-gíîic/öt-Œ64.h
>

9 #i‚de‡
__ASSEMBLY__


11 
	tumode_t
;

	@/usr/include/asm/posix_types.h

1 #ifde‡
__i386__


2 
	~<asm/posix_ty≥s_32.h
>

4 
	~<asm/posix_ty≥s_64.h
>

	@/usr/include/linux/byteorder/little_endian.h

1 #i‚de‡
_LINUX_BYTEORDER_LITTLE_ENDIAN_H


2 
	#_LINUX_BYTEORDER_LITTLE_ENDIAN_H


	)

4 #i‚de‡
__LITTLE_ENDIAN


5 
	#__LITTLE_ENDIAN
 1234

	)

7 #i‚de‡
__LITTLE_ENDIAN_BITFIELD


8 
	#__LITTLE_ENDIAN_BITFIELD


	)

11 
	~<löux/ty≥s.h
>

12 
	~<löux/swab.h
>

14 
	#__c⁄°™t_ht⁄l
(
x
Ë((
__be32
)
	`___c⁄°™t_swab32
((x)))

	)

15 
	#__c⁄°™t_¡ohl
(
x
Ë
	`___c⁄°™t_swab32
((
__be32
)(x))

	)

16 
	#__c⁄°™t_ht⁄s
(
x
Ë((
__be16
)
	`___c⁄°™t_swab16
((x)))

	)

17 
	#__c⁄°™t_¡ohs
(
x
Ë
	`___c⁄°™t_swab16
((
__be16
)(x))

	)

18 
	#__c⁄°™t_˝u_to_À64
(
x
Ë((
__À64
)(
__u64
)(x))

	)

19 
	#__c⁄°™t_À64_to_˝u
(
x
Ë((
__u64
)(
__À64
)(x))

	)

20 
	#__c⁄°™t_˝u_to_À32
(
x
Ë((
__À32
)(
__u32
)(x))

	)

21 
	#__c⁄°™t_À32_to_˝u
(
x
Ë((
__u32
)(
__À32
)(x))

	)

22 
	#__c⁄°™t_˝u_to_À16
(
x
Ë((
__À16
)(
__u16
)(x))

	)

23 
	#__c⁄°™t_À16_to_˝u
(
x
Ë((
__u16
)(
__À16
)(x))

	)

24 
	#__c⁄°™t_˝u_to_be64
(
x
Ë((
__be64
)
	`___c⁄°™t_swab64
((x)))

	)

25 
	#__c⁄°™t_be64_to_˝u
(
x
Ë
	`___c⁄°™t_swab64
((
__u64
)(
__be64
)(x))

	)

26 
	#__c⁄°™t_˝u_to_be32
(
x
Ë((
__be32
)
	`___c⁄°™t_swab32
((x)))

	)

27 
	#__c⁄°™t_be32_to_˝u
(
x
Ë
	`___c⁄°™t_swab32
((
__u32
)(
__be32
)(x))

	)

28 
	#__c⁄°™t_˝u_to_be16
(
x
Ë((
__be16
)
	`___c⁄°™t_swab16
((x)))

	)

29 
	#__c⁄°™t_be16_to_˝u
(
x
Ë
	`___c⁄°™t_swab16
((
__u16
)(
__be16
)(x))

	)

30 
	#__˝u_to_À64
(
x
Ë((
__À64
)(
__u64
)(x))

	)

31 
	#__À64_to_˝u
(
x
Ë((
__u64
)(
__À64
)(x))

	)

32 
	#__˝u_to_À32
(
x
Ë((
__À32
)(
__u32
)(x))

	)

33 
	#__À32_to_˝u
(
x
Ë((
__u32
)(
__À32
)(x))

	)

34 
	#__˝u_to_À16
(
x
Ë((
__À16
)(
__u16
)(x))

	)

35 
	#__À16_to_˝u
(
x
Ë((
__u16
)(
__À16
)(x))

	)

36 
	#__˝u_to_be64
(
x
Ë((
__be64
)
	`__swab64
((x)))

	)

37 
	#__be64_to_˝u
(
x
Ë
	`__swab64
((
__u64
)(
__be64
)(x))

	)

38 
	#__˝u_to_be32
(
x
Ë((
__be32
)
	`__swab32
((x)))

	)

39 
	#__be32_to_˝u
(
x
Ë
	`__swab32
((
__u32
)(
__be32
)(x))

	)

40 
	#__˝u_to_be16
(
x
Ë((
__be16
)
	`__swab16
((x)))

	)

41 
	#__be16_to_˝u
(
x
Ë
	`__swab16
((
__u16
)(
__be16
)(x))

	)

43 
__ölöe__
 
__À64
 
	$__˝u_to_À64p
(c⁄° 
__u64
 *
p
)

45  (
__À64
)*
p
;

46 
	}
}

47 
__ölöe__
 
__u64
 
	$__À64_to_˝up
(c⁄° 
__À64
 *
p
)

49  (
__u64
)*
p
;

50 
	}
}

51 
__ölöe__
 
__À32
 
	$__˝u_to_À32p
(c⁄° 
__u32
 *
p
)

53  (
__À32
)*
p
;

54 
	}
}

55 
__ölöe__
 
__u32
 
	$__À32_to_˝up
(c⁄° 
__À32
 *
p
)

57  (
__u32
)*
p
;

58 
	}
}

59 
__ölöe__
 
__À16
 
	$__˝u_to_À16p
(c⁄° 
__u16
 *
p
)

61  (
__À16
)*
p
;

62 
	}
}

63 
__ölöe__
 
__u16
 
	$__À16_to_˝up
(c⁄° 
__À16
 *
p
)

65  (
__u16
)*
p
;

66 
	}
}

67 
__ölöe__
 
__be64
 
	$__˝u_to_be64p
(c⁄° 
__u64
 *
p
)

69  (
__be64
)
	`__swab64p
(
p
);

70 
	}
}

71 
__ölöe__
 
__u64
 
	$__be64_to_˝up
(c⁄° 
__be64
 *
p
)

73  
	`__swab64p
((
__u64
 *)
p
);

74 
	}
}

75 
__ölöe__
 
__be32
 
	$__˝u_to_be32p
(c⁄° 
__u32
 *
p
)

77  (
__be32
)
	`__swab32p
(
p
);

78 
	}
}

79 
__ölöe__
 
__u32
 
	$__be32_to_˝up
(c⁄° 
__be32
 *
p
)

81  
	`__swab32p
((
__u32
 *)
p
);

82 
	}
}

83 
__ölöe__
 
__be16
 
	$__˝u_to_be16p
(c⁄° 
__u16
 *
p
)

85  (
__be16
)
	`__swab16p
(
p
);

86 
	}
}

87 
__ölöe__
 
__u16
 
	$__be16_to_˝up
(c⁄° 
__be16
 *
p
)

89  
	`__swab16p
((
__u16
 *)
p
);

90 
	}
}

91 
	#__˝u_to_À64s
(
x
Ëdÿ{ ()(x); } 0)

	)

92 
	#__À64_to_˝us
(
x
Ëdÿ{ ()(x); } 0)

	)

93 
	#__˝u_to_À32s
(
x
Ëdÿ{ ()(x); } 0)

	)

94 
	#__À32_to_˝us
(
x
Ëdÿ{ ()(x); } 0)

	)

95 
	#__˝u_to_À16s
(
x
Ëdÿ{ ()(x); } 0)

	)

96 
	#__À16_to_˝us
(
x
Ëdÿ{ ()(x); } 0)

	)

97 
	#__˝u_to_be64s
(
x
Ë
	`__swab64s
((x))

	)

98 
	#__be64_to_˝us
(
x
Ë
	`__swab64s
((x))

	)

99 
	#__˝u_to_be32s
(
x
Ë
	`__swab32s
((x))

	)

100 
	#__be32_to_˝us
(
x
Ë
	`__swab32s
((x))

	)

101 
	#__˝u_to_be16s
(
x
Ë
	`__swab16s
((x))

	)

102 
	#__be16_to_˝us
(
x
Ë
	`__swab16s
((x))

	)

	@/usr/include/linux/hdlc/ioctl.h

1 #i‚de‡
__HDLC_IOCTL_H__


2 
	#__HDLC_IOCTL_H__


	)

5 
	#GENERIC_HDLC_VERSION
 4

	)

7 
	#CLOCK_DEFAULT
 0

	)

8 
	#CLOCK_EXT
 1

	)

9 
	#CLOCK_INT
 2

	)

10 
	#CLOCK_TXINT
 3

	)

11 
	#CLOCK_TXFROMRX
 4

	)

14 
	#ENCODING_DEFAULT
 0

	)

15 
	#ENCODING_NRZ
 1

	)

16 
	#ENCODING_NRZI
 2

	)

17 
	#ENCODING_FM_MARK
 3

	)

18 
	#ENCODING_FM_SPACE
 4

	)

19 
	#ENCODING_MANCHESTER
 5

	)

22 
	#PARITY_DEFAULT
 0

	)

23 
	#PARITY_NONE
 1

	)

24 
	#PARITY_CRC16_PR0
 2

	)

25 
	#PARITY_CRC16_PR1
 3

	)

26 
	#PARITY_CRC16_PR0_CCITT
 4

	)

27 
	#PARITY_CRC16_PR1_CCITT
 5

	)

28 
	#PARITY_CRC32_PR0_CCITT
 6

	)

29 
	#PARITY_CRC32_PR1_CCITT
 7

	)

31 
	#LMI_DEFAULT
 0

	)

32 
	#LMI_NONE
 1

	)

33 
	#LMI_ANSI
 2

	)

34 
	#LMI_CCITT
 3

	)

35 
	#LMI_CISCO
 4

	)

38 
	m˛ock_øã
;

39 
	m˛ock_ty≥
;

40 
	mlo›back
;

41 } 
	tsync_£rül_£âögs
;

44 
	m˛ock_øã
;

45 
	m˛ock_ty≥
;

46 
	mlo›back
;

47 
	m¶Ÿ_m≠
;

48 } 
	tã1_£âögs
;

51 
	mícodög
;

52 
	m∑rôy
;

53 } 
	tøw_hdlc_¥Ÿo
;

56 
	mt391
;

57 
	mt392
;

58 
	mn391
;

59 
	mn392
;

60 
	mn393
;

61 
	mlmi
;

62 
	md˚
;

63 } 
	t‰_¥Ÿo
;

66 
	mdlci
;

67 } 
	t‰_¥Ÿo_pvc
;

70 
	mdlci
;

71 
	mma°î
[
IFNAMSIZ
];

72 }
	t‰_¥Ÿo_pvc_öfo
;

75 
	möãrvÆ
;

76 
	mtimeout
;

77 } 
	tcisco_¥Ÿo
;

	@/usr/include/linux/netlink.h

1 #i‚de‡
__LINUX_NETLINK_H


2 
	#__LINUX_NETLINK_H


	)

4 
	~<löux/sockë.h
>

5 
	~<löux/ty≥s.h
>

7 
	#NETLINK_ROUTE
 0

	)

8 
	#NETLINK_UNUSED
 1

	)

9 
	#NETLINK_USERSOCK
 2

	)

10 
	#NETLINK_FIREWALL
 3

	)

11 
	#NETLINK_INET_DIAG
 4

	)

12 
	#NETLINK_NFLOG
 5

	)

13 
	#NETLINK_XFRM
 6

	)

14 
	#NETLINK_SELINUX
 7

	)

15 
	#NETLINK_ISCSI
 8

	)

16 
	#NETLINK_AUDIT
 9

	)

17 
	#NETLINK_FIB_LOOKUP
 10

	)

18 
	#NETLINK_CONNECTOR
 11

	)

19 
	#NETLINK_NETFILTER
 12

	)

20 
	#NETLINK_IP6_FW
 13

	)

21 
	#NETLINK_DNRTMSG
 14

	)

22 
	#NETLINK_KOBJECT_UEVENT
 15

	)

23 
	#NETLINK_GENERIC
 16

	)

25 
	#NETLINK_SCSITRANSPORT
 18

	)

26 
	#NETLINK_ECRYPTFS
 19

	)

27 
	#NETLINK_RDMA
 20

	)

28 
	#NETLINK_CRYPTO
 21

	)

30 
	#MAX_LINKS
 32

	)

32 
	ssockaddr_∆
 {

33 
__kî√l_ß_Ámûy_t
 
	m∆_Ámûy
;

34 
	m∆_∑d
;

35 
__u32
 
	m∆_pid
;

36 
__u32
 
	m∆_groups
;

39 
	s∆msghdr
 {

40 
__u32
 
	m∆msg_Àn
;

41 
__u16
 
	m∆msg_ty≥
;

42 
__u16
 
	m∆msg_Êags
;

43 
__u32
 
	m∆msg_£q
;

44 
__u32
 
	m∆msg_pid
;

49 
	#NLM_F_REQUEST
 1

	)

50 
	#NLM_F_MULTI
 2

	)

51 
	#NLM_F_ACK
 4

	)

52 
	#NLM_F_ECHO
 8

	)

53 
	#NLM_F_DUMP_INTR
 16

	)

56 
	#NLM_F_ROOT
 0x100

	)

57 
	#NLM_F_MATCH
 0x200

	)

58 
	#NLM_F_ATOMIC
 0x400

	)

59 
	#NLM_F_DUMP
 (
NLM_F_ROOT
|
NLM_F_MATCH
)

	)

62 
	#NLM_F_REPLACE
 0x100

	)

63 
	#NLM_F_EXCL
 0x200

	)

64 
	#NLM_F_CREATE
 0x400

	)

65 
	#NLM_F_APPEND
 0x800

	)

76 
	#NLMSG_ALIGNTO
 4U

	)

77 
	#NLMSG_ALIGN
(
Àn
Ë–(÷í)+
NLMSG_ALIGNTO
-1Ë& ~(NLMSG_ALIGNTO-1Ë)

	)

78 
	#NLMSG_HDRLEN
 ((Ë
	`NLMSG_ALIGN
((
∆msghdr
)))

	)

79 
	#NLMSG_LENGTH
(
Àn
Ë(÷í)+
	`NLMSG_ALIGN
(
NLMSG_HDRLEN
))

	)

80 
	#NLMSG_SPACE
(
Àn
Ë
	`NLMSG_ALIGN
(
	`NLMSG_LENGTH
÷í))

	)

81 
	#NLMSG_DATA
(
∆h
Ë((*)(((*ÍlhË+ 
	`NLMSG_LENGTH
(0)))

	)

82 
	#NLMSG_NEXT
(
∆h
,
Àn
Ë(÷íË-
	`NLMSG_ALIGN
(“lh)->
∆msg_Àn
), \

83 (
∆msghdr
*)(((*)(
∆h
)Ë+ 
	`NLMSG_ALIGN
(“lh)->
∆msg_Àn
)))

	)

84 
	#NLMSG_OK
(
∆h
,
Àn
Ë(÷íË>()(
∆msghdr
) && \

85 (
∆h
)->
∆msg_Àn
 >(
∆msghdr
) && \

86 (
∆h
)->
∆msg_Àn
 <(
Àn
))

	)

87 
	#NLMSG_PAYLOAD
(
∆h
,
Àn
Ë(“lh)->
∆msg_Àn
 - 
	`NLMSG_SPACE
(÷í)))

	)

89 
	#NLMSG_NOOP
 0x1

	)

90 
	#NLMSG_ERROR
 0x2

	)

91 
	#NLMSG_DONE
 0x3

	)

92 
	#NLMSG_OVERRUN
 0x4

	)

94 
	#NLMSG_MIN_TYPE
 0x10

	)

96 
	s∆msgîr
 {

97 
	mîr‹
;

98 
∆msghdr
 
	mmsg
;

101 
	#NETLINK_ADD_MEMBERSHIP
 1

	)

102 
	#NETLINK_DROP_MEMBERSHIP
 2

	)

103 
	#NETLINK_PKTINFO
 3

	)

104 
	#NETLINK_BROADCAST_ERROR
 4

	)

105 
	#NETLINK_NO_ENOBUFS
 5

	)

107 
	s∆_pktöfo
 {

108 
__u32
 
	mgroup
;

111 
	#NET_MAJOR
 36

	)

114 
	mNETLINK_UNCONNECTED
 = 0,

115 
	mNETLINK_CONNECTED
,

127 
	s∆©å
 {

128 
__u16
 
	m∆a_Àn
;

129 
__u16
 
	m∆a_ty≥
;

142 
	#NLA_F_NESTED
 (1 << 15)

	)

143 
	#NLA_F_NET_BYTEORDER
 (1 << 14)

	)

144 
	#NLA_TYPE_MASK
 ~(
NLA_F_NESTED
 | 
NLA_F_NET_BYTEORDER
)

	)

146 
	#NLA_ALIGNTO
 4

	)

147 
	#NLA_ALIGN
(
Àn
Ë((÷íË+ 
NLA_ALIGNTO
 - 1Ë& ~(NLA_ALIGNTO - 1))

	)

148 
	#NLA_HDRLEN
 ((Ë
	`NLA_ALIGN
((
∆©å
)))

	)

	@/usr/include/linux/stddef.h

1 #i‚de‡
_LINUX_STDDEF_H


2 
	#_LINUX_STDDEF_H


	)

6 #unde‡
NULL


7 #i‡
deföed
(
__˝lu•lus
)

8 
	#NULL
 0

	)

10 
	#NULL
 ((*)0)

	)

	@/usr/include/asm-generic/int-ll64.h

8 #i‚de‡
_ASM_GENERIC_INT_LL64_H


9 
	#_ASM_GENERIC_INT_LL64_H


	)

11 
	~<asm/bô•îl⁄g.h
>

13 #i‚de‡
__ASSEMBLY__


19 
__sig√d__
 
	t__s8
;

20 
	t__u8
;

22 
__sig√d__
 
	t__s16
;

23 
	t__u16
;

25 
__sig√d__
 
	t__s32
;

26 
	t__u32
;

28 #ifde‡
__GNUC__


29 
__exãnsi⁄__
 
__sig√d__
 
	t__s64
;

30 
__exãnsi⁄__
 
	t__u64
;

32 
__sig√d__
 
	t__s64
;

33 
	t__u64
;

	@/usr/include/asm/posix_types_32.h

1 #i‚de‡
_ASM_X86_POSIX_TYPES_32_H


2 
	#_ASM_X86_POSIX_TYPES_32_H


	)

10 
	t__kî√l_öo_t
;

11 
	t__kî√l_mode_t
;

12 
	t__kî√l_∆ök_t
;

13 
	t__kî√l_off_t
;

14 
	t__kî√l_pid_t
;

15 
	t__kî√l_ùc_pid_t
;

16 
	t__kî√l_uid_t
;

17 
	t__kî√l_gid_t
;

18 
	t__kî√l_size_t
;

19 
	t__kî√l_ssize_t
;

20 
	t__kî√l_±rdiff_t
;

21 
	t__kî√l_time_t
;

22 
	t__kî√l_su£c⁄ds_t
;

23 
	t__kî√l_˛ock_t
;

24 
	t__kî√l_timî_t
;

25 
	t__kî√l_˛ockid_t
;

26 
	t__kî√l_daddr_t
;

27 * 
	t__kî√l_ˇddr_t
;

28 
	t__kî√l_uid16_t
;

29 
	t__kî√l_gid16_t
;

30 
	t__kî√l_uid32_t
;

31 
	t__kî√l_gid32_t
;

33 
	t__kî√l_ﬁd_uid_t
;

34 
	t__kî√l_ﬁd_gid_t
;

35 
	t__kî√l_ﬁd_dev_t
;

37 #ifde‡
__GNUC__


38 
	t__kî√l_loff_t
;

42 
	mvÆ
[2];

43 } 
	t__kî√l_fsid_t
;

	@/usr/include/asm/posix_types_64.h

1 #i‚de‡
_ASM_X86_POSIX_TYPES_64_H


2 
	#_ASM_X86_POSIX_TYPES_64_H


	)

10 
	t__kî√l_öo_t
;

11 
	t__kî√l_mode_t
;

12 
	t__kî√l_∆ök_t
;

13 
	t__kî√l_off_t
;

14 
	t__kî√l_pid_t
;

15 
	t__kî√l_ùc_pid_t
;

16 
	t__kî√l_uid_t
;

17 
	t__kî√l_gid_t
;

18 
	t__kî√l_size_t
;

19 
	t__kî√l_ssize_t
;

20 
	t__kî√l_±rdiff_t
;

21 
	t__kî√l_time_t
;

22 
	t__kî√l_su£c⁄ds_t
;

23 
	t__kî√l_˛ock_t
;

24 
	t__kî√l_timî_t
;

25 
	t__kî√l_˛ockid_t
;

26 
	t__kî√l_daddr_t
;

27 * 
	t__kî√l_ˇddr_t
;

28 
	t__kî√l_uid16_t
;

29 
	t__kî√l_gid16_t
;

31 #ifde‡
__GNUC__


32 
	t__kî√l_loff_t
;

36 
	mvÆ
[2];

37 } 
	t__kî√l_fsid_t
;

39 
	t__kî√l_ﬁd_uid_t
;

40 
	t__kî√l_ﬁd_gid_t
;

41 
__kî√l_uid_t
 
	t__kî√l_uid32_t
;

42 
__kî√l_gid_t
 
	t__kî√l_gid32_t
;

44 
	t__kî√l_ﬁd_dev_t
;

	@/usr/include/linux/swab.h

1 #i‚de‡
_LINUX_SWAB_H


2 
	#_LINUX_SWAB_H


	)

4 
	~<löux/ty≥s.h
>

6 
	~<asm/swab.h
>

12 
	#___c⁄°™t_swab16
(
x
Ë((
__u16
)( \

13 (((
__u16
)(
x
) & (__u16)0x00ffU) << 8) | \

14 (((
__u16
)(
x
Ë& (__u16)0xff00UË>> 8)))

	)

16 
	#___c⁄°™t_swab32
(
x
Ë((
__u32
)( \

17 (((
__u32
)(
x
) & (__u32)0x000000ffUL) << 24) | \

18 (((
__u32
)(
x
) & (__u32)0x0000ff00UL) << 8) | \

19 (((
__u32
)(
x
) & (__u32)0x00ff0000UL) >> 8) | \

20 (((
__u32
)(
x
Ë& (__u32)0xff000000ULË>> 24)))

	)

22 
	#___c⁄°™t_swab64
(
x
Ë((
__u64
)( \

23 (((
__u64
)(
x
) & (__u64)0x00000000000000ffULL) << 56) | \

24 (((
__u64
)(
x
) & (__u64)0x000000000000ff00ULL) << 40) | \

25 (((
__u64
)(
x
) & (__u64)0x0000000000ff0000ULL) << 24) | \

26 (((
__u64
)(
x
) & (__u64)0x00000000ff000000ULL) << 8) | \

27 (((
__u64
)(
x
) & (__u64)0x000000ff00000000ULL) >> 8) | \

28 (((
__u64
)(
x
) & (__u64)0x0000ff0000000000ULL) >> 24) | \

29 (((
__u64
)(
x
) & (__u64)0x00ff000000000000ULL) >> 40) | \

30 (((
__u64
)(
x
Ë& (__u64)0xff00000000000000ULLË>> 56)))

	)

32 
	#___c⁄°™t_swahw32
(
x
Ë((
__u32
)( \

33 (((
__u32
)(
x
) & (__u32)0x0000ffffUL) << 16) | \

34 (((
__u32
)(
x
Ë& (__u32)0xffff0000ULË>> 16)))

	)

36 
	#___c⁄°™t_swahb32
(
x
Ë((
__u32
)( \

37 (((
__u32
)(
x
) & (__u32)0x00ff00ffUL) << 8) | \

38 (((
__u32
)(
x
Ë& (__u32)0xff00ff00ULË>> 8)))

	)

46 
__ölöe__
 
__u16
 
	$__fswab16
(
__u16
 
vÆ
)

48 #ifde‡
__¨ch_swab16


49  
	`__¨ch_swab16
(
vÆ
);

51  
	`___c⁄°™t_swab16
(
vÆ
);

53 
	}
}

55 
__ölöe__
 
__u32
 
	$__fswab32
(
__u32
 
vÆ
)

57 #ifde‡
__¨ch_swab32


58  
	`__¨ch_swab32
(
vÆ
);

60  
	`___c⁄°™t_swab32
(
vÆ
);

62 
	}
}

64 
__ölöe__
 
__u64
 
	$__fswab64
(
__u64
 
vÆ
)

66 #ifde‡
__¨ch_swab64


67  
	`__¨ch_swab64
(
vÆ
);

68 #ñi‡
	`deföed
(
__SWAB_64_THRU_32__
)

69 
__u32
 
h
 = 
vÆ
 >> 32;

70 
__u32
 
l
 = 
vÆ
 & ((1ULL << 32) - 1);

71  (((
__u64
)
	`__fswab32
(
l
)Ë<< 32Ë| ((__u64)(__fswab32(
h
)));

73  
	`___c⁄°™t_swab64
(
vÆ
);

75 
	}
}

77 
__ölöe__
 
__u32
 
	$__fswahw32
(
__u32
 
vÆ
)

79 #ifde‡
__¨ch_swahw32


80  
	`__¨ch_swahw32
(
vÆ
);

82  
	`___c⁄°™t_swahw32
(
vÆ
);

84 
	}
}

86 
__ölöe__
 
__u32
 
	$__fswahb32
(
__u32
 
vÆ
)

88 #ifde‡
__¨ch_swahb32


89  
	`__¨ch_swahb32
(
vÆ
);

91  
	`___c⁄°™t_swahb32
(
vÆ
);

93 
	}
}

99 
	#__swab16
(
x
) \

100 (
	`__buûtö_c⁄°™t_p
((
__u16
)(
x
)) ? \

101 
	`___c⁄°™t_swab16
(
x
) : \

102 
	`__fswab16
(
x
))

	)

108 
	#__swab32
(
x
) \

109 (
	`__buûtö_c⁄°™t_p
((
__u32
)(
x
)) ? \

110 
	`___c⁄°™t_swab32
(
x
) : \

111 
	`__fswab32
(
x
))

	)

117 
	#__swab64
(
x
) \

118 (
	`__buûtö_c⁄°™t_p
((
__u64
)(
x
)) ? \

119 
	`___c⁄°™t_swab64
(
x
) : \

120 
	`__fswab64
(
x
))

	)

128 
	#__swahw32
(
x
) \

129 (
	`__buûtö_c⁄°™t_p
((
__u32
)(
x
)) ? \

130 
	`___c⁄°™t_swahw32
(
x
) : \

131 
	`__fswahw32
(
x
))

	)

139 
	#__swahb32
(
x
) \

140 (
	`__buûtö_c⁄°™t_p
((
__u32
)(
x
)) ? \

141 
	`___c⁄°™t_swahb32
(
x
) : \

142 
	`__fswahb32
(
x
))

	)

148 
__ölöe__
 
__u16
 
	$__swab16p
(c⁄° 
__u16
 *
p
)

150 #ifde‡
__¨ch_swab16p


151  
	`__¨ch_swab16p
(
p
);

153  
	`__swab16
(*
p
);

155 
	}
}

161 
__ölöe__
 
__u32
 
	$__swab32p
(c⁄° 
__u32
 *
p
)

163 #ifde‡
__¨ch_swab32p


164  
	`__¨ch_swab32p
(
p
);

166  
	`__swab32
(*
p
);

168 
	}
}

174 
__ölöe__
 
__u64
 
	$__swab64p
(c⁄° 
__u64
 *
p
)

176 #ifde‡
__¨ch_swab64p


177  
	`__¨ch_swab64p
(
p
);

179  
	`__swab64
(*
p
);

181 
	}
}

189 
__ölöe__
 
__u32
 
	$__swahw32p
(c⁄° 
__u32
 *
p
)

191 #ifde‡
__¨ch_swahw32p


192  
	`__¨ch_swahw32p
(
p
);

194  
	`__swahw32
(*
p
);

196 
	}
}

204 
__ölöe__
 
__u32
 
	$__swahb32p
(c⁄° 
__u32
 *
p
)

206 #ifde‡
__¨ch_swahb32p


207  
	`__¨ch_swahb32p
(
p
);

209  
	`__swahb32
(*
p
);

211 
	}
}

217 
__ölöe__
 
	$__swab16s
(
__u16
 *
p
)

219 #ifde‡
__¨ch_swab16s


220 
	`__¨ch_swab16s
(
p
);

222 *
p
 = 
	`__swab16p
(p);

224 
	}
}

229 
__ölöe__
 
	$__swab32s
(
__u32
 *
p
)

231 #ifde‡
__¨ch_swab32s


232 
	`__¨ch_swab32s
(
p
);

234 *
p
 = 
	`__swab32p
(p);

236 
	}
}

242 
__ölöe__
 
	$__swab64s
(
__u64
 *
p
)

244 #ifde‡
__¨ch_swab64s


245 
	`__¨ch_swab64s
(
p
);

247 *
p
 = 
	`__swab64p
(p);

249 
	}
}

257 
__ölöe__
 
	$__swahw32s
(
__u32
 *
p
)

259 #ifde‡
__¨ch_swahw32s


260 
	`__¨ch_swahw32s
(
p
);

262 *
p
 = 
	`__swahw32p
(p);

264 
	}
}

272 
__ölöe__
 
	$__swahb32s
(
__u32
 *
p
)

274 #ifde‡
__¨ch_swahb32s


275 
	`__¨ch_swahb32s
(
p
);

277 *
p
 = 
	`__swahb32p
(p);

279 
	}
}

	@/usr/include/asm/bitsperlong.h

1 #i‚de‡
__ASM_X86_BITSPERLONG_H


2 
	#__ASM_X86_BITSPERLONG_H


	)

4 #ifde‡
__x86_64__


5 
	#__BITS_PER_LONG
 64

	)

7 
	#__BITS_PER_LONG
 32

	)

10 
	~<asm-gíîic/bô•îl⁄g.h
>

	@/usr/include/asm/swab.h

1 #i‚de‡
_ASM_X86_SWAB_H


2 
	#_ASM_X86_SWAB_H


	)

4 
	~<löux/ty≥s.h
>

7 
__ölöe__
 
__u32
 
	$__¨ch_swab32
(
__u32
 
vÆ
)

9 #ifde‡
__i386__


10 #ifde‡
CONFIG_X86_BSWAP


11 
	`__asm__
("bsw≠ %0" : "Ù" (
vÆ
) : "0" (val));

13 
	`__asm__
("xchgb %b0,%h0\n\t"

16 : "=q" (
vÆ
)

17 : "0" (
vÆ
));

21 
	`__asm__
("bswapl %0"

22 : "Ù" (
vÆ
)

23 : "0" (
vÆ
));

25  
vÆ
;

26 
	}
}

27 
	#__¨ch_swab32
 
__¨ch_swab32


	)

29 
__ölöe__
 
__u64
 
	$__¨ch_swab64
(
__u64
 
vÆ
)

31 #ifde‡
__i386__


34 
__u32
 
a
;

35 
__u32
 
b
;

36 } 
s
;

37 
__u64
 
u
;

38 } 
v
;

39 
v
.
u
 = 
vÆ
;

40 #ifde‡
CONFIG_X86_BSWAP


41 
	`__asm__
("bswapl %0 ; bswapl %1 ; xchgl %0,%1"

42 : "Ù" (
v
.
s
.
a
), "Ù" (v.s.
b
)

43 : "0" (
v
.
s
.
a
), "1" (v.s.
b
));

45 
v
.
s
.
a
 = 
	`__¨ch_swab32
(v.s.a);

46 
v
.
s
.
b
 = 
	`__¨ch_swab32
(v.s.b);

47 
	`__asm__
("xchgl %0,%1"

48 : "Ù" (
v
.
s
.
a
), "Ù" (v.s.
b
)

49 : "0" (
v
.
s
.
a
), "1" (v.s.
b
));

51  
v
.
u
;

53 
	`__asm__
("bswapq %0"

54 : "Ù" (
vÆ
)

55 : "0" (
vÆ
));

56  
vÆ
;

58 
	}
}

59 
	#__¨ch_swab64
 
__¨ch_swab64


	)

	@/usr/include/asm-generic/bitsperlong.h

1 #i‚de‡
__ASM_GENERIC_BITS_PER_LONG


2 
	#__ASM_GENERIC_BITS_PER_LONG


	)

11 #i‚de‡
__BITS_PER_LONG


12 
	#__BITS_PER_LONG
 32

	)

	@
1
.
1
/usr/include
41
1001
defines.h
ethtool.c
igbvf.h
igbvf.mod.c
mbx.c
mbx.h
netdev.c
regs.h
vf.c
vf.h
/usr/include/linux/ethtool.h
/usr/include/linux/if_ether.h
/usr/include/linux/if_vlan.h
/usr/include/linux/ipv6.h
/usr/include/linux/mii.h
/usr/include/linux/netdevice.h
/usr/include/linux/pci.h
/usr/include/linux/tcp.h
/usr/include/linux/types.h
/usr/include/asm/byteorder.h
/usr/include/asm/types.h
/usr/include/linux/if.h
/usr/include/linux/if_link.h
/usr/include/linux/if_packet.h
/usr/include/linux/in6.h
/usr/include/linux/pci_regs.h
/usr/include/linux/posix_types.h
/usr/include/linux/socket.h
/usr/include/asm-generic/types.h
/usr/include/asm/posix_types.h
/usr/include/linux/byteorder/little_endian.h
/usr/include/linux/hdlc/ioctl.h
/usr/include/linux/netlink.h
/usr/include/linux/stddef.h
/usr/include/asm-generic/int-ll64.h
/usr/include/asm/posix_types_32.h
/usr/include/asm/posix_types_64.h
/usr/include/linux/swab.h
/usr/include/asm/bitsperlong.h
/usr/include/asm/swab.h
/usr/include/asm-generic/bitsperlong.h
